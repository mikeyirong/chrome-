(window.AmazonUIPageJS?AmazonUIPageJS:P).execute(function(){ASPP.when("ASPA","augur-utils").execute(function(e,d){e.declarative("augur-fsl-increase-storage","click",function(a){$("#augur_fsl_current_usage_stats .asp-declarative").attr("data-action","");$("#augur_fsl_popover_loading").removeClass("asp-hidden");var b=e.state(a.data.workflowName+"_state");d.setIntoState(b,d.getWevObjectTypeName(),a.data.outputKey,a.data.storageType);d.getNextNode(a.data.workflowId,a.data.currentNodeId,b,a.data.updatingDivId);
d.getMetricsHandle(b)("strgIncReq",{storageType:a.data.storageType})})});ASPP.when("ASPA","spaui-external-metrics").register("augur-utils",function(e,d){var a=e.$,b={getNextNode:function(c,i,f,g,d){var h=f?b.getMetricsHandle(f):!1,f=f?b.jsonStringify(f):"";e.post("/hz/augur/execute-workflow",{params:{workflowId:c,currentNodeId:i,state:f,client:d},success:function(c){if(g&&g.toUpperCase()!=="NONE"){a("#"+g).html("");var f=a("<div />");f.html(c);f.find(".augur-workflow-error").length!==0?(a("#"+g).html(c),
h&&h("getNodeErr",{currentNodeId:i})):(f.children().each(function(){var c=a(this).attr("augur-wf-append-to");a(this).children().each(function(){this.id!==null&&this.id!==""&&a("#"+c).find("#"+this.id).remove()});a("#"+c).append(a(this).html());a(this).remove()}),h&&h("getNodeSucc",{currentNodeId:i}))}},error:function(){g&&g.toUpperCase()!=="NONE"&&(a("#"+g).html("<b>We are facing some technical issues as of now, please try again later.<b>"),h&&h("getNodeFatal",{currentNodeId:i}))},timeout:8E4})},
jsonStringify:function(c){return window.JSON&&JSON.stringify?JSON.stringify(c):b.mapToString(c)},mapToString:function(c){var a="{",f=0;if(c!==null)for(var g in c)c.hasOwnProperty(g)&&(f!==0&&(a+=", "),a+='"'+g+'":"'+b.escapeJson(c[g])+'"',f++);a+="}";return a},escapeJson:function(a){var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};
b.lastIndex=0;return a.replace(b,function(a){return f[a]?f[a]:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})},getWevObjectTypeName:function(){return"workflow_execution_variables"},setIntoState:function(a,b,f,d){for(var e=0;e<a.racerXObjects.length;e++)a.racerXObjects[e].objectType===b&&(a.racerXObjects[e].attributes[f]=d)},getValueOfKeyFromState:function(a,d){for(var f=0;f<a.racerXObjects.length;f++)if(a.racerXObjects[f].objectType===b.getWevObjectTypeName())return a.racerXObjects[f].attributes[d]},
getMetricsHandle:function(a){for(var e,f,g=0;g<a.racerXObjects.length;g++)if(a.racerXObjects[g].objectType===b.getWevObjectTypeName())e=a.racerXObjects[g].attributes.client,f=a.racerXObjects[g].attributes.workflow_execution_id;if(e&&f)return d.register(f,e);else console.error("[AugurUI] Client name or WorkflowExecutionId cannot be null or empty.")},waitForWorkflowToBeRead:function(a,b){var f=this;setTimeout(function(){f.postMetricsIfWorkflowIsPresent(a,b)},b.timeout)},postMetricsIfWorkflowIsPresent:function(c,
d){var f=d.elements_to_check.split("|"),e=!0;a.each(f,function(a,c){b.isElementPresent(c)||(e=!1)});e&&c(d.summary,d)},isElementPresent:function(c){c=a("#"+c);return c.length>0&&c.is(":visible")&&this.isScrolledIntoView(c)?!0:!1},isScrolledIntoView:function(c){var b=a(window).scrollTop(),d=b+a(window).height(),e=c.offset().top;return e+c.height()<=d&&e>=b}};return b});ASPP.when("ASPA","augur-utils").execute(function(e,d){e.declarative("augur_wd_check_asin_fnsku","click",function(a){$("#augur_wd_submit .asp-declarative").attr("data-action",
"");$("#augur_wd_popover_loading").removeClass("asp-hidden");var b=e.state(a.data.workflowName+"_state"),c=$("#"+a.data.textInputId).val(),c=c.trim();d.setIntoState(b,d.getWevObjectTypeName(),a.data.outputKey,c);d.getNextNode(a.data.workflowId,a.data.currentNodeId,b,a.data.updatingDivId);d.getMetricsHandle(b)("asinFnskuInpt",{textInputValue:c})});e.declarative("augur_wd_check_case_details","click",function(a){$("#augur_wd_done .asp-declarative").attr("data-action","");$("#augur_wd_popover_loading").removeClass("asp-hidden");
var b=e.state(a.data.workflowName+"_state"),c=$("#"+a.data.caseDetailsInputId).val();d.setIntoState(b,d.getWevObjectTypeName(),a.data.outputKey,c);d.getNextNode(a.data.workflowId,a.data.currentNodeId,b,a.data.updatingDivId);d.getMetricsHandle(b)("caseDetailsInpt",{caseDetailsInputValue:c})});e.declarative("augur_wd_radio_fnsku_selected","click",function(a){$("#augur_wd_next .asp-declarative").attr("data-action","");$("#augur_wd_popover_loading").removeClass("asp-hidden");var b=e.state(a.data.workflowName+
"_state"),c=$("input[name=radioButtonSelectValue]").filter(":checked").val();d.setIntoState(b,d.getWevObjectTypeName(),a.data.outputKey,c);d.getNextNode(a.data.workflowId,a.data.currentNodeId,b,a.data.updatingDivId);d.getMetricsHandle(b)("fnskuInpt",{fnskuInputValue:c})});e.declarative("augur_wd_radio_selected","click",function(){$("input[name=radioButtonSelectValue]").is(":checked")&&$("#augur_wd_next").removeClass("asp-hidden")});e.declarative("augur_wd_check_another_asin_fnsku","click",function(a){$("#augur_wd_popover_loading_link").removeClass("asp-hidden");
var b=e.state(a.data.workflowName+"_state"),b=d.getValueOfKeyFromState(b,"client");d.getNextNode(a.data.workflowId,"",null,a.data.updatingDivId,b)})});ASPP.when("ASPA","augur-utils").execute(function(e,d){e.declarative("augur_ir_link_click","click",function(a){$("#augur_ir_link .asp-declarative").attr("data-action","");a=e.state(a.data.workflowName+"_state");d.getMetricsHandle(a)("usrClkWFLink",{userClickDescription:"User clicked on MYI link in the WF"});window.location.href="/gp/ssof/knights/items-list.html"})})});