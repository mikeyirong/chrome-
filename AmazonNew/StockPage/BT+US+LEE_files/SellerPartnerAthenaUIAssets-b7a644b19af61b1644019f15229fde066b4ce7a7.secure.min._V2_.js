(window.AmazonUIPageJS?AmazonUIPageJS:P).execute(function(){ASPP.when("ASPA","spaui-util","spaui-metrics","spaui-history").register("spaui-ajax",function(e,h,d,b){var c={get:function(b,a,d,j){c.core(e.$.get,b,a,d,j)},post:function(b,a,d,j){c.core(e.$.post,b,a,d,j)},core:function(a,k,g,j,l){g=e.$.extend({url:k,data:"",dataType:void 0,payload:{}},g);a(g.url,g.data,null,g.dataType).done(function(a,f,l){if(c.isResponseHtml(l)&&h.handleSigninRedirect(a))d.send({from:b.getFrom(),where:"someAjaxRequest",
to:"responseWasLoginPage",additionalObj:{url:k}});else if(e.$.isFunction(j))g.payload.data=a,j(g.payload)}).fail(function(a,b){if(e.$.isFunction(l))g.payload.data=a,g.payload.errorStatus=b,l(g.payload)})},isResponseHtml:function(a){return(a.getResponseHeader("content-type")||"").indexOf("html")>-1},mockGet:function(b,d,g,j,l){a.get=c.mockCore(b,d,g,j,l)},mockPost:function(b,d,g,j,l){a.post=c.mockCore(b,d,g,j,l)},mockCore:function(b,a,c,d,l,i){return function(h,r,s,m){var q=function(){var l=e.$.extend({},
r.payload,{data:a});h.match(b)&&(i!==void 0&&i(r),e.$.isFunction(d)&&d(h,r,s,m),c?e.$.isFunction(m)&&m(l):e.$.isFunction(s)&&s(l))};l?setTimeout(q,l):q()}},mockFailedGet:function(b,d,g){a.get=c.mockFailedCore(b,d,g)},mockFailedPost:function(b,d,g){a.post=c.mockFailedCore(b,d,g)},mockFailedCore:function(b,a,c){return function(d,l,i,h){l=e.$.extend({},l.payload,{data:a,errorStatus:c});d.match(b)&&e.$.isFunction(h)&&h(l)}}},a={get:c.get,post:c.post,mockGet:c.mockGet,mockPost:c.mockPost,mockFailedGet:c.mockFailedGet,
mockFailedPost:c.mockFailedPost};return a});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-metrics","spaui-theming","spaui-history","spaui-content","spaui-ui","spaui-push-notification","spaui-events","spaui-discovery","spaui-state","spaui-async","spaui-grouped-alerts","spaui-eci-widget","spaui-alert-metrics","spaui-alert-util").register("spaui-alerts",function(e,h,d,b,c,a,f,k,g,j,l,i,o,r,s,m,q){var x,u,n,A,v,z={parentRequestId:null,athenaInitializedWithoutSummon:!1,onInfoCard:!1,isInfoCardLoaded:!1,
alertLoaded:!1,alertFlushed:!1,marketplaceId:null,overrideContext:null,overrideAlertId:null,alertContent:null,shinyCount:0,alertHandles:[]},t={init:function(b){h.log("spaui-alerts init()");z.marketplaceId=e.state("spaui-state").marketplaceID||e.state("spaui-state").marketplaceId;t.hydrate(b);t.bind()},hydrate:function(a){x=a;u=e.$("#sc-quicklink-help").find(".sc-ql-a").find(".sc-quick-txt");n=e.$("#spaui-template-shiny-object");j.subscribeAsyncModuleEvent("alerts",o.LOADED_EVENT,t.onLoad);j.subscribeAsyncModuleEvent("alerts",
o.COMPLETED_EVENT,t.onCompleteLoad);j.subscribe(j.getName("newPage"),t.onNewPage);j.subscribe(j.getName("initializedWithoutSummon"),t.onInitialize);j.subscribe(j.getName("dismissed"),t.onAthenaDismissed);l.register("alerts","info",!1,t.firstDiscovery);a={simpleRegister:t.registerSimpleAlert,customRegister:t.registerAlert};s.registerHandles(a);r.registerHandles(a);t.registerSimpleAlert(function(){return!0},b.getContext("alert"),b.getContext("pushNotification"))},registerSimpleAlert:function(b,a,c,
d){t.registerAlert(b,t.createInstrumentClosure(m.discover,a,c),t.createInstrumentClosure(m.read,a,c),t.createInstrumentClosure(m.dismiss,a,c),t.createInstrumentClosure(m.minimize,a,c),d)},createInstrumentClosure:function(a,b,c){return function(d){a(b,c,q.getAlertDetails(d))}},registerAlert:function(a,b,c,d,f,j){z.alertHandles.push({checkFunc:a,onDiscover:b,onOpen:c,onDismiss:d,onMinimize:f,pushConfig:j})},onLoad:function(a){z.alertLoaded=!0;z.alertContent=a?a:x.find(".spaui-alerts");e.$(z.alertContent).find(".spaui-alert").length<=
0&&t.instrumentNoAlertsToShow(b.getContext("alert"));t.attemptMastheadDisplay()},onInitialize:function(){z.athenaInitializedWithoutSummon=!0;t.attemptMastheadDisplay()},onAthenaDismissed:function(){z.onInfoCard=!1;z.athenaInitializedWithoutSummon=!0;t.attemptMastheadDisplay()},attemptMastheadDisplay:function(){if(!z.onInfoCard&&!q.isAlertsHidden()&&z.alertLoaded&&z.athenaInitializedWithoutSummon&&z.alertContent!==null){var a=e.$(z.alertContent);z.shinyCount=a.data("shiny-count");a=a.find(".spaui-alert");
if(a.length>0){z.alertContent=null;var b=t.getPushNotificationConfig(a);a.data("is-push")&&b!==!1?t.displayPushNotification(a):t.displayShinyObjectAlert(a)}}},onNewPage:function(a){a.type===f.getPageType("info")&&t.dynamicHydrate()},onCompleteLoad:function(){z.alertFlushed=!0;j.publish(j.getName("alertsLoaded"));t.dynamicHydrate();if(q.isAlertsHidden())A.hide();else if(t.isTimeToDiscover())t.onDiscover()},dynamicHydrate:function(){A=x.find("#spaui-content .spaui-alerts");A.find(".spaui-alert").each(function(){var a=
e.$(this),b=t.getIconTemplate(a),a=a.find(".spaui-alert-badge"),b=b.find(".spaui-alert-icon");a.empty();a.append(b.clone())})},bind:function(){x.delegate(".spaui-alert-toggle","click",t.toggle);x.delegate(".spaui-alert-dismiss","click",t.dismiss);x.delegate(".spaui-alert-load-all","click",t.loadAllHandle);e.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-alert-load-all","click",t.pushNotificationLoadAll)},toggle:function(a){a.preventDefault();var a=e.$(a.currentTarget),b=q.getAlertFromChild(a);
a.hasClass("spaui-alert-toggle-closed")?(a.removeClass("spaui-alert-toggle-closed").addClass("spaui-alert-toggle-open"),a.parent().find(".spaui-alert-content").css("display","block"),d.updateScrollTop(a,70),t.callAlertHandle("onOpen",b)):(a.removeClass("spaui-alert-toggle-open").addClass("spaui-alert-toggle-closed"),a.parent().find(".spaui-alert-content").css("display","none"),t.callAlertHandle("onMinimize",b))},dismiss:function(a){a.preventDefault();e.$("#spaui-alerts-icon").remove();u.css("padding-right",
"");a=q.getAlertFromChild(e.$(a.currentTarget));t.callAlertHandle("onDismiss",a);q.hideSingleAlert(q.getAlertDetails(a).id)},loadAllHandle:function(a,c){a.preventDefault();t.displayAllAlerts({where:c?b.getContext("pushNotification"):b.getContext("alert")})},displayAllAlerts:function(c){k.getVisible()||k.summoner({});var d="/hz/sellerpartner/athena-all-alerts?requestId="+b.incrementChildRequestId();f.placeEndpoint(i.enhanceUrl(d),"alerts",function(){b.send(e.$.extend({from:a.getFrom(),where:b.getContext("alert"),
to:b.getPlace("alerts")},c));t.loadAllDiscover();t.loadAllRead()})},pushNotificationLoadAll:function(a){t.loadAllHandle(a,!0)},loadAllDiscover:function(){var a=[];e.$(".spaui-alerts-all .spaui-alert-header").each(function(){a.push(d.gda(this,"id"))});a.length<=0?t.instrumentNoAlertsToShow(b.getContext("allAlerts")):m.massDiscover(b.getContext("allAlerts"),a);t.dynamicHydrate()},loadAllRead:function(){var a=[];e.$(".spaui-alerts-all .spaui-alert-header.spaui-alert-fixed").each(function(){a.push(d.gda(this,
"id"))});a.length>0&&m.massRead(b.getContext("allAlerts"),a)},onDiscover:function(){var d=A.find(".spaui-alert");if(d.length>0&&!q.isAlertsHidden()){var f=v===void 0?void 0:parseInt(v.data("priority"),10);c.shouldHideAlerts(f)?(d=q.getAlertDetails(d),b.send({from:a.getFrom(),where:b.getContext("alert"),to:b.getPlace("alertSuppressed"),payloadObj:{notificationId:d.id,notificationType:d.type,notificationName:d.name}})):(t.callAlertHandle("onDiscover",d),t.isNonToggleAlert(d)&&t.callAlertHandle("onOpen",
d))}},isTimeToDiscover:function(){return z.isInfoCardLoaded&&z.alertFlushed},isNonToggleAlert:function(a){return!q.getAlertDetails(a).expandable},firstDiscovery:function(){z.onInfoCard=!0;z.isInfoCardLoaded=!0;if(t.isTimeToDiscover())t.onDiscover()},instrumentNoAlertsToShow:function(c){b.send({from:a.getFrom(),where:c,to:b.getPlace("noAlertToShow")})},displayShinyObjectAlert:function(f,j){var i=t.getIconTemplate(f,j).find(".spaui-alert-shiny").clone(),l=d.gda(i,"priority");if(!(f!==void 0&&c.shouldHideAlerts(l))&&
!(l>=(v===void 0?999:d.gda(v,"priority")))){u.length===0&&(u=e.$("#helpMenuID .sc_quicklink"));u.length===0&&h.error("Cant find help link for alerts icon!");v!==void 0&&v.remove();v=i;u.append(i);u.css("padding-right","25px");var g=null,l=j||d.gda(f,"severity"),q=t.getSeverity(l);if(g===null||q.priority<g.priority)g=q;g&&(u.attr("aria-label","Help - "+g.ariaLabel),q=A!==void 0?A.data("shiny-count"):z.shinyCount,g.showCount&&q>0?(i.removeClass("spaui-sprite"),i.addClass("spaui-alert-shiny-count"),
i.text(q),i=i.clone(),f.find(".spaui-alert-load-all-node .spaui-alert-load-all").append(i)):q=0,b.send({from:a.getFrom(),where:b.getContext("alertShinyObject"),to:"discovered",additionalObj:{severityShow:l,count:q}}))}},getShinyIconOverrideCode:function(){return{A1F83G8C2ARO7P:"GB",A1PA6795UKMFR9:"EU",A13V1IB3VIYZZH:"EU",A1RKKUPIHCS9HS:"EU",AJZF8LZ1EJVJN:"EU",APJ6JRA9NG5V4:"EU",A3HOBANJMCMD83:"EU",A21TJRUUN4KGV:"IN",A2XZLSVIQ0F4JT:"IN",AAHKV2X7AFYLW:"SEA",A1VC38T7YXB528:"SEA"}[z.marketplaceId]||"default"},
getSeverity:function(a){return{ALERT_HIGH:{priority:0,ariaLabel:"Urgent notification",showCount:!0},ALERT_MEDIUM:{priority:1,ariaLabel:"Important notification",showCount:!0},INFORMATION:{priority:2,ariaLabel:"Information alert",showCount:!1},OPPORTUNITY:{priority:3,ariaLabel:"Oppurtunity alert",showCount:!1}}[a]},displayPushNotification:function(a){var b=a.find(".spaui-alert-toggle").text(),c=a.find(".spaui-alert-content").clone(),d=t.getPushNotificationConfig(a),a=q.getAlertDetails(a),f=g.create(b,
c,d.pushNotificationSev,d.hasMinimizeButton);f.data("id",a.id);f.data("type",a.type);f.data("name",a.name);f.data("is-push",!0);t.callAlertHandle("onDiscover",f);j.subscribe(j.getName("pushNotificationOpened"),function(){t.callAlertHandle("onOpen",f)});j.subscribe(j.getName("pushNotificationClosed"),function(){t.callAlertHandle("onDismiss",f)});j.subscribe(j.getName("pushNotificationMinimize"),function(){t.callAlertHandle("onMinimize",f)})},getPushNotificationConfig:function(a){var b={ALERT_HIGH:{type:"urgent",
pushNotificationSev:g.HIGH},OPPORTUNITY:{type:"opportunity",pushNotificationSev:g.OPPORTUNITY},ALERT_MEDIUM:{type:"alert",pushNotificationSev:g.MEDIUM},INFORMATION:{type:"info",pushNotificationSev:g.INFORMATION}}[a.data("severity")];return b?(b={type:b.type,pushNotificationSev:b.pushNotificationSev,hasMinimizeButton:!1},a=t.getAlertHandles(a),a.pushConfig&&e.$.isPlainObject(a.pushConfig)&&(b=e.$.extend({},b,a.pushConfig)),b):!1},getState:function(){return z},getIconTemplate:function(a,b){var c=t.getShinyIconOverrideCode(),
f=b||d.gda(a,"severity"),f=n.find("#"+f),c=f.find("."+c);c.length===0&&(c=f.find(".default"));return c},getAlertHandles:function(a){for(var b=0;b<z.alertHandles.length;++b){var c=z.alertHandles[b];if(c.checkFunc(a))return c}},callAlertHandle:function(a,b){var c=t.getAlertHandles(b);if(c[a]&&e.$.isFunction(c[a]))c[a](b)}};return{init:t.init,bindIrisCallsToPushNotification:t.bindIrisCallsToPushNotification,getSeverity:t.getSeverity,getState:t.getState,getShinyIconOverrideCode:t.getShinyIconOverrideCode,
getIconTemplate:t.getIconTemplate,displayShinyObjectAlert:t.displayShinyObjectAlert,displayAllAlerts:t.displayAllAlerts}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-ajax").register("spaui-alert-metrics",function(e,h,d,b){var c=null,a=[],f=[],k={iris:"DISCOVERED",alertAction:h.getPlace("alertDiscovered"),pushAction:"load",idList:a},g={iris:"READ",alertAction:h.getPlace("setAlertRead"),pushAction:"open",idList:f},j={iris:"ABORT",alertAction:h.getPlace("setAlertAbort"),pushAction:"dismiss",
idList:[]},l={iris:null,alertAction:h.getPlace("minimized"),pushAction:h.getPlace("minimized"),idList:null},i={init:function(){c=h.getParentRequestId()},instrumentMassDiscover:function(b,c){c=i.filterIdsAlreadySeen(c,a);if(c.length>0){a=a.concat(c);var f=c.join(",");i.sendIrisResponse(k.iris,f,function(){h.send({from:d.getFrom(),where:b,to:h.getPlace("alertMassDiscovered"),additionalObj:{ids:f}})})}},instrumentMassRead:function(a,b){b=i.filterIdsAlreadySeen(b,f);if(b.length>0){f=f.concat(b);var c=
b.join(",");i.sendIrisResponse(g.iris,c,function(){h.send({from:d.getFrom(),where:a,to:h.getPlace("alertMassRead"),additionalObj:{ids:c}})})}},instrumentDiscover:function(a,b,c){i.instrumentAlert(k,a,b,c)},instrumentRead:function(a,b,c){i.instrumentAlert(g,a,b,c)},instrumentDismiss:function(a,b,c){i.instrumentAlert(j,a,b,c)},instrumentMinimize:function(a,b,c){i.sendMetrics(l,a,b,c)},instrumentAlert:function(a,b,c,d){var f=a.idList;f.indexOf(d.id)===-1&&(f.push(d.id),i.sendIrisResponse(a.iris,d.id,
function(){i.sendMetrics(a,b,c,d)}))},sendMetrics:function(a,b,c,f){b=i.chooseContext(b,c,f);a=i.getAction(a,f);h.send({from:d.getFrom(),where:b,to:a,additionalObj:{isPush:f.isPush},payloadObj:{notificationId:f.id,notificationType:f.type,notificationName:f.name}})},sendIrisResponse:function(a,d,f){b.get("/hz/sellerpartner/alert/"+a+"?ids="+d+"&prid="+c,{},function(){e.$.isFunction(f)&&f()})},chooseContext:function(a,b,c){return c.isPush?b:a},getAction:function(a,b){return b.isPush?a.pushAction:a.alertAction},
filterIdsAlreadySeen:function(a,b){return a.filter(function(a){return b.indexOf(a)===-1})}};return{init:i.init,massDiscover:i.instrumentMassDiscover,massRead:i.instrumentMassRead,discover:i.instrumentDiscover,read:i.instrumentRead,dismiss:i.instrumentDismiss,minimize:i.instrumentMinimize}});ASPP.when("ASPA").register("spaui-alert-util",function(e){var h=null,d;return{init:function(b){h=b;d=e.$("#sc-quicklinks-top")},getAlertFromInnerEvent:function(b){var b=e.$(b.target),c=b.closest(".spaui-alert");
c.length===0&&(c=b.closest("#spaui-push-notification"));return c},getAlertDetails:function(b){var c={isPush:!1},a=b.find(".spaui-alert-header");if(a.length===0&&b.is("#spaui-push-notification"))c.isPush=!0,a=b;c.id=a.data("id");c.name=a.data("name");c.type=a.data("type");c.expandable=a.data("expandable");return c},getAlertFromChild:function(b){var c=b.closest(".spaui-alert");c.length===0&&(c=b.closest("#spaui-push-notification"));return c},hideSingleAlert:function(b){var c=h.find(".spaui-alerts");
c.length>0&&(c.find(".spaui-alert").length===1&&c.data("is-hidden",!0),b&&(c=c.find('.spaui-alert-header[data-id="'+b+'"]').closest("li.spaui-alert"),c.length>0&&c.fadeOut({duration:300})));c=d.find("#spaui-push-notification");if(c.length>0){var a=c.data("id")+"";b+="";a===b&&c.fadeOut({duration:300})}},isAlertsHidden:function(){var b=h.find(".spaui-alerts");return b.length>0?b.data("is-hidden")===!0:!1}}});ASPP.when("ASPA","spaui-ui","spaui-metrics","spaui-history","spaui-events","spaui-content",
"spaui-search","spaui-util","spaui-help").register("spaui-api",function(e,h,d,b,c,a,f,k,g){var j=!1,l={init:function(){l.bind()},bind:function(){window._sellerPartnerAthena=o;c.subscribe(c.getName("initialized"),function(){l.triggerLoadedEvent(h.getVisible())})},triggerLoadedEvent:function(a){if(window._sellerPartnerAthenaLoaded&&!j){j=!0;var b=window._sellerPartnerAthenaLoaded,c;for(c in b)if(b.hasOwnProperty(c)&&e.$.isFunction(b[c]))b[c](a)}},summon:function(){h.summoner({external:!0,where:d.getContext("externalApi"),
additionalObj:e.$.extend({},i)})},maybeSummon:function(){h.getVisible()||l.summon()},getTracking:function(){return{where:d.getContext("externalApi"),additionalObj:e.$.extend({},i)}},assertRegistered:function(){if(i.clientId===null||i.context===null)throw"Access to Athena's external API is restricted until you register with it by calling _sellerPartnerAthena.register([clientId], [context])";}},i={client:null,context:null},o={register:function(a,b){i.client=a;i.context=b},summon:function(){l.assertRegistered();
l.maybeSummon()},banish:function(){l.assertRegistered();h.banisher(l.getTracking())},displayHelpArticle:function(a){l.assertRegistered();g.displayHelpTopic(a,null,l.getTracking());l.maybeSummon()},displaySearchResults:function(a){l.assertRegistered();f.externalSubmitSearch(decodeURIComponent(a),l.getTracking());l.maybeSummon()},isContentInsideAthena:function(a){if(!(a instanceof e.$))if(k.isHtmlElement(a))a=e.$(a);else throw"content must be either a jQuery object (from ASPA) or an HtmlElement";return a.closest("#spaui, #spaui-push-notification").length>
0}};return{init:l.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-state","spaui-history","spaui-events","spaui-ajax").register("spaui-async",function(e,h,d,b,c,a,f){var k,g,j={},l={},i={transitionTime:400,flushable:[],onSummonAsyncElements:[],nonAsyncModules:{"featured-content":"featured-content",predictive:"predictive",alerts:"alerts"},onLoadState:null,onSummonState:null,preventFlushFlag:!1,LOADED:"loaded",QUEUED:"queued",SLIDING_UP:"slidingUp",FLUSHED:"flushed",SLIDING_DOWN:"slidingDown",
COMPLETED:"completed",LOADED_EVENT:"Loaded",COMPLETED_EVENT:"Completed"},o={init:function(a,b){h.log("async.init()");o.hydrate(a);o.bind();var c=k.find(".spaui-async-load"),d=o.splitLoadAndSummonAsync(c),c=d.immediately,d=d.onSummon;i.onLoadState=o.initialState(c);i.onSummonState=o.initialState(d);i.onSummonAsyncElements=d;i.callback=b;o.triggerLoad(c);o.loadComplete();o.loadNonAsync()},initialState:function(a){return{initialElementCount:a.length,remainingElementCount:a.length}},hydrate:function(a){k=
a;g=e.$("#spaui-template-async")},bind:function(){a.subscribe(a.getName("newPage"),o.onNewPage);a.subscribe(a.getName("summon"),o.asyncOnSummon);a.subscribe(a.getName("leavingPage"),o.onLeavePage)},onNewPage:function(){for(var a in j)if(j.hasOwnProperty(a)&&j[a]===i.FLUSHED){var b=l[a],c=k.find("#"+b);b&&c.length!==0&&(d.resetJqueryAnimation(c),o.moduleComplete(a))}o.flushNoTransition()},onLeavePage:function(){for(var a in j)if(j.hasOwnProperty(a))if(j[a]===i.SLIDING_UP)j[a]=i.QUEUED;else if(j[a]===
i.SLIDING_DOWN)j[a]=i.FLUSHED;o.preventFlush()},triggerLoad:function(a){for(var b=0;b<a.length;b++)o.asyncLoad(a[b])},splitLoadAndSummonAsync:function(a){var b=[],c=[];a.each(function(){var a=e.$(this),d=a.data("load-event"),f=a.data("module");delete i.nonAsyncModules[f];if(d==="load")b.push(a);else if(d==="summon")c.push(a);else throw"Unrecognized load event type in async module: "+d;});return{onSummon:c,immediately:b}},asyncOnSummon:function(){if(i.onSummonAsyncElements.length>0)o.triggerLoad(i.onSummonAsyncElements),
i.onSummonAsyncElements=[]},asyncLoad:function(a){var c=d.gda(a,"async-url"),i=b.enhanceUrl(c);a.attr("id")===void 0&&a.attr("id",d.getUid());var j=d.gda(a,"load-event");h.log("attempting to load "+i);f.get(i,{dataType:"html"},function(b){o.asyncSuccess(a,b.data,c,j)},function(b){o.asyncError(a,b,c,j)})},transitionAsyncElement:function(a,b,c,f){var g=e.$(b);f?(o.replaceAndFlush(a,g,c),o.moduleComplete(c)):(j[c]=i.SLIDING_UP,a.slideUp(i.transitionTime,function(){if(j[c]===i.SLIDING_UP)g.hide(),o.replaceAndFlush(a,
g,c),d.ensureId(g),l[c]=g.attr("id"),j[c]=i.SLIDING_DOWN,g.slideDown(i.transitionTime,function(){j[c]===i.SLIDING_DOWN&&o.moduleComplete(c)})}))},replaceAndFlush:function(a,b,c){a.replaceWith(b);o.removeModuleFromFlushQueue(c)},moduleComplete:function(b){j[b]=i.COMPLETED;a.publishAsyncModuleEvent(b,i.COMPLETED_EVENT)},attemptFlush:function(b,c){var d=b.data("module"),f="#"+b.attr("id");i.flushable.push({selector:f,replacement:c,module:d});j[d]=i.QUEUED;a.publishAsyncModuleEvent(d,i.LOADED_EVENT,c);
f=k.find(f);!i.preventFlushFlag&&f.size()>0&&o.transitionAsyncElement(f,c,d)},asyncSuccess:function(a,b,c,d){h.log("async success fetching "+c);o.attemptFlush(a,b);o.attemptLoadComplete(d)},asyncError:function(a,b,c,f){h.log("async failure fetching "+c);d.getErrorDetailsFromAjaxResponse(b.data,b.errorStatus).type!=="abort"&&(b=a.data("template"),b=o.getTemplateHtmlString(b),o.attemptFlush(a,b),o.attemptLoadComplete(f))},getTemplateHtmlString:function(a){a=g.find("#"+a);return a.length>0?a[0].outerHTML:
""},attemptLoadComplete:function(a){a==="summon"?i.onSummonState.remainingElementCount--:i.onLoadState.remainingElementCount--;o.loadComplete()},loadComplete:function(){o.isTimeToCallback()&&i.callback!==void 0&&i.callback()},isTimeToCallback:function(){return i.onLoadState.remainingElementCount<=0&&i.onSummonState.remainingElementCount<=0},loadNonAsync:function(){d.forEachObjectValue(i.nonAsyncModules,function(b){a.publishAsyncModuleEvent(b,i.LOADED_EVENT,null);a.publishAsyncModuleEvent(b,i.COMPLETED_EVENT)})},
getFlushableState:function(){return i.flushable},flushNoTransition:function(){i.preventFlushFlag=!1;i.flushable.forEach(function(a){var b=k.find(a.selector);b.length>0&&o.transitionAsyncElement(b,a.replacement,a.module,!0)})},removeModuleFromFlushQueue:function(a){i.flushable=i.flushable.filter(function(b){return b.module!==a})},preventFlush:function(){i.preventFlushFlag=!0},setTransitionTime:function(a){i.transitionTime=a}};return{init:o.init,getFlushableState:o.getFlushableState,setTransitionTime:o.setTransitionTime,
LOADED_EVENT:i.LOADED_EVENT,COMPLETED_EVENT:i.COMPLETED_EVENT}});ASPP.when("ASPA","spaui-debug","spaui-history","spaui-metrics","spaui-session","spaui-state","spaui-triggers","spaui-ui","spaui-util","spaui-content","spaui-search","spaui-feedback","spaui-alerts","spaui-links","spaui-predictive","spaui-shim","spaui-global-nav-search","spaui-hmd","spaui-featured-content","spaui-async","spaui-theming","spaui-intercept-card","spaui-forums","spaui-push-notification","spaui-eci-widget","spaui-events","spaui-features",
"spaui-weblabs","spaui-discovery","spaui-api","spaui-help","spaui-linkcopy","spaui-direct-answer","spaui-contact-deflection","spaui-alert-util","spaui-alert-metrics","spaui-expand","spaui-grouped-alerts","spaui-workflows","spaui-rightclick","ready").register("spaui",function(e,h,d,b,c,a,f,k,g,j,l,i,o,r,s,m,q,x,u,n,A,v,z,t,C,D,p,E,y,K,I,L,F,J,M,N,O,Q,R,S){var w={animation:{duration:{previewFadeOut:400,backAnimate:50,contentFadeIn:300,fbConfirm:2E3},distance:410},$dom:{},preview:{show:!0,dismiss:"/hz/sellerpartner/preview-card/dismiss"},
template:{next:'<div id="spaui-next"></div>',prev:'<div id="spaui-prev"></div>',current:'<div id="spaui-content" class="spaui-content spaui-new spaui-hide" tabindex="-1"></div>',searchLoader:'<div id="scroll-loader" class="scroll-loader"><div class="spaui-content-loading"></div></div>'}},G=null,H,B={init:function(e){m.init();h.group("init()");h.warn(e);h.groupEnd();d.init();a.init(window);g.init(window);g.exposejQuery();y.init();O.init();B.hydrate();B.bind();E.init(e.weblabs);b.init(e.instrumentation);
c.init();S.init(w.$dom.spaui);k.init(w.$dom.spaui);K.init();I.init(w.$dom.spaui);j.init(w.$dom.spaui,e.serverUrl.url,e.sellerU.ids,e.helpContentJSWhitelist.ids);L.init(w.$dom.spaui,e.serverUrl.url);l.init(w.$dom.spaui,e.enableSearchSuggestions.enabled,e.navSearchWeblab.treatment);t.init(w.$dom.spaui);i.init(w.$dom.spaui);x.init(w.$dom.spaui);z.init(w.$dom.spaui);B.preview(e.preview);f.init({athenaHome:B.home,footerContactUs:e.footerContactUsWeblab.treatment});A.init();M.init(w.$dom.spaui);N.init();
o.init(w.$dom.spaui);C.init(w.$dom.spaui);r.init(w.$dom.spaui,e.enableForumsCard.enabled,e.disableContactUsWeblabText);s.init(w.$dom.spaui);u.init(w.$dom.spaui);v.init(w.$dom.spaui);F.init(w.$dom.spaui);J.init(w.$dom.spaui);Q.init(w.$dom.spaui);R.init();n.init(w.$dom.spaui,function(){});B.initialState()},hydrate:function(){w.$dom.doc=e.$(document);w.$dom.win=e.$(window);w.$dom.spaui=e.$("#spaui");w.$dom.home=w.$dom.spaui.find("#spaui-home");w.$dom.panel=w.$dom.spaui.find("#spaui-panel");w.$dom.pop=
w.$dom.spaui.find("#spaui-pop");w.$dom.back=w.$dom.spaui.find("#spaui-content-ui-back")},bind:function(){w.$dom.home.click(B.home);w.$dom.pop.click(B.pop);w.$dom.back.click(B.back);w.$dom.spaui.delegate(".spaui-go-home","click",B.home);D.subscribe(D.getName("goHome"),function(){B.home()})},preview:function(a){w.preview.show=a.show},initialState:function(){p.initialState();j.initialState();k.initialState();v.initialState();J.initialState();a.isOnUrl("/hz/productsearch")&&a.isParamPresent("productSearchTourOpen")&&
e.$("#tutorial-expander-id").trigger("click");var b=!1;g.isOnArticle()&&a.showBrowseAllHelpOnLoad()?(G=j.getPageType("browseAllHelp"),b=!0,I.displayBrowseAllHelpFromSession()):c.getTopicID()&&!a.isAnySummoningParamPresent()&&(G=j.getPageType("helpTopic"),b=!0,I.displayHelpTopicFromSession(c.getTopicID(),c.getTopicURL()));c.getPinned()?b?D.subscribe(D.getName("newPage"),B.onNewPage):k.summoner({session:!0}):k.isSummoned()||D.publish(D.getName("initializedWithoutSummon"));B.previewToDataStore();D.publish(D.getName("initialized"))},
onNewPage:function(a){a.type===G&&(G=null,D.unsubscribe(D.getName("newPage"),B.onNewPage),k.summoner({session:!0}))},previewToDataStore:function(){c.getPreview()&&w.preview.show&&B.enablePreview();c.getPreview()&&!w.preview.show&&c.setPreview(!1);!c.getPreview()&&w.preview.show&&B.previewUpdate()},previewUpdate:function(){e.$.get(w.preview.dismiss)},enablePreview:function(){e.$("#spaui").append(g.gebi("spaui-template-preview").innerHTML);c.getPinned()?B.previewMetric(b.getContext("session")):(H=e.$.proxy(B.previewMetric,
null,b.getContext("trigger")),D.subscribe(D.getName("summon"),H));w.$dom.spaui.delegate("#spaui-preview-jackpot","click",B.previewDismiss);w.$dom.spaui.delegate("#spaui-preview-modal","click",B.previewDismiss);w.$dom.spaui.delegate("#spaui-preview-map-feedback","click",B.previewFeedback);w.$dom.spaui.delegate("#spaui-preview-map-dismiss","click",B.previewGetAnswers)},previewMetric:function(a){H&&D.unsubscribe(D.getName("summon"),H);b.send({from:d.getFrom(),where:a,to:b.getPlace("previewCard")})},
previewFadeOut:function(a,c,f){a.preventDefault();a.stopPropagation();B.previewUpdate();b.send({from:d.getFrom(),where:c,to:d.getFrom()});e.$("#spaui-preview-modal").fadeOut(w.animation.duration.previewFadeOut,function(){f&&f()})},previewDismiss:function(a){B.previewFadeOut(a,b.getContext("previewAnywhere"))},previewFeedback:function(a){B.previewFadeOut(a,b.getContext("previewFeedback"),function(){i.launchFeedback()})},previewGetAnswers:function(a){B.previewFadeOut(a,b.getContext("previewGetAnswers"))},
back:function(a,b,c){a.preventDefault();i.setTyping(!1);j.hideUI();B.previousNodePrep();B.previousNodeReveal(!0,b,c)},previousNodePrep:function(){w.$dom.panel.prepend(w.template.prev);e.$("#spaui-prev").css("height",w.$dom.win.height()+"px")},previousNodeReveal:function(a,b,c){e.$("#spaui-prev").animate({right:"-="+w.animation.distance},w.animation.duration.backAnimate,function(){B.transitionToPreviousContent(a,b,c)})},transitionToPreviousContent:function(a,c,f){d.popPop();e.$("#spaui-content").remove();
w.$dom.panel.append(w.template.current);e.$("#spaui-content").bind("scroll",j.searchScroll);f&&d.prepForHome();g.gebi("spaui-content").innerHTML=d.popDom();if(c){e.$("#spaui-content").prepend(c);var i=setTimeout(function(){e.$("#spaui-content").find(".spaui-feedback-message-inner").fadeOut(function(){e.$("#spaui-content").find(".spaui-feedback-message-inner").remove()});clearTimeout(i);i=null},w.animation.duration.fbConfirm)}e.$("#spaui-content").fadeIn(w.animation.duration.contentFadeIn,function(){e.$("#spaui-prev").remove();
e.$("#spaui-content").removeClass("spaui-hide");e.$("#spaui-content").removeClass("spaui-new");l.blurSearch();e.$("#spaui-content").focus();e.$("#spaui-content").scrollTop(d.popScroll());j.showUI(d.getTo());b.send({from:d.getFrom(),to:d.getTo(),where:f?b.getContext("navHome"):b.getContext("navBack")});d.update({isBack:!0});var a=d.getSearchQueryHistory();l.setSearchBoxValue(a)})},home:function(a){a&&a.preventDefault();w.$dom.home.hasClass("spaui-home-off")||d.getFromLength()>1&&B.back({preventDefault:function(){}},
null,!0)},pop:function(a){a.preventDefault();c.setPinned(!1);b.send({from:d.getFrom(),to:b.getPlace("popPage"),where:b.getContext("header")});g.openInNewWindow(d.getPop())},overrideConfig:function(a){w=e.$.extend({},w,a)}};return{init:B.init,overrideConfig:B.overrideConfig}});ASPP.when("ASPA").register("spaui-browser-support",function(){return{placeholderIsSupported:function(){return"placeholder"in document.createElement("input")}}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-history","spaui-session",
"spaui-metrics","spaui-ui","spaui-hmd","spaui-theming","spaui-events","spaui-ajax").register("spaui-content",function(e,h,d,b,c,a,f,k,g,j,l){function i(){return e.$.extend({},C)}var o,r,s,m,q,x,u,n,A,v,z=null,t={animation:{visible:!1,active:!1,contentFadeInTime:300,distance:410,resizeDuration:250,resizePercentage:0.4,closeAffordance:{delay:1E3,fade:1250}},bind:!0,template:{next:'<div id="spaui-next"></div>',prev:'<div id="spaui-prev"></div>',current:'<div id="spaui-content" class="spaui-content spaui-new spaui-hide" tabindex="-1"></div>',
searchLoader:'<div id="scroll-loader" class="scroll-loader"><div class="spaui-content-loading"></div></div>'},url:null,sellerUniIds:null,javascriptWhitelistIds:null,lastSearchRequestId:0,specialTitleBarActiveClass:"spaui-special-title-bar-active",pageTypes:{alerts:"alerts",browseAllHelp:"browseAllHelp",getSupportCard:"getSupportCard",error:"error",feedback:"feedback",forums:"forums",helpTopic:"helpTopic",info:"info",loading:"loading",search:"search"},HELP_URL_PATH:"/gp/help/",TIME_BEFORE_REVERTING_BACK_MS:18E4},
C={backButton:!0,feedbackLink:!0,resetTopic:!0},D={alerts:i(),browseAllHelp:i(),error:i(),forums:i(),search:i(),loading:i(),getSupportCard:e.$.extend({},C,{backButton:!1}),feedback:e.$.extend({},C,{feedbackLink:!1}),helpTopic:e.$.extend({},C,{feedbackLink:!1,resetTopic:!1}),info:e.$.extend({},C,{backButton:!1})},p={init:function(a,b,c,d){p.hydrate(a);p.bind();t.url=b;t.sellerUniIds=c||[];t.javascriptWhitelistIds=d||[];h.log("content.init()")},hydrate:function(a){h.log("content.hydrate()");o=e.$(window);
r=a;s=a.find("#spaui-panel");m=a.find("#spaui-home");q=a.find(".spaui-head-controls-pop");a.find("#spaui-foot-browse");x=a.find("#spaui-content-ui");u=a.find("#spaui-content-ui-back");n=a.find("#spaui-content-ui-feedback-text");A=a.find(".spaui-footer-forum");v=a.find("#spaui-special-title-bar-container")},bind:function(){j.subscribe(j.getName("summon"),p.onAthenaSummoned);e.$(window).unload(p.onPageUnload)},initialState:function(){p.hideUI(!0);n.show();var a=p.getPageType("info");p.setPage(a);j.publish(j.getName("newPage"),
{type:a});a=c.getTimeSellerViewingArticle();a!==null&&(new Date).getTime()-a>t.TIME_BEFORE_REVERTING_BACK_MS&&(c.revertSellerToInfoCard(),c.setTimeSellerViewingArticle(null))},overrideConfig:function(a){e.$.extend(t,a)},prepNext:function(){var a=s.find("#spaui-next");if(!(a.length>0)){var c=e.$("#spaui-content");p.setPage(p.getPageType("loading"));b.pushScroll(c.scrollTop());s.append(t.template.next);a=s.find("#spaui-next");a.css("height",o.height()+"px");a.animate({right:"+="+t.animation.distance},
50,function(){c.scrollTop(0)})}},capturePayloadAndCallPlace:function(a,b,c){if(!e.$.isPlainObject(a))throw"First argument must be a plain object of the page details";return function(d){a.content=d.data;a.errorStatus=d.errorStatus;b(a,c)}},refreshContent:function(a,c){b.pushDom(d.gebi("spaui-content").innerHTML);e.$("#spaui-content").remove();s.append(t.template.current);c?e.$("#spaui-content").html(a):d.gebi("spaui-content").innerHTML=a},fadeContentIn:function(a,d,f){var i=e.$("#spaui-content"),g=
a.type;i.fadeIn(t.animation.contentFadeInTime,function(){e.$("#spaui-next").remove();i.removeClass("spaui-hide");i.removeClass("spaui-new");if(p.isErrorDom(a.content))c.revertSellerToInfoCard(),a.isPlatformError=!0,a.attemptedType=a.type,a.type=p.getPageType("platformError"),f.isPlatformError=!0;p.showUI(g,d,f);b.update({to:p.getMetricPlaceFromDetails(a)});i.focus()})},isErrorDom:function(a){return e.$(a).find("#spaui-error").length>0},displaySpecialTitleBar:function(a){v.append(a);r.addClass(t.specialTitleBarActiveClass)},
removeSpecialTitleBar:function(){v.empty();r.removeClass(t.specialTitleBarActiveClass)},getFailed:function(a,c){var f={errorDetails:d.getErrorDetailsFromAjaxResponse(a.content,a.errorStatus),isError:!0};b.pushPop("");p.refreshContent(d.gebi("spaui-template-error-client").innerHTML);a.attemptedType=a.type;a.type=p.getPageType("error");p.fadeContentIn(a,c,f)},getPageType:function(a){return t.pageTypes[a]},hideBackBar:function(){x.hide();s.addClass("spaui-hidden-backbar")},hideUI:function(a){q.removeClass("spaui-shown");
g.isFeedbackDisabledOnInfoCard()&&p.hideBackBar();p.removeSpecialTitleBar();A.removeClass("spaui-active");u.hide();n.hide();m.addClass("spaui-home-off");p.publishEventForLeavingPage(a)},showUI:function(a,b,d){x.show();s.removeClass("spaui-hidden-backbar");a!=="info"&&m.removeClass("spaui-home-off");var i=p.getPageConfig(a);if(i===null)if(d="Page not supported: "+a,b){b({isError:!0,error:d});return}else throw d;i.resetTopic&&c.setTopic(null);i.backButton?u.show():u.hide();i.feedbackLink?n.show():n.hide();
i.type==="info"&&g.isFeedbackDisabledOnInfoCard()&&p.hideBackBar();i.type==="helpTopic"&&(q.addClass("spaui-shown"),c.setTimeSellerViewingArticle((new Date).getTime()));a=p.getPageDetails(i);p.setPage(a.type);b(d);j.publish(j.getName("newPage"),a);(new Date).getTime();f.contentChanged()},externalShowUI:function(a,b){b===void 0&&(b=function(){});p.showUI(p.mapMetricsPlaceToPage(a),b)},prepEndpoint:function(a,b,c){p.hideUI();p.prepNext();b={type:b};l.get(a,{},p.capturePayloadAndCallPlace(b,p.placePage,
c),p.capturePayloadAndCallPlace(b,p.getFailed,c))},prepTemplate:function(a,b){p.hideUI();p.prepNext();var c=d.gebi("spaui-template-"+a);c===null?b({isError:!0,error:"Template '"+a+"' does not exist"}):p.placePage({type:a,content:c.innerHTML},b)},placePage:function(a,b){p.refreshContent(a.content);p.fadeContentIn(a,b,{})},prepHelpTopic:function(a,f,i){d.isNull(f)&&(f="/gp/help/"+a);d.isSellerULink(a)?(d.openInNewWindow(f),c.setPinned(!1)):(p.hideUI(),p.prepNext(),b.pushPop(f),f={type:p.getPageType("helpTopic"),
topicId:a,url:f},l.get("/hz/sellerpartner/help-content/"+a+"/",{},p.capturePayloadAndCallPlace(f,p.placeHelpTopic,i),p.capturePayloadAndCallPlace(f,p.getFailed,i)))},placeHelpTopic:function(a,b){c.setTopicID(a.topicId);c.setTopicURL(a.url);var d=p.isSellerUVideo(a.topicId),i=p.isJavascriptOverride(a.topicId);p.refreshContent(a.content,d||i);d&&f.makeLarge();k.enable(a.topicId);p.fadeContentIn(a,b,{})},isSellerUVideo:function(a){return p.isMemberOf(a,t.sellerUniIds)},isJavascriptOverride:function(a){return p.isMemberOf(a,
t.javascriptWhitelistIds)},isMemberOf:function(a,b){var c=parseInt(a,10);return b.indexOf(c)!==-1},isSearchRedirectDom:function(a){return e.$(a).find("#spaui-redirect").length>0},formEncode:function(a){return encodeURIComponent(a).replace(/%20/g,"+")},prepSearch:function(a,c,d){p.hideUI();p.prepNext();c={type:p.getPageType("search"),requestId:++t.lastSearchRequestId,query:a,filter:c,queryString:b.getSearchQuery()};a=p.formEncode(b.getSearchQuery());l.post("/hz/sellerpartner/athena-search",{data:"query="+
a+"&size="+b.getSearchSize()+"&content="+b.getSearchFilter()},p.capturePayloadAndCallPlace(c,p.placeSearch,d),p.capturePayloadAndCallPlace(c,p.getFailed,d))},placeSearch:function(a,d){if(a.requestId===t.lastSearchRequestId){var f={searchType:"search"},i=e.$(a.content);if(p.isSearchRedirectDom(a.content)){var i=i.find("#spaui-redirect"),g=i.data("url");if(g.match(/\/hz\/inventory/))f.searchType="inventory";else if(g.match(/\/gp\/orders/))f.searchType="order";f.searchType+="-redirect";f.isRedirect=
!0;f.redirectType=i.data("type").split("_").join("-");f.callback=function(){window.location.href=g};c.setPinned(!1);d(f)}else b.setSearchTotal(i.find("#spaui-search-total").data("total")),p.refreshContent(a.content,!0),p.testForOnlyForumResults(i),p.fadeContentIn(a,d,f)}},testForOnlyForumResults:function(c){var c=c.find(".spaui-search-result-help").length,f=r.find(".spaui-search-results").hasClass("showForums");if(c===0&&!f){c=e.$("#spaui-toggle-forums");f="";c.addClass("asp-button-selected");f=c.find("input").data("exclude-label");
r.find(".spaui-search-results").addClass("showForums");var i=d.gebi("spaui-template-only-forum-results").innerHTML;r.find(".spaui-search-results").before(i);c.find("input").val(f);c.find(".asp-button-text").html(f);b.setSearchShowForums(!0);a.send({from:b.getFrom(),to:a.getPlace("setForumsVisible"),where:a.getContext("noHelpResults")})}},placeNextSearchPage:function(a){if(!b.getSearchRequest()&&d.gebi("spaui-results")){var c=e.$("#spaui-content").scrollTop(),f=e.$("#spaui-content").innerHeight(),
i=e.$("#spaui-content").prop("scrollHeight");c+f>=i-b.getSearchScrollBuffer()&&(b.setSearchStart(b.getSearchStart()+b.getSearchSize()),b.setSearchStartHistory(b.getSearchStart()),b.setSearchQuery(b.getSearchQueryHistory()),b.setSearchTotal(b.getSearchTotalHistory()),b.getSearchStart()+b.getSearchSize()>b.getSearchTotal()||(e.$("#spaui-content").append(t.template.searchLoader),b.setSearchRequest(!0),l.post("/hz/sellerpartner/athena-search",{data:"query="+b.getSearchQuery()+"&start="+b.getSearchStart()+
"&size="+b.getSearchSize()},function(c){e.$("#scroll-loader").remove();d.gebi("spaui-content").innerHTML+=c.data;b.setSearchRequest(!1);j.publish(j.getName("newContentOnPage"));a(!0)},function(b){a(!1,d.getErrorDetailsFromAjaxResponse(b.data,b.errorResponse))})))}},prepFeaturedAndPredictive:function(a){var b=e.$("#spaui-featured-content-results"),c=e.$("#spaui-predictive-help"),f=b.height()+c.height(),b=b.add(c),i=!1,g=null,j=null;e.$("#spaui-content").append('<div id="spaui-featured-content-predictive-help-loading" class="spaui-featured-content-predictive-help-loading spaui-new" style="top:-'+
f+"px;height:"+f+'px;"></div>');f=e.$("#spaui-featured-content-predictive-help-loading");b.css("display","none");f.css("top","0px");b.remove();var h=function(){i?p.placeFeaturedAndPredictive(j+g,a):i=!0},f=function(b){b=d.getErrorDetailsFromAjaxResponse(b.data,b.errorResponse);a(!1,b)},b=window.location.pathname,c=window.location.hash,A=e.$("title").text(),b="?pageUrl="+b+"&pageHash="+encodeURIComponent(c)+"&pageTitle="+A;l.get("/hz/sellerpartner/featured-content"+b,{},function(a){j=a.data;h()},f);
l.get("/hz/sellerpartner/predictive-help"+b,{},function(a){g=a.data;h()},f)},placeFeaturedAndPredictive:function(a,b){e.$("#spaui-content").append(a);var c=e.$("#spaui-featured-content-predictive-help-loading");e.$("#spaui-featured-content-results");var d=e.$("#spaui-predictive-help"),f=c.height();d.css("position","relative");d.css("top","-"+f+"px");c.css("display","none");d.css("top","0px");c.remove();e.$("#spaui-content").focus();b(!0)},placeContentAfterHelpArticle:function(a){r.find(".spaui-help").after(a)},
onAthenaSummoned:function(){(new Date).getTime()},onPageUnload:function(){p.publishEventForLeavingPage()},publishEventForLeavingPage:function(a){a||(a=p.mapMetricsPlaceToPage(b.getFrom()),a=p.getPageDetails(p.getPageConfig(a)),j.publish("leavingPage",a))},setPage:function(a){z=a},getPage:function(){return z},getPageDetails:function(a){var b={type:a.type};if(a.type==="helpTopic")b.topicId=c.getTopicID();return b},getPageConfig:function(a){if(D.hasOwnProperty(a)){var b=D[a];b.type=a;return b}else return null},
mapMetricsPlaceToPage:function(b){var c={};c[a.getPlace("alerts")]=p.getPageType("alerts");c[a.getPlace("browse")]=p.getPageType("browseAllHelp");c[a.getPlace("getSupportCard")]=p.getPageType("getSupportCard");c[a.getPlace("feedback")]=p.getPageType("feedback");c[a.getPlace("info")]=p.getPageType("info");c[a.getPlace("search")]=p.getPageType("search");c[a.getPlace("forums")]=p.getPageType("forums");var d=null;c.hasOwnProperty(b)?d=c[b]:(b.substr(0,5)===a.getTopic()&&(d=p.getPageType("helpTopic")),
b.substr(0,6)==="error-"&&(d=p.getPageType("error")));return d},getMetricPlaceFromDetails:function(b){var c={};c[p.getPageType("alerts")]=a.getPlace("alerts");c[p.getPageType("browseAllHelp")]=a.getPlace("browse");c[p.getPageType("getSupportCard")]=a.getPlace("getSupportCard");c[p.getPageType("feedback")]=a.getPlace("feedback");c[p.getPageType("forums")]=a.getPlace("forums");c[p.getPageType("info")]=a.getPlace("info");c[p.getPageType("search")]=a.getPlace("search");var d=null;if(c.hasOwnProperty(b.type))d=
c[b.type];else if(b.type===p.getPageType("helpTopic"))d=a.getTopic()+b.topicId;else if(b.attemptedType)c=e.$.extend({},b,{type:b.attemptedType}),b.type===p.getPageType("error")&&(d="error-"+p.getMetricPlaceFromDetails(c)),b.type===p.getPageType("platformError")&&(d="error-platform-"+p.getMetricPlaceFromDetails(c));else throw"No attempted page type";return d}};return{displaySpecialTitleBar:p.displaySpecialTitleBar,getPageType:p.getPageType,getPage:p.getPage,placeContentAfterHelpArticle:p.placeContentAfterHelpArticle,
placeEndpoint:p.prepEndpoint,placeTemplate:p.prepTemplate,placeHelpTopic:p.prepHelpTopic,placeSearch:p.prepSearch,placeNextSearchPage:p.placeNextSearchPage,placeFeaturedAndPredictive:p.prepFeaturedAndPredictive,showUI:p.externalShowUI,hideUI:p.hideUI,overrideConfig:p.overrideConfig,initialState:p.initialState,init:p.init}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-content","spaui-util","spaui-events","spaui-shim","spaui-session","spaui-help","spaui-overlay","spaui-state","spaui-ui").register("spaui-contact-deflection",
function(e,h,d,b,c,a,f,k,g,j,l,i){var o=b.getPageType("getSupportCard"),r=null,s=!1,m=null,q=[b.getPageType("getSupportCard"),b.getPageType("helpTopic")],x=/contact-us/,u=null,n,A,v={init:function(a){r=k.getDeflectionCardVisitId();v.hydrate(a);v.bind()},hydrate:function(a){u=a;n=e.$("#spaui-templates #spaui-template-getSupportCard");A=a.find("#spaui-foot-contact")},bind:function(){v.isActive()&&(v.rebindContactUs(),v.delegateBind(),a.subscribe(a.getName("newPage"),v.handleNewPage),a.subscribe(a.getName("summon"),
v.handleSummon),a.subscribe(a.getName("dismissed"),v.handleDismiss))},className:function(a){return".spaui-get-support-card-"+a},rebindContactUs:function(){var a=n.find(v.className("header-title")).text(),b=A.find(".spaui-footer-icon");A.text(a);A.append(b);A.removeAttr("href");A.attr("title",a.trim())},delegateBind:function(){u.delegate(".spaui-open "+v.className("item-header"),"click",v.handleClose);u.delegate(".spaui-closed "+v.className("item-header"),"click",v.handleOpen);u.delegate(v.className("item")+
" a","click",v.handleLinkClick)},handleClose:function(a){v.transition(a,"spaui-open","spaui-closed","setItemCollapsed")},handleOpen:function(a){v.transition(a,"spaui-closed","spaui-open","setItemExpanded")},transition:function(a,b,c,f){a.preventDefault();a=e.$(a.currentTarget);a=v.nearestItem(a);a.removeClass(b);a.addClass(c);b=a.attr("id");f={from:d.getFrom(),where:h.getContext("getSupportCardItem"),to:f,additionalObj:{itemId:b}};v.appendVisitAndSendMetrics(f)},handleNewPage:function(a){m=a.type;
a.type===o?u.addClass("spaui-footer-hidden"):u.removeClass("spaui-footer-hidden");v.determineVisitId(a.type)},handleSummon:function(){s=!0;m&&v.determineVisitId(m)},handleDismiss:function(){s=!1;v.clearVisitId()},determineVisitId:function(a){s&&(q.includes(a)||v.clearVisitId())},handleLinkClick:function(a){var b=a.currentTarget.href,f=c.getTopicIDFromLink(b),A=c.contains(b,x),q={from:d.getFrom(),where:h.getContext("content")},m={groupId:v.getGroupId(e.$(a.currentTarget))};j.removeOverlay();k.setContactUsLinkClicked(!0);
f!==void 0?(a.preventDefault(),m=e.$.extend(m,{articleId:f}),q.additionalObj=m,v.appendVisitId(q),g.displayHelpTopic(f,b,q),c.executeIf(c.isSellerULink,function(a){h.send(e.$.extend(q,{to:h.getTopic()+a}))})(f)):(k.setPinned(!1),f="launch-unknownPage",A&&(f="launch-contactUs",l.isOnUrl(x)&&v.isNotDeepLink(b)&&(a.preventDefault(),k.getSize()&&i.makeSmall(),i.banisher({where:h.getContext("getSupportCardItem")}))),v.fillLinkMetricsObject(q,f,b,m),v.appendVisitAndSendMetrics(q))},isNotDeepLink:function(a){return c.getPathArguments(a).categoryId===
void 0},fillLinkMetricsObject:function(a,b,c,d){d=e.$.extend(d,{url:c});a.additionalObj=d;a.to=b},getGroupId:function(a){return v.nearestItem(a).attr("id")},nearestItem:function(a){return a.closest(v.className("item"))},isActive:function(){return n.length>0},displayDeflectionCard:function(a,c){var f={from:d.getFrom(),where:a,to:h.getPlace("getSupportCard")};if(c!==void 0)f.additionalObj={summoned:c};b.placeTemplate(o,function(){v.appendVisitAndSendMetrics(f);c&&!k.getPinned()&&i.summoner({external:!1})})},
appendVisitAndSendMetrics:function(a){v.appendVisitId(a);h.send(a)},appendVisitId:function(a){var b=e.$.extend(a.additionalObj,v.getVisitIdObj());a.additionalObj=b},getVisitIdObj:function(){r===null&&v.generateNewVisitId();return{visitId:r}},clearVisitId:function(){r=null;k.setDeflectionCardVisitId(null);k.setContactUsLinkClicked(!1)},generateNewVisitId:function(){var a=c.getUid();r=a;k.setDeflectionCardVisitId(a)},initialState:function(){v.isActive()&&v.shouldAutoSummon()&&(k.setTopicID(void 0),
v.displayDeflectionCard("contactUsAutoSummon",!0),j.createFullscreenOverlay())},shouldAutoSummon:function(){var a=n.data("weblab-auto-summon")===!0,b=l.isOnUrl(x),c=l.isParamPresent("categoryId"),d=k.getContactUsLinkClicked();b||k.setContactUsLinkClicked(!1);return a&&b&&!c&&!d}};return{init:v.init,isActive:v.isActive,displayDeflectionCard:v.displayDeflectionCard,initialState:v.initialState}});ASPP.when("ASPA").register("spaui-debug",function(){var e={dir:function(h){window.location.search.indexOf("spauiDebug")!==
-1&&(console.dir?console.dir(h):(e.log("}} SPAUI {{ -- DIR -- "),e.log(h)))},error:function(h){window.location.search.indexOf("spauiDebug")!==-1&&(console.error?console.error(h):e.log("}} SPAUI {{ -- ERROR -- "+h))},info:function(h){window.location.search.indexOf("spauiDebug")!==-1&&(console.info?console.info(h):e.log("}} SPAUI {{ -- INFO -- "+h))},warn:function(h){window.location.search.indexOf("spauiDebug")!==-1&&(console.warn?console.warn(h):e.log("}} SPAUI {{ -- WARN -- "+h))},group:function(e){window.location.search.indexOf("spauiDebug")!==
-1&&(console.group?window.location.search.indexOf("spauiDebug")!==-1?console.group(e):console.groupCollapsed(e):console.log("}} SPAUI {{ ----- "+e))},groupEnd:function(){window.location.search.indexOf("spauiDebug")!==-1&&(console.groupEnd?console.groupEnd():e.log("}} SPAUI {{ -- ENDGROUP -- "))},log:function(e){window.location.search.indexOf("spauiDebug")!==-1&&console.log&&console.log(e)}};return{log:e.log,group:e.group,groupEnd:e.groupEnd,error:e.error,info:e.info,warn:e.warn,dir:e.dir}});ASPP.when("ASPA",
"spaui-shim","spaui-events","spaui-metrics","spaui-history","spaui-expand").register("spaui-direct-answer",function(e,h,d,b,c,a){var f,k=[],g={init:function(a){f=a;g.bindEvents()},bindEvents:function(){d.subscribe(d.getName("newPage"),g.scanForDirectAnswer);f.delegate("#spaui-search-results .spaui-direct-answer","click",g.interactWithDirectAnswer);f.delegate("#spaui-search-results .spaui-direct-answer "+a.selectors.collapsedElementHeader,"click",g.expand);f.delegate("#spaui-search-results .spaui-direct-answer "+
a.selectors.expandedElementHeader,"click",g.collapse)},scanForDirectAnswer:function(){f.find("#spaui-search-results .spaui-direct-answer").each(function(){var a=e.$(this);g.discoverDirectAnswer(a);g.transformDirectAnswer(a);g.transformCollapsing(a)})},interactWithDirectAnswer:function(a){var b=f.find("#spaui-search-results .spaui-direct-answer").data("direct-answer-id"),a=e.$(a.target);k.includes(b)||g.adoptDirectAnswer(b,a);g.instrument(b,"interacted",a)},discoverDirectAnswer:function(a){var b=a.data("direct-answer-id");
g.instrument(b,"discovered",a);g.clearAdoptions();g.shouldAdoptImmediately(a)&&g.adoptDirectAnswer(b,a)},shouldAdoptImmediately:function(a){return a.hasClass("direct-answer-glance")},transformDirectAnswer:function(a){g.isDirectAnswerTool(a)&&g.isSearchToolsPresent()&&g.removeToolHeader()},isDirectAnswerTool:function(a){return a.find(".spaui-direct-answer-tools").size()>0},isSearchToolsPresent:function(){return f.find("#spaui-tools-results").size()>0},removeToolHeader:function(){f.find("#spaui-tools-results h2").remove()},
clearAdoptions:function(){k=[]},adoptDirectAnswer:function(a,b){k.push(a);g.instrument(a,"adopted",b)},instrument:function(a,d,f){a=g.getAdditionalInfo(a,d,f);d={from:c.getFrom(),where:"direct-answer",to:d,additionalObj:a};b.send(d)},getAdditionalInfo:function(a,b,d){a={id:a,query:c.getSearchQuery()};if(b!=="discovered")a.action=d.data("direct-answer-action")||"unspecified";return a},expand:function(b){a.expand(b,g.instrumentExpandCollapse)},collapse:function(b){a.collapse(b,g.instrumentExpandCollapse)},
instrumentExpandCollapse:function(a){a={from:c.getFrom(),where:"direct-answer",to:a};b.send(a)},transformCollapsing:function(b){b.find(".spaui-direct-answer-help-collapse").each(function(){a.transformCollapse(e.$(this))})}};return{init:g.init,isDirectAnswerTool:g.isDirectAnswerTool}});ASPP.when("ASPA","spaui-events","spaui-util","spaui-async").register("spaui-discovery",function(e,h,d,b){var c={},a={},f={},k=!1,g={init:function(){h.subscribe(h.getName("newPage"),g.pageStateChanged);h.subscribe(h.getName("summon"),
g.summonAthena);h.subscribe(h.getName("dismissed"),g.dismissAthena);h.subscribe(h.getName("leavingPage"),g.leftPage)},register:function(a,d,f,e){c[a]={module:a,page:d,multiplicity:f,discovered:!1,callback:e};h.subscribeAsyncModuleEvent(a,b.COMPLETED_EVENT,function(){g.asyncModuleLoaded(a)})},registerWithoutAsync:function(a,b,d,g){c[a]={module:a,page:b,multiplicity:d,discovered:!1,callback:g};f[a]=!0},asyncModuleLoaded:function(a){f[a]=!0;g.discover()},pageStateChanged:function(b){g.setAllPageStatus(!1);
a[b.type]=!0;g.discover()},leftPage:function(){g.setAllPageStatus(!1)},setAllPageStatus:function(b){Object.keys(a).forEach(function(c){a[c]=b})},summonAthena:function(){k=!0;g.discover()},dismissAthena:function(){k=!1},discover:function(){d.forEachObjectValue(c,g.discoverSingleModule)},discoverSingleModule:function(b){if(k&&a[b.page]&&f[b.module]&&(!b.discovered||b.multiplicity))b.callback(),b.discovered=!0}};return{init:g.init,register:g.register,registerWithoutAsync:g.registerWithoutAsync}});ASPP.when("ASPA",
"spaui-metrics","spaui-history","spaui-events","spaui-util","spaui-theming","spaui-ajax","spaui-content","spaui-session","spaui-debug","spaui-async","spaui-alert-util").register("spaui-eci-widget",function(e,h,d,b,c,a,f,k,g,j,l,i){var o,r={fadeDuration:400,TIME_AFTER_SUBIMT_TO_HIDE:3E3,VALIDATION_ERROR:"validation_error",SUBMIT_TYPE:"SUBMIT"},s={init:function(a){s.hydrate(a);s.bind(a)},hydrate:function(){o=e.$("#spaui, #sc-quicklinks-top");r.parentRequestId=h.getParentRequestId()},bind:function(){s.contentDelegate(".spaui-eci-verify-yes",
"click",s.getDetailsAndCall(function(a,b){s.submitPhone(a,b,!0)}));s.contentDelegate(".spaui-eci-verify-no","click",s.getDetailsAndCall(s.verifyToChoosePhone));s.contentDelegate(".spaui-eci-submit","click",s.getDetailsAndCall(function(a,b){s.submitPhone(a,b,!1)}));s.contentDelegate(".spaui-eci-remind-me-later","click",s.getDetailsAndCall(s.remindMeLaterClicked,!0))},contentDelegate:function(a,b,c){o.delegate(".spaui-eci-content "+a,b,c)},getDetailsAndCall:function(a,b){return function(c){b&&c.preventDefault();
var d=i.getAlertFromInnerEvent(c),d=i.getAlertDetails(d);a(d.id,s.getEciDom(c.target))}},getEciDom:function(a){return e.$(a).closest(".spaui-eci-content")},registerHandles:function(a){a.simpleRegister(s.isEciAlert,h.getContext("eciNotification"),h.getContext("eciNotification"),{hasMinimizeButton:!0})},isEciAlert:function(a){return a.find(".spaui-eci-content").length>0},submitPhone:function(a,b,d){var i=b.find(".spaui-eci-choose-phone").data("path").replace(/\{feedbackType\}/,r.SUBMIT_TYPE),g=s.collectParams(a,
b,d),i=i+"?"+c.formatObjectAsUrlParams(g);s.instrumentWithVerify(a,"submitted",d);s.submitToLoading(a,b);f.get(i,{},e.$.proxy(s.submitPhoneSuccess,null,a,b,d),e.$.proxy(s.submitPhoneFailed,null,a,b,d))},remindMeLaterClicked:function(a,b){var c=b.find(".spaui-eci-verify").is(":visible"),d=s.collectParams(a,b,c);f.get("/hz/sellerpartner/alert/LATER?ids="+d.ids+"&prid="+r.parentRequestId,{},function(){s.instrumentWithVerify(a,"remindMeLaterClicked",c)});s.hide(a)},collectParams:function(a,b,c){a={ids:a,
prid:r.parentRequestId,sellerVerifysNumber:c};c?(a.country_prefix="",a.phone=b.find(".spaui-eci-verify-phone").val()):(b=b.find(".spaui-eci-choose-phone"),a.country_prefix=b.find(".spaui-eci-country-prefix").val(),a.phone=b.find(".spaui-eci-phone").val());return a},submitPhoneSuccess:function(a,b,c,d){d.data===r.VALIDATION_ERROR?(s.instrumentWithVerify(a,"validationError",c),s.loadingToValidationFailure(a,b,c)):(s.instrumentWithVerify(a,"submitSuccess",c),s.loadingToSuccess(a,b))},submitPhoneFailed:function(a,
b,c){s.instrumentWithVerify(a,"submitFailed",c);s.loadingToFailure(a,b,c)},verifyToChoosePhone:function(a,b){s.instrument(a,"verifyDenied");b.find(".spaui-eci-verify").fadeOut({duration:r.fadeDuration,complete:function(){b.find(".spaui-eci-choose-phone").show()}})},submitToLoading:function(a,b){b.find(".spaui-eci-choose-phone").hide();b.find(".spaui-eci-verify").hide();b.find(".spaui-eci-validation-failure").hide();b.find(".spaui-eci-submit-failure").hide();b.find(".spaui-eci-form-loading").show()},
loadingToSuccess:function(a,b){b.find(".spaui-eci-form-loading").hide();b.find(".spaui-eci-remind-me-later").hide();b.find(".spaui-eci-submit-success").show();setTimeout(function(){s.hide(a)},r.TIME_AFTER_SUBIMT_TO_HIDE)},hide:function(a){i.hideSingleAlert(a)},showVerifyOrChoose:function(a,b){var c={duration:r.fadeDuration};b?a.find(".spaui-eci-verify").fadeIn(c):a.find(".spaui-eci-choose-phone").fadeIn(c)},loadingToValidationFailure:function(a,b,c){b.find(".spaui-eci-form-loading").hide();b.find(".spaui-eci-validation-failure").show();
s.showVerifyOrChoose(b,c)},loadingToFailure:function(a,b,c){b.find(".spaui-eci-form-loading").hide();b.find(".spaui-eci-submit-failure").show();s.showVerifyOrChoose(b,c)},instrumentWithVerify:function(a,b,c){s.instrument(a,b,{verifying:c})},instrument:function(a,b,c){h.send({from:d.getFrom(),where:h.getContext("eciNotification"),to:b,additionalObj:e.$.extend(c,{eciId:a})})},mockConfig:function(a){e.$.extend(r,a)}};return{init:s.init,mockConfig:s.mockConfig,registerHandles:s.registerHandles}});ASPP.when("ASPA").register("spaui-events",
function(e){var h={initialized:"initialized",initializedWithoutSummon:"initializedWithoutSummon",triggerSummon:"triggerSummon",summon:"summon",dismissed:"dismissed",newPage:"newPage",newContentOnPage:"newContentOnPage",leavingPage:"leavingPage",pushNotificationOpened:"pushNotificationOpened",pushNotificationClosed:"pushNotificationClosed",pushNotificationMinimize:"pushNotificationMinimize",alertsLoaded:"alertsLoaded",goHome:"goHome",featuresChanged:"featuresChanged"},d={init:function(){},getName:function(b){if(h[b])return h[b];
else throw"Name '"+b+"' not supported in EVENTS module";},resolveAuiName:function(b){return"spaui:"+b},subscribe:function(b,c){e.on(d.resolveAuiName(b),c)},unsubscribe:function(b,c){e.off(d.resolveAuiName(b),c)},publish:function(b,c){e.trigger(d.resolveAuiName(b),c)},subscribeAsyncModuleEvent:function(b,c,a){d.subscribe("async"+c+":"+b,a)},publishAsyncModuleEvent:function(b,c,a){d.publish("async"+c+":"+b,a)}};return{init:d.init,getName:d.getName,subscribe:d.subscribe,unsubscribe:d.unsubscribe,publish:d.publish,
subscribeAsyncModuleEvent:d.subscribeAsyncModuleEvent,publishAsyncModuleEvent:d.publishAsyncModuleEvent}});ASPP.when("ASPA").register("spaui-expand",function(e){var h={collapsed:"spaui-collapsed",expanded:"spaui-expanded",duration:400},d={collapsedElementHeader:".spaui-collapsing."+h.collapsed+" .spaui-collapsingHeader",expandedElementHeader:".spaui-collapsing."+h.expanded+" .spaui-collapsingHeader",template:"#spaui-template-collapsing",collapsingContent:".spaui-collapsingContent",anyHeader:":header",
elementHeader:".spaui-collapsingHeader"},b,c={init:function(){b=e.$(d.template)},expand:function(a,b){var d=c.getCollapsingContentObjectFromClick(a);d.body.slideDown(h.duration,function(){c.changeClass(h.collapsed,h.expanded,d.parent,b)})},collapse:function(a,b){var d=c.getCollapsingContentObjectFromClick(a);d.body.slideUp(h.duration,function(){c.changeClass(h.expanded,h.collapsed,d.parent,b)})},getCollapsingContentObjectFromClick:function(a){a.preventDefault();var a=e.$(a.currentTarget).parent(),
b=a.find(d.collapsingContent);return{parent:a,body:b}},changeClass:function(a,b,c,d){c.removeClass(a);c.addClass(b);d(b.replace("spaui-",""))},transformCollapse:function(a){var f=c.findHeader(a);if(!(f.size()<=0)){f.detach();var e=b.clone();e.removeAttr("id");e.find(d.elementHeader).prepend(f);e.addClass(h.collapsed);a=a.replaceWith(e);e.find(d.collapsingContent).append(a)}},findHeader:function(a){return a.children(d.anyHeader).first()},overrideConfig:function(a){e.$.extend(h,a)}};return{init:c.init,
expand:c.expand,collapse:c.collapse,transformCollapse:c.transformCollapse,overrideConfig:c.overrideConfig,selectors:d}});ASPP.when("ASPA","spaui-metrics","spaui-history").register("spaui-external-metrics",function(e,h,d){var b,c;c=function(a,c){if(a)return e.$.proxy(b,null,a,c);else throw"Register must be given a string to identify your widget or team using our API.";};b=function(a,b,c,g){b={from:b?"cid-"+b:d.getFrom(),where:a,to:c};if(g)b.additionalObj=g;try{h.validate(b),h.send(b)}catch(e){throw"Error sending metric for '"+
a+"': "+e;}};return{register:c}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-events","spaui-discovery","spaui-async","ready").register("spaui-featured-content",function(e,h,d,b,c,a){var f,k,g={init:function(d){f=d;c.register("featured-content","info",!1,g.instrumentDiscover);b.subscribeAsyncModuleEvent("featured-content",a.COMPLETED_EVENT,g.onload)},onload:function(){g.hydrate()},hydrate:function(){k=f.find("#spaui-featured-content-results .spaui-search-results")},getTopicIds:function(){var a=
[];k.find("li.spaui-search-result a.spaui-search-result-hot").each(function(){var b=e.$(this);a.push(b.data("id"))});return a},instrumentDiscover:function(){var a=g.getTopicIds();h.send({from:d.getFrom(),where:h.getContext("featured"),to:"discovered",additionalObj:{featuredTopicIds:a.join(",")}})}};return{getTopicIds:g.getTopicIds,init:g.init}});ASPP.when("ASPA","spaui-weblabs","spaui-theming","spaui-events").register("spaui-features",function(e,h,d,b){var c=!1,a={initialState:function(){a.update()},
isContactUsEnabled:function(){var a=h.getTreatment(h.NEW_SELLER),a=a==="T2"||a==="T3",b=d.getTheme()===d.THEMES.NEW_SELLER_THEME;return!(a&&b&&!c)},setIsInterceptCardComplete:function(b){c=b;a.update()},update:function(){b.publish(b.getName("featuresChanged"))}};return{initialState:a.initialState,isContactUsEnabled:a.isContactUsEnabled,setIsInterceptCardComplete:a.setIsInterceptCardComplete,isBackBarShownOnInfoCard:a.isBackBarShownOnInfoCard}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-history",
"spaui-metrics","spaui-content").register("spaui-feedback",function(e,h,d,b,c,a){var f,k,g={active:null,max:1E3,typing:!1,warn:!1},j={init:function(a){j.hydrate(a);j.bind()},hydrate:function(a){f=a;k=f.find("#spaui-content-ui-back")},bind:function(){f.delegate(".spaui-feedback-link","click",j.giveFeedback);f.delegate("#spaui-feedback-rate-stars","hover",j.starsHover);f.delegate(".spaui-feedback-rate-star","hover",j.starHover);f.delegate(".spaui-feedback-rate-star","click",j.starClick);f.delegate("#spaui-feedback-rate-clear",
"click",j.starClear);f.delegate("#spaui-feedback-comments-textarea","focus",j.fbTextFocus);f.delegate("#spaui-feedback-comments-textarea","keyup",j.fbTextType);f.delegate("#spaui-feedback-comments-cancel","click",j.commentsClear);f.delegate("#spaui-feedback-comments-send","click",j.commentsSend)},giveFeedback:function(a){a.preventDefault();j.launchFeedback()},launchFeedback:function(){a.placeTemplate("feedback",function(){c.send({from:b.getFrom(),where:c.getContext("navFeedback"),to:c.getPlace("feedback")})})},
starsHover:function(a){a.type==="mouseenter"&&(f.find(".spaui-feedback-rate-star").removeClass("on"),f.find("#spaui-feedback-rate-confirm").hide());if(a.type==="mouseleave"){f.find(".spaui-feedback-rate-star").removeClass("over");f.find(".spaui-feedback-rate-text").hide();g.active&&f.find("#spaui-feedback-rate-confirm").show();for(a=1;a<g.active+1;a++)f.find("#spaui-feedback-rate-star"+a).addClass("on")}},starHover:function(a){if(a.type==="mouseenter"){var b=parseInt(a.currentTarget.id.substr(24),
10);f.find("#spaui-feedback-rate-confirm").hide();f.find(".spaui-feedback-rate-text").hide();f.find("#spaui-feedback-rate-text"+b).show();var c;for(c=1;c<b+1;c++)f.find("#spaui-feedback-rate-star"+c).addClass("over")}a.type==="mouseleave"&&(e.$(a.currentTarget).removeClass("over"),e.$(a.currentTarget).removeClass("on"))},starClick:function(a){g.active=parseInt(a.currentTarget.id.substr(24),10);f.find(".spaui-feedback-rate-star").removeClass("on");f.find(".spaui-feedback-rate-star").removeClass("over");
f.find(".spaui-feedback-rate-text").hide();for(a=1;a<g.active+1;a++)f.find("#spaui-feedback-rate-star"+a).addClass("on");f.find("#spaui-feedback-rate-confirm").show();f.find("#spaui-feedback-rate-comments").show();c.send({from:b.getFrom(),where:c.getContext("rating"),to:c.getPlace("setFbRate"),payloadObj:{feedbackStarRating:g.active}})},starClear:function(a){a.preventDefault();f.find("#spaui-feedback-rate-confirm").hide();f.find("#spaui-feedback-rate-comments").hide();g.active=null;f.find(".spaui-feedback-rate-star").removeClass("on");
f.find("#spaui-feedback-context").show();c.send({from:b.getFrom(),where:c.getContext("rating"),to:c.getPlace("setFbClear")})},fbTextFocus:function(){var a=f.find("#spaui-feedback-comments-textarea");a.addClass("active");d.textareaFocusPlaceholderFix(a)},fbTextType:function(a){var b=f.find("#spaui-feedback-comments-counter"),c=a.currentTarget.value;if(!g.typing)b.show(),f.find("#spaui-feedback-comments-buttons").show(),f.find("#spaui-feedback-context").hide(),g.typing=!0;a=g.max-c.length;a<=1&&(c.substr(0,
g.max),a=0);c=b.hasClass("asp-color-price");a<21&&!c?b.addClass("asp-color-price"):a>=21&&c&&b.removeClass("asp-color-price");b.text(a)},commentsSend:function(a){a.preventDefault();a=f.find("#spaui-feedback-comments-textarea").val();if(a!=="")g.typing=!1,k.trigger("click",d.gebi("spaui-feedback-message").innerHTML),c.send({from:b.getFrom(),to:c.getPlace("setFbSend"),where:c.getContext("rating"),payloadObj:{feedbackText:a}})},commentsClear:function(a){a.preventDefault();g.typing=!1;f.find("#spaui-feedback-comments-textarea").val("");
f.find("#spaui-feedback-comments-textarea").removeClass("active");f.find("#spaui-feedback-comments-counter").hide();f.find("#spaui-feedback-comments-counter").text(g.max);f.find("#spaui-feedback-comments-buttons").hide();f.find("#spaui-feedback-context").show()},setTyping:function(a){g.typing=a},overrideConfig:function(a){g=e.$.extend({},g,a)}};return{init:j.init,overrideConfig:j.overrideConfig,setTyping:j.setTyping,launchFeedback:j.launchFeedback}});ASPP.when("ASPA","spaui-util","spaui-metrics",
"spaui-content","spaui-history","spaui-events","spaui-state").register("spaui-forums",function(e,h,d,b,c,a,f){var k,g,j,l={init:function(a){l.hydrate(a);l.bind()},hydrate:function(a){k=a;g=a.find("#spaui-templates")},bind:function(){a.subscribe(a.getName("newPage"),l.onNewPage);a.subscribe(a.getName("leavingPage"),l.onLeavingPage);l.bindForums([".spaui-forums-thread",".spaui-forums-thread-subject"],"click",l.openThread);l.bindForums([".spaui-forums-forum",".spaui-forums-forum-name"],"click",l.openForum);
l.bindForums(".spaui-forums-browse-link","click",l.openBrowseForum)},getForumSelector:function(a){e.$.isArray(a)||(a=[a]);a.unshift("#spaui-forums");return a.join(" ")},bindForums:function(a,b,c){return k.delegate(l.getForumSelector(a),b,c)},getForumsElements:function(a){return k.find(l.getForumSelector(a))},displayForums:function(){var a=f.enhanceUrl("/hz/sellerpartner/forums");b.placeEndpoint(a,"forums",function(){d.send({from:c.getFrom(),where:d.getContext("footer"),to:d.getPlace("forums")})})},
onNewPage:function(a){if(a.type===b.getPageType("forums")){a=k.find("#spaui-forums #spaui-forums-title-bar");a.length>0&&(j&&j.remove(),j=a);b.displaySpecialTitleBar(j);var f=[];l.getForumsElements([".spaui-forums-threads-list",".spaui-forums-thread"]).each(function(){f.push(e.$(this).data("thread-id"))});var g=[];l.getForumsElements([".spaui-forums-forum-list",".spaui-forums-forum"]).each(function(){g.push(e.$(this).data("forum-id"))});d.send({from:c.getFrom(),where:"forumsLinks",to:"discovered",
additionalObj:{featuredThreadIds:f.join(","),suggestedForumIds:g.join(",")}})}},onLeavingPage:function(a){a.type===b.getPageType("forums")&&g.append(j)},openThread:function(a){l.openInNewTab(a);a=e.$(a.target).closest(".spaui-forums-thread");l.instrumentForums(d.getContext("featuredThreads"),"ThreadClicked",{threadId:a.data("thread-id"),rank:a.data("rank"),total:l.getForumsElements(".spaui-forums-threads-list").data("total")})},openForum:function(a){l.openInNewTab(a);a=e.$(a.target).closest(".spaui-forums-forum");
l.instrumentForums(d.getContext("suggestedForums"),"ForumClicked",{forumId:a.data("forum-id"),rank:a.data("rank"),total:l.getForumsElements(".spaui-forums-forum-list").data("total")})},openBrowseForum:function(a){l.openInNewTab(a);l.instrumentForums(d.getContext("browseForums"),"BrowseClicked",{})},openInNewTab:function(a){a.preventDefault();h.openInNewWindow(a.target.getAttribute("href"))},instrumentForums:function(a,b,f){d.send({from:c.getFrom(),where:a,to:"forums"+b,additionalObj:f})}};return{init:l.init,
displayForums:l.displayForums}});ASPP.when("ASPA","spaui-metrics","spaui-ui","spaui-search-suggestions","spaui-browser-support").register("spaui-global-nav-search",function(e,h,d,b,c){var a,f,k,g,j,l,i={invokeSearchFunc:null,invokeSynchronizeFunction:null,defaultSearchValue:null},o=!1,r={init:function(a,b){r.hydrate(a,b);r.bind()},hydrate:function(b,c){i.invokeSearchFunc=b;i.invokeSynchronizeFunction=c;a=e.$(document);f=e.$("#sc-global-search");k=f.find("#sc-global-search-form #sc-search-field");
g=f.find("#sc-global-search-form .sc-search-button");j=e.$("#spaui-templates #spaui-template-global-nav-search-loading");l=j.find("#spaui-global-nav-loading-tip");if(k.length>0)i.defaultSearchValue=k.val().trim();r.setupPlaceholder()},bind:function(){g.click(r.clickSearch);a.keydown(r.searchKey);k.keyup(r.synchronizeAthenaSearch);k.focus(r.searchFocused);k.blur(r.searchBlurred);k.bind("paste",i.pasteFunc)},setupPlaceholder:function(){c.placeholderIsSupported()&&!r.placeHolderIsSet(k)?(k.attr("placeholder",
i.defaultSearchValue),k.removeAttr("onclick"),k.removeAttr("onblur"),k.val(""),i.placeholderFunc=r.doNothing,i.pasteFunc=r.doNothing):(i.placeholderFunc=r.setPlaceholder,i.pasteFunc=r.onPaste)},placeHolderIsSet:function(a){return a.attr("placeholder")!==void 0},onPaste:function(){!r.searchTermIsViable()&&o&&k.val("")},doNothing:function(){},synchronizeAthenaSearch:function(){i.invokeSynchronizeFunction(k.val())},clickSearch:function(a){a.preventDefault();r.submitSearch()},searchKey:function(a){if(o&&
(a.keyCode||a.which)===13)return r.submitSearch(),a.preventDefault(),!1},searchFocused:function(){o=!0;b.newBind(k,r.submitSearch,h.getPlace("globalNav"))},searchBlurred:function(){o=!1},searchTermIsViable:function(){var a=k.val().trim();return a!==""&&a!==i.defaultSearchValue},submitSearch:function(a){r.searchTermIsViable()&&(r.showLoading(),b.disable(),b.hide(),i.invokeSearchFunc(k.val(),{from:h.getPlace("globalNav"),where:h.getContext("globalSearch")},a,function(a){a==="order-redirect"?r.changeLoadingToOrderRedirect():
a==="inventory-redirect"?r.changeLoadingToInventoryRedirect():(r.hideLoading(),b.enable(),d.summoner({}))}))},showLoading:function(){k.after(l)},changeLoadingToOrderRedirect:function(){l.addClass("spaui-global-nav-redirecting-to-order")},changeLoadingToInventoryRedirect:function(){l.addClass("spaui-global-nav-redirecting-to-inventory")},hideLoading:function(){l.removeClass("spaui-global-nav-redirecting-to-order");l.removeClass("spaui-global-nav-redirecting-to-inventory");j.append(l)},setSearchBoxValue:function(a){r.isEmpty(a)&&
!c.placeholderIsSupported()?i.placeholderFunc():k.val(a)},isEmpty:function(a){return a===void 0||a===null||a.length===0},setPlaceholder:function(){k.val(i.defaultSearchValue)}};return{init:r.init,setSearchBoxValue:r.setSearchBoxValue}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-alert-metrics","spaui-alert-util").register("spaui-grouped-alerts",function(e,h,d,b,c){var a=h.getContext("groupedAlert"),f=h.getContext("groupedAlert"),k=null,g={init:function(a){k=a;k.delegate(g.getSelector(".spaui-grouped-alert-item-action"),
"click",g.instrumentInteract)},registerHandles:function(a){a.customRegister(g.isGroupedAlert,g.alertDiscovered,g.alertOpened,function(){},g.alertMinimized)},isGroupedAlert:function(a){return a.hasClass("spaui-grouped-alert")},alertDiscovered:function(c){var d=g.getRangeOfAlerts(c,0,1);b.discover(a,f,g.getDetailsForAlert(c,d))},alertOpened:function(b){var f=[];g.getRangeOfAlerts(b,1).each(function(){var a=e.$(this);f.push(a.data("id"))});b=c.getAlertDetails(b);h.send({from:d.getFrom(),where:a,to:h.getPlace("groupedAlertInnerDiscover"),
additionalObj:{isPush:b.isPush},payloadObj:{notificationId:f.join(","),notificationType:b.type,notificationName:b.name}})},alertMinimized:function(d){var h=[];g.getRangeOfAlerts(d,0).each(function(){var a=e.$(this);h.push(a.data("id"))});d=c.getAlertDetails(d);d.id=h.join(",");b.minimize(a,f,d)},instrumentInteract:function(d){var e=c.getAlertFromInnerEvent(d);b.read(a,f,g.getDetailsForAlert(e,g.getAlertFromEvent(d)))},getSelector:function(a){e.$.isArray(a)||(a=[a]);a.unshift(".spaui-grouped-alert");
return a.join(" ")},getRangeOfAlerts:function(a,b,c){return a.find("ul li.spaui-grouped-alert-item").slice(b,c)},getDetailsForAlert:function(a,b){var d=c.getAlertDetails(a);d.id=b.data("id");return d},getAlertFromEvent:function(a){return e.$(a.target).closest(".spaui-grouped-alert-item")}};return{init:g.init,registerHandles:g.registerHandles}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-content","spaui-util","spaui-weblabs","spaui-discovery","spaui-expand").register("spaui-help",function(e,
h,d,b,c,a,f,k){var g=null,j=".spaui-help-content "+k.selectors.collapsedElementHeader,l=".spaui-help-content "+k.selectors.expandedElementHeader,i,o={init:function(a){i=a;o.delegateBind();o.eventBind()},delegateBind:function(){i.delegate(j,"click",o.expand);i.delegate(l,"click",o.collapse)},eventBind:function(){f.registerWithoutAsync("helpTopic",b.getPageType("helpTopic"),!0,o.discoverHelpTopic);f.registerWithoutAsync("browseAllHelp",b.getPageType("browseAllHelp"),!0,o.discoverBrowseAllHelp)},bind:function(){e.$(".spaui-help-content .collapsible").each(function(){var a=
e.$(this);o.determineCollapse(a)})},expand:function(a){k.expand(a,o.instrumentExpandCollapse)},collapse:function(a){k.collapse(a,o.instrumentExpandCollapse)},determineCollapse:function(a){k.transformCollapse(a)},displayHelpTopic:function(a,c,d,f,i){d===void 0&&(d={});b.placeHelpTopic(a,c,function(b){var c=o.getTopicId(),A=o.getTrackingData({to:h.getTopic()+c},d,i);if(b.isError)e.$.extend(A,{isError:!0,errorDetails:b.errorDetails});else if(b.isPlatformError)A.isPlatformError=!0;g={tracking:A,bookmark:f,
actualTopicId:c+"",requestedTopicId:a+""}})},displayHelpTopicFromSession:function(a,b,c){o.displayHelpTopic(a,b,c,null,!0)},getTopicId:function(){return i.find(".spaui-help").data("topic")},instrumentRedirects:function(a,b){h.send({from:"topic"+b,where:"redirect",to:"topic"+a})},discoverHelpTopic:function(){if(g){var a=g.tracking,b=g.bookmark,d=g.actualTopicId,f=g.requestedTopicId;!a.isError&&!a.isPlatformError&&(o.bind(),b&&(b=b.slice(1),c.gebi(b)&&c.updateScrollTop(e.$(b),50)));h.validate(a);h.send(a);
d!==f&&o.instrumentRedirects(d,f);g=null}},displayBrowseAllHelp:function(a,c){b.placeEndpoint("/hz/sellerpartner/browse-all-help/",b.getPageType("browseAllHelp"),function(){g={tracking:o.getTrackingData({where:h.getContext("featured"),to:h.getPlace("browse")},a,c)}})},displayBrowseAllHelpFromSession:function(a){o.displayBrowseAllHelp(a,!0)},getTrackingData:function(a,b,c){var f=a.to,a=e.$.extend({from:d.getFrom()},a,b,{to:f});if(c)a.from=a.to,a.where=h.getContext("session"),a.to=h.getPlace("refresh");
return a},discoverBrowseAllHelp:function(){g&&(h.send(g.tracking),g=null)},instrumentExpandCollapse:function(a){h.send({from:d.getFrom(),where:h.getContext("content"),to:a})}};return{init:o.init,displayHelpTopic:o.displayHelpTopic,displayHelpTopicFromSession:o.displayHelpTopicFromSession,displayBrowseAllHelp:o.displayBrowseAllHelp,displayBrowseAllHelpFromSession:o.displayBrowseAllHelpFromSession,getTopicId:o.getTopicId}});ASPP.when("ASPA","spaui-debug").register("spaui-history",function(e,h){var d=
{dom:[],search:{content:[],query:[],start:[],total:[]},from:["info"],scroll:[],pop:[]},b="any",c=null,a=0,f=null,k=!1,g=!1,j=!1,l="any",i={init:function(){h.log("history.init()")},returnFrom:function(){return d.from[d.from.length-1]},returnTo:function(){return d.from[d.from.length-2]},returnPop:function(){return d.pop[d.pop.length-1]},returnFromLength:function(){return d.from.length},prepForHome:function(){h.group("history.prepForHome()");var a=d.dom[0];d.dom=[];d.dom.push(a);var a=d.from[0],b=i.returnFrom();
d.from=[];d.from.push(a);d.from.push(b);d.search.query=[];h.info("history: ");h.dir(d);h.groupEnd()},pushDom:function(a){d.dom.push(a)},pushPop:function(a){d.pop.push(a)},pushScroll:function(a){d.scroll.push(a)},popDom:function(){return d.dom.pop()},popPop:function(){return d.pop.pop()},popScroll:function(){return d.scroll.pop()},update:function(g){h.group("history.update()");h.dir(d);g.isBack?(d.from.pop(),d.search.content.pop(),d.search.query.pop(),d.search.start.pop(),d.search.total.pop()):(d.from.push(g.to),
g.to!=="search"&&(b="any",c=null,a=0,f=null),d.search.content.push(b),d.search.query.push(c),d.search.start.push(a),d.search.total.push(f));h.dir(d);h.groupEnd()},setSearchStartHistory:function(a){d.search.start[d.search.start.length-1]=a},returnSearchStartHistory:function(){return d.search.start[d.search.start.length-1]},returnSearchTotalHistory:function(){return d.search.total[d.search.total.length-1]},returnSearchQueryHistory:function(){return d.search.query[d.search.query.length-1]},setSearchRequest:function(a){g=
a},returnSearchRequest:function(){return g},setSearchFocused:function(a){k=a},returnSearchFocused:function(){return k},returnSearchScrollBuffer:function(){return 200},setSearchStart:function(b){a=b},returnSearchStart:function(){return a},returnSearchSize:function(){return 20},setSearchTotal:function(a){f=a},returnSearchTotal:function(){return f},setSearchQuery:function(a){c=a},returnSearchQuery:function(){return c},returnSearchContent:function(){return b},setSearchShowForums:function(a){j=a},returnSearchShowForums:function(){return j},
setSearchFilter:function(a){l=a},returnSearchFilter:function(){return l}};return{init:i.init,update:i.update,prepForHome:i.prepForHome,getFrom:i.returnFrom,getTo:i.returnTo,getPop:i.returnPop,getFromLength:i.returnFromLength,pushDom:i.pushDom,pushPop:i.pushPop,pushScroll:i.pushScroll,popDom:i.popDom,popPop:i.popPop,popScroll:i.popScroll,setSearchStartHistory:i.setSearchStartHistory,getSearchStartHistory:i.returnSearchStartHistory,getSearchTotalHistory:i.returnSearchTotalHistory,getSearchQueryHistory:i.returnSearchQueryHistory,
setSearchRequest:i.setSearchRequest,setSearchFocused:i.setSearchFocused,setSearchStart:i.setSearchStart,setSearchQuery:i.setSearchQuery,getSearchStart:i.returnSearchStart,getSearchContent:i.returnSearchContent,getSearchSize:i.returnSearchSize,getSearchQuery:i.returnSearchQuery,getSearchTotal:i.returnSearchTotal,setSearchTotal:i.setSearchTotal,setSearchShowForums:i.setSearchShowForums,getSearchShowForums:i.returnSearchShowForums,setSearchFilter:i.setSearchFilter,getSearchFilter:i.returnSearchFilter,
getSearchFocused:i.returnSearchFocused,getSearchRequest:i.returnSearchRequest,getSearchScrollBuffer:i.returnSearchScrollBuffer}});ASPP.when("ASPA","spaui-debug","spaui-metrics","spaui-util","spaui-history").register("spaui-hmd",function(e,h,d,b,c){var a,f,k,g={1:!1,2:!1,3:!1,4:!1},j=!1,l={init:function(a){h.log("hmd.init()");l.hydrate(a);l.bind()},hydrate:function(b){a=b},bind:function(){a.delegate("#spaui-help-hmd-yes","click",l.yes);a.delegate("#spaui-help-hmd-no","click",l.no);a.delegate(".spaui-help-hmd-comments-textarea textarea",
"click",l.focus);a.delegate(".spaui-help-hmd-comments-textarea textarea","keyup",l.type);a.delegate(".spaui-help-hmd-comments-cancel","click",l.clear);a.delegate(".spaui-help-hmd-comments-send","click",l.send);a.delegate(".spaui-help-hmd-q","change",l.check)},dom:function(b){return a.find("#spaui-help-hmd-"+b)},commentsDom:function(a){return f.find(".spaui-help-hmd-comments-"+a)},allCommentsDom:function(b){return a.find(".spaui-help-hmd-comments-"+b)},getContent:function(){return a.find("#spaui-content")},
activateComments:function(b){l.dom("question").addClass("spaui-hide");l.dom("message").removeClass("spaui-hide");f=a.find("#spaui-help-hmd-comments-"+b);f.removeClass("spaui-hide");k=f.find(".spaui-help-hmd-comments-textarea textarea");j=b==="yes";l.getContent().animate({scrollTop:l.getContent()[0].scrollHeight},2E3)},deactivateComments:function(){f&&(f.addClass("spaui-hide"),f=null)},yes:function(a){a.preventDefault();l.activateComments("yes");b.textareaFocusPlaceholderFix(k);l.instrument(a,!0,!1);
h.log("hmd.yes()")},no:function(a){a.preventDefault();l.activateComments("no");b.textareaFocusPlaceholderFix(k);l.instrument(a,!1,!1);h.log("hmd.no()")},focus:function(){k.addClass("active");b.textareaFocusPlaceholderFix(k)},type:function(a){if(1E3-a.currentTarget.value.length<=1)a.currentTarget.value=a.currentTarget.value.substr(0,1E3);l.commentsDom("counter").text(1E3-a.currentTarget.value.length);1E3-a.currentTarget.value.length<21?l.commentsDom("counter").addClass("asp-color-price"):l.commentsDom("counter").removeClass("asp-color-price")},
clear:function(b){b.preventDefault();for(var c in g)g[c]=!1,a.find("#spaui-help-hmd-q-"+c).attr("checked",!1);k.val("");k.removeClass("active");l.commentsDom("counter").text(1E3);h.log("hmd.clear()")},send:function(a){a.preventDefault();b.textareaFocusPlaceholderFix(k);l.instrument(a,j,!0);l.dom("message").addClass("spaui-hide");l.deactivateComments();l.dom("message-again").removeClass("spaui-hide");var c=setTimeout(function(){l.dom("message-again").fadeOut(function(){l.dom("message-again").remove()});
clearTimeout(c);c=null},2E3);h.log("hmd.send()")},check:function(a){var c=b.gda(a.currentTarget,"aInputName");(a.target||a.srcElement).checked?g[c]=!0:g[c]=!1;h.info("hmd.check()")},enable:function(a){b.gebi("spaui-content").innerHTML+=b.gebi("spaui-template-help-hmd").innerHTML;l.allCommentsDom("send").attr("data-topic",a);l.dom("yes").attr("data-topic",a);l.dom("no").attr("data-topic",a)},instrument:function(a,f,h){var a=b.gda(a.currentTarget,"topic"),l="",j="",l=k.val();if(!f&&h){var j="",q;for(q in g)g[q]&&
(j+=j===""?"":"|",j+=e.$("label[for=spaui-help-hmd-q-"+q+"]").find(".asp-checkbox-label").html(),g[q]=!1)}f=f?"1":"0";d.sendHmd({from:c.getFrom(),where:"HMD",to:"topic"+a,payloadObj:{source:"Athena",helpHmd:f,helpNodeId:a,helpHmdSuggestions:j,helpFeedback:l}})}};return{init:l.init,enable:l.enable}});ASPP.when("ASPA","spaui-events","spaui-history","spaui-metrics","spaui-content","spaui-progress","spaui-session","spaui-ajax","spaui-ui","spaui-push-notification","spaui-theming","spaui-alerts","spaui-features",
"spaui-help","spaui-state").register("spaui-intercept-card",function(e,h,d,b,c,a,f,k,g,j,l,i,o,r,s){var m={UPDATE_ENDPOINT:"/hz/sellerpartner/intercept-task-update",FAILED_REQUEST_REASON:"brokenRequest",FALSE_RESPONSE_REASON:"falseResponseFromController",DEFAULT_MESSAGE:"spaui-intercept-message25",MESSAGE_25:"spaui-intercept-message25",MESSAGE_50:"spaui-intercept-message50",MESSAGE_75:"spaui-intercept-message75",MESSAGE_100:"spaui-intercept-message100",VIDEO_TYPE:"VIDEO",ARTICLE_TYPE:"ARTICLE",CONTEXT:b.getContext("interceptCardPushNotification"),
MESSAGE_FADE_TIME:300,DELAY_BEFORE_SEEING_CONTINUE_MESSAGE:1E4},q,x,u={progressWasInit:!1,resetToHome:!1},n={init:function(a){n.hydrate(a);n.getTaskListDom().length>0&&(n.bind(),s.setShowBrowseAllHelpOnLoad(!1))},hydrate:function(a){q=a;x=e.$("#spaui-templates");n.parseTaskList()},getTaskListDom:function(){return q.find(".spaui-intercept-task-list")},getMessageDom:function(){return q.find(".spaui-intercept-message")},bind:function(){q.delegate(".spaui-intercept-task-list li a","click",n.taskClicked);
q.delegate(".spaui-intercept-community-forums-link","click",n.forumsLinkClicked);q.delegate(".spaui-intercept-continue-button","click",n.continueButtonClicked);h.subscribe(h.getName("newPage"),n.newPageShown);h.subscribe(h.getName("summon"),n.athenaSummoned);h.subscribe(h.getName("initializedWithoutSummon"),n.onNoSummon)},initialState:function(){n.getTaskListDom().length>0&&n.autoSummon()},onNoSummon:function(){n.presentPushNotification()},attemptProgressInit:function(){if(!u.progressWasInit)a.init({spaui:q,
cfg:{current:u.numComplete,fadeIn:400,fadeOut:100,steps:u.numTasks,parentSelector:"#spaui-intercept-header"}}),u.progressWasInit=!0},autoSummon:function(){f.getWasDismissed()||g.summoner({where:b.getContext("interceptTaskList")})},parseTaskList:function(){var a=n.getTaskListDom();u.cardId=a.data("interceptCardId");u.tasks={};u.numTasks=0;u.numComplete=0;a.find("li").each(function(a){var b=e.$(this),c=b.data("isCompleted"),d=b.data("topicId");u.tasks[d]={id:b.data("id"),topicId:d,rank:a,title:b.find("a").text(),
isCompleted:c,wasCompleted:c,taskType:b.data("taskType")};u.numTasks++;c&&u.numComplete++});n.presentShinyObject();n.updateProgress()},newPageShown:function(a){if(a.type===c.getPageType("helpTopic")){if(n.isTopicIdInList(a.topicId)&&(n.checkOffTask(a.topicId),u.placeContinueButtonInNextArticle)){a=x.find("#spaui-template-intercept-continue > div").clone();c.placeContentAfterHelpArticle(a);var b=a.find(".spaui-intercept-continue-message");b.hide();setTimeout(function(){b.fadeIn({duration:m.MESSAGE_FADE_TIME})},
m.DELAY_BEFORE_SEEING_CONTINUE_MESSAGE)}}else a.type===c.getPageType("info")&&g.isSummoned()&&(n.attemptProgressInit(),n.updateTaskList());u.placeContinueButtonInNextArticle=!1},athenaSummoned:function(){h.unsubscribe(h.getName("pushNotificationOpened"),n.onPushNotificationOpen);j.hide();c.getPage()===c.getPageType("info")&&n.attemptProgressInit();if(u.resetToHome)h.publish(h.getName("goHome")),u.resetToHome=!1},isTopicIdInList:function(a){return u.tasks.hasOwnProperty(a)},shouldTaskPlaceTopic:function(a){a=
u.tasks[a];return a.taskType===m.VIDEO_TYPE||a.taskType===m.ARTICLE_TYPE},checkOffTask:function(a){n.instrumentTask("Viewed",a);var b=u.tasks[a];k.get(m.UPDATE_ENDPOINT+"/?cardId="+u.cardId+"&taskIds="+b.id,{},e.$.proxy(n.instrumentUpdate,null,a,!0),e.$.proxy(n.instrumentUpdate,null,a,!1));if(!b.isCompleted)u.tasks[a].wasCompleted=!1,u.tasks[a].isCompleted=!0,u.numComplete++},taskClicked:function(a){a.preventDefault();var a=e.$(a.target).closest("li"),c=a.data("topicId");n.instrumentTask("Clicked",
c);if(n.shouldTaskPlaceTopic(c))u.placeContinueButtonInNextArticle=!0,r.displayHelpTopic(c,a.find("a").attr("href"),{where:b.getContext("interceptTaskList")})},forumsLinkClicked:function(){n.instrument("forumsLinkClicked")},continueButtonClicked:function(){n.instrument("continueButtonClicked")},updateTaskList:function(){var b=0;n.getTaskListDom().find("li").each(function(){var a=e.$(this),c=u.tasks[a.data("topicId")];if(c.isCompleted&&!c.wasCompleted)a.addClass("spaui-intercept-task-completed"),a.data("isCompleted",
!0),c.wasCompleted=!0,b++});b>0&&a.update(b);n.updateProgress()},updateProgress:function(){u.numTasks===4?u.numComplete<=1?n.updateMessage(m.MESSAGE_25):u.numComplete===2?n.updateMessage(m.MESSAGE_50):u.numComplete===3?n.updateMessage(m.MESSAGE_75):u.numComplete===4&&(n.updateMessage(m.MESSAGE_100),o.setIsInterceptCardComplete(!0)):n.updateMessage(m.DEFAULT_MESSAGE)},updateMessage:function(a){var b=n.getMessageDom(),a=e.$("#spaui ."+a).text();b.text(a)},presentPushNotification:function(){if(l.showPushNotification()){var a=
q.find("#spaui-intercept-header h3").text();j.create(a,"",j.INFORMATION,!1);b.send({from:d.getFrom(),where:m.CONTEXT,to:"load"});h.subscribe(h.getName("pushNotificationOpened"),n.onPushNotificationOpen)}},presentShinyObject:function(){l.showShinyObject()&&u.numComplete<u.numTasks&&(i.displayShinyObjectAlert(void 0,"INFORMATION"),h.subscribe(h.getName("triggerSummon"),n.onShinyObjectClick))},onShinyObjectClick:function(){u.resetToHome=!0},onPushNotificationOpen:function(){u.resetToHome=!0;g.summoner({where:m.CONTEXT})},
instrumentUpdate:function(a,b,c){c=c.data;if(!b||c==="false")c="",c=b?m.FALSE_RESPONSE_REASON:m.FAILED_REQUEST_REASON,n.instrumentTask("UpdateFailed",a,{failReason:c})},instrumentTask:function(a,b,c){b=u.tasks[b];b={interceptCardId:u.cardId,taskId:b.id,rank:b.rank,wasCompleted:b.isCompleted?"true":"false",title:b.title.trim()};e.$.extend(b,c);n.instrument("task"+a,b)},instrument:function(a,c){b.send({from:d.getFrom(),to:a,where:b.getContext("interceptTaskList"),additionalObj:c})},mockConfig:function(a){m=
e.$.extend(m,a)},getState:function(){return u}};return{init:n.init,initialState:n.initialState,mockConfig:n.mockConfig,getState:n.getState}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-events","spaui-async").register("spaui-linkcopy",function(e,h,d,b,c){var a,f=null,k={init:function(b,c){h.getData()&&h.getSpoofer()==="true"&&(a=b,a.delegate(".spaui-url-icon","click",k.linkCopyOpen),a.delegate(".spaui-url-input-close-icon","click",k.linkCopyClose),a.delegate(".spaui-link-copy-container",
"click",k.stopClickBubbling),f=c,k.bind())},bind:function(){b.subscribe(b.getName("newPage"),k.showURLIconIfPresent);b.subscribe(b.getName("newContentOnPage"),k.showURLIconIfPresent);b.subscribeAsyncModuleEvent("featured-content",c.COMPLETED_EVENT,k.showURLIconIfPresent)},showURLIconIfPresent:function(){a.find(".spaui-url-icon").removeClass("spaui-hide");a.find(".spaui-search-results-title").addClass("spaui-inline")},linkCopyOpen:function(a){a.preventDefault();var b=e.$(a.currentTarget),c=b.parent(),
a=c.find(".spaui-url-input"),c=c.find(".spaui-url-input-close-icon"),b=k.generateLink(b);a.val(b).removeClass("spaui-hide");c.removeClass("spaui-hide");a.select();h.send({from:d.getFrom(),to:h.getPlace("setLinkCopyOpen"),where:h.getContext("content")})},linkCopyClose:function(a){a.preventDefault();a=e.$(a.currentTarget);a.parent().find(".spaui-url-input").addClass("spaui-hide");a.addClass("spaui-hide");h.send({from:d.getFrom(),to:h.getPlace("setLinkCopyClosed"),where:h.getContext("content")})},stopClickBubbling:function(a){a.preventDefault();
a.stopPropagation()},generateLink:function(a){var b=a.data("topic-id"),a=a.data("type");if(a==="help")return f+"/gp/help/"+b;else if(a==="forums")return f+"/forums/thread.jspa?threadID="+b;else throw a+" is not a supported link type";}};return{init:k.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-state","spaui-metrics","spaui-history","spaui-session","spaui-forums","spaui-ui","spaui-events","spaui-features","spaui-ajax","spaui-help","spaui-direct-answer","spaui-contact-deflection","spaui-alert-util").register("spaui-links",
function(e,h,d,b,c,a,f,k,g,j,l,i,o,r,s,m){var q,x=null,u,n={init:function(a,b,c){n.hydrate(a,b,c);n.bind()},hydrate:function(a,b,c){q=a;q.find("#spaui-link-browse");u=b;x=c},bind:function(){q.delegate(".spaui-help-content a","click",n.helpContent);q.delegate(".spaui-ph-item-content-inner a","click",n.helpContent);q.delegate("#spaui-search-results .spaui-direct-answer a","click",n.directAnswer);q.delegate(".spaui-link-alerts-internal","click",n.alertsInternal);q.delegate(".spaui-link-alerts-external",
"click",n.alertsExternal);q.delegate(".spaui-link-ph-policy-internal","click",n.phPolicyInternal);q.delegate(".spaui-link-fc-internal","click",n.fcInternal);q.delegate(".spaui-link-fc-external","click",n.fcExternal);q.delegate(".spaui-link-tool-external","click",n.toolExternal);q.delegate(".spaui-link-search-internal","click",n.searchInternal);q.delegate(".spaui-link-search-external","click",n.searchExternal);q.delegate(".spaui-link-no-results-external","click",n.searchNoResultsExternal);q.delegate(".spaui-link-breadcrumb-help",
"click",n.bcHelp);q.delegate(".spaui-link-breadcrumb-forum","click",n.bcForum);q.delegate("#spaui-link-browse","click",n.browse);q.delegate(".spaui-link-browse-internal","click",n.browseInternal);q.delegate(".spaui-link-browse-parent","click",n.browseParent);q.delegate("#spaui-foot-caselog","click",n.caseLog);q.delegate("#spaui-foot-forums","click",n.forums);q.delegate("#spaui-foot-contact","click",n.contact);q.delegate("#spaui-foot-contact","mouseenter",n.contactOnHover);q.delegate("#spaui-foot-contact",
"mouseleave",n.contactOnLeave);e.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-link-alerts-internal","click",n.pushNotificationInternal);e.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-link-alerts-external","click",n.pushNotificationExternal);j.subscribe(j.getName("featuresChanged"),n.updateContactUsState)},updateContactUsState:function(){var a=q.find("#spaui-foot-contact");l.isContactUsEnabled()?a.data("href")&&(a.attr("href",a.data("href")),q.removeClass("spaui-disable-contact-us-weblab")):
(q.addClass("spaui-disable-contact-us-weblab"),a.attr("title",x),a.data("href",a.attr("href")),a.attr("href","javascript:void(0)"))},directAnswer:function(a){r.isDirectAnswerTool(e.$(a.currentTarget))&&f.setPinned(!1);n.contentLink(a,c.getContext("directAnswer"))},helpContent:function(a){n.contentLink(a,c.getContext("content"))},contentLink:function(b,h){var i=b.currentTarget.href,l=b.currentTarget.getAttribute("target");d.isOnArticle();var k=d.startsWith(i,"mailto:"),j=i.match(/\.[0-9a-z]{1,5}$/i),
q=b.currentTarget.hash&&n.isLinkToCurrentArticle(i),u=d.getTopicIDFromLink(i),m=d.contains(i,/(seller-?central|.*\.desktop).*\.amazon\./),s=d.contains(i,"www.amazon."),x=d.contains(i,"/hz/productsearch/"),l=["_self","_blank","_parent","_top","",null].indexOf(l)!==-1,r=d.isHashOnCurrentPage(i);if(k)c.send({from:a.getFrom(),where:h,to:c.getPlace("mailtoLink"),additionalObj:{email:i.substr(7)}});else if(m&&!q&&!u)c.send({from:a.getFrom(),where:h,to:c.getPlace("launchGenericPage"),additionalObj:{url:n.cleanUrl(i)}});
else if(!r)if((j||q||u||s||l||x)&&b.preventDefault(),j)c.send({from:a.getFrom(),where:h,to:c.getPlace("fileDownload"),additionalObj:{filename:i.substr(i.lastIndexOf("/")+1)}}),d.openInNewWindow(i);else if(q)g.scrollToHash(b.currentTarget.hash.substr(1));else if(u)o.displayHelpTopic(d.getTopicIDFromLink(i),i,{where:h});else if(s)c.send({from:a.getFrom(),where:h,to:c.getPlace("retailLink"),additionalObj:{url:i}}),d.openInNewWindow(i);else if(x)f.setPinned(!1),d.openInNewWindow(i);else if(l)d.openInNewWindow(i);
else{var i=e.$.extend({},b.target.attributes),k={},F;for(F in i)if(i.hasOwnProperty(F))k[i[F].name]=i[F].value;c.send({from:a.getFrom(),where:h,to:c.getAction("unhandledLink"),additionalObj:k})}},cleanUrl:function(a){return a.split("?")[0]},isLinkToCurrentArticle:function(a){var a=d.getTopicIDFromLink(a),b=o.getTopicId()+"";return a===b},phPolicyInternal:function(a){a.preventDefault();o.displayHelpTopic(d.gda(a.currentTarget,"id"),d.gda(a.currentTarget,"href"),{where:d.gda(a.currentTarget,"where")})},
fcInternal:function(a){a.preventDefault();o.displayHelpTopic(d.gda(a.currentTarget,"id"),d.gda(a.currentTarget,"href"),{where:d.gda(a.currentTarget,"where"),payloadObj:{resultRank:d.gda(a.currentTarget,"rank"),resultTotal:d.gda(a.currentTarget,"total")}})},fcExternal:function(b){b.preventDefault();c.send({from:a.getFrom(),where:d.gda(b.currentTarget,"where"),to:"launch-"+d.gda(b.currentTarget,"to")+"-"+d.gda(b.currentTarget,"id"),payload:"&resultRank="+d.gda(b.currentTarget,"rank")+"&resultTotal="+
d.gda(b.currentTarget,"total")});d.openInNewWindow(b.currentTarget.href)},searchInternal:function(b){b.preventDefault();var c=parseInt(d.gda(b.currentTarget,"rank"),10)+a.getSearchStart();o.displayHelpTopic(d.gda(b.currentTarget,"id"),d.gda(b.currentTarget,"href"),{where:d.gda(b.currentTarget,"where"),payloadObj:{resultRank:c,resultTotal:d.gda(b.currentTarget,"total")}})},searchExternal:function(b){b.preventDefault();var f=parseInt(d.gda(b.currentTarget,"rank"),10)+a.getSearchStart();c.send({from:a.getFrom(),
where:d.gda(b.currentTarget,"where"),to:"launch-"+d.gda(b.currentTarget,"to")+"-"+d.gda(b.currentTarget,"id"),payload:"&resultRank="+f+"&resultTotal="+d.gda(b.currentTarget,"total")});d.openInNewWindow(b.currentTarget.href)},searchNoResultsExternal:function(){c.send({from:a.getFrom(),where:c.getContext("noResults"),to:c.getPlace("launchNoSearchResults")})},bcHelp:function(b){b.preventDefault();var f=b.currentTarget.href,e=d.getTopicIDFromLink(f),g=parseInt(d.gda(b.currentTarget,"rank"),10)+a.getSearchStart();
o.displayHelpTopic(e,f,{where:c.getContext("breadcrumb"),payloadObj:{resultRank:g,resultTotal:d.gda(b.currentTarget,"total")}})},bcForum:function(b){b.preventDefault();c.send({from:a.getFrom(),where:c.getContext("breadcrumb"),to:"launch-Forum",payload:"&resultRank="+d.gda(b.currentTarget,"rank")+"&resultTotal="+d.gda(b.currentTarget,"total")});d.openInNewWindow(b.currentTarget.href)},browse:function(a){a.preventDefault();o.displayBrowseAllHelp()},browseInternal:function(a){a.preventDefault();o.displayHelpTopic(d.gda(a.currentTarget,
"id"),d.gda(a.currentTarget,"href"),{where:d.gda(a.currentTarget,"where")})},browseParent:function(b){b.preventDefault();var d=e.$(b.currentTarget).find("a"),b=e.$(b.currentTarget).next(),f="";b.is(":hidden")?(d.addClass("spaui-browse-parent-open"),b.show(),f=c.getPlace("setAhOpen")):(d.removeClass("spaui-browse-parent-open"),b.hide(),f=c.getPlace("setAhClose"));c.send({from:a.getFrom(),where:c.getContext("content"),to:f+c.sanitizeEventPart(d.attr("id"))})},alertsInternal:function(a,b){a.preventDefault();
g.getVisible()||g.summoner({});var f=m.getAlertDetails(m.getAlertFromInnerEvent(a)),e=d.gda(a.currentTarget,"item"),i=d.gda(a.currentTarget,"rank"),h=d.gda(a.currentTarget,"topic"),l=d.gda(a.currentTarget,"total"),k=a.currentTarget.getAttribute("href"),k=k===null?"":k,j=a.currentTarget.innerHTML;o.displayHelpTopic(h,k,{where:b?c.getContext("pushNotification"):c.getContext("alert"),additionalObj:{item:e,rank:i,total:l,itemUrl:k,itemText:j},payloadObj:{notificationId:f.id,notificationType:f.type,notificationName:f.name}})},
alertsExternal:function(b,e){var g=m.getAlertDetails(m.getAlertFromInnerEvent(b)),h=d.gda(b.currentTarget,"item"),l=d.gda(b.currentTarget,"rank"),k=d.gda(b.currentTarget,"total"),j=b.currentTarget.getAttribute("href"),j=j===null?"":j,q=b.currentTarget.innerHTML;b.currentTarget.href.toLowerCase().indexOf("gp/site-metrics/report.html")!==-1&&i.get("/hz/sellerpartner/alert/REDIRECT_TO_BIZ_REP?ids="+g.id);f.setPinned(!1);c.send({from:a.getFrom(),where:e?c.getContext("pushNotification"):c.getContext("alert"),
to:"launch-tool",additionalObj:{item:h,rank:l,total:k,itemUrl:j,itemText:q},payloadObj:{notificationId:g.id,notificationType:g.type,notificationName:g.name}})},toolExternal:function(b){f.setPinned(!1);b=b.currentTarget;b.hasAttribute("data-tool")&&c.send({from:a.getFrom(),where:c.getContext("tools"),to:c.sanitizeEventPart(d.gda(b,"tool"))})},pushNotificationInternal:function(a){n.alertsInternal(a,!0)},pushNotificationExternal:function(a){n.alertsExternal(a,!0)},caseLog:function(){f.setPinned(!1);
c.send({from:a.getFrom(),where:c.getContext("footer"),to:c.getPlace("caseLog")})},forums:function(b){u?(b.preventDefault(),k.displayForums()):c.send({from:a.getFrom(),where:c.getContext("footer"),to:c.getPlace("forums")})},contact:function(b){s.isActive()?(b.preventDefault(),s.displayDeflectionCard(c.getContext("footer"))):l.isContactUsEnabled()?(f.setPinned(!1),c.send({from:a.getFrom(),where:c.getContext("footer"),to:c.getPlace("contact")})):c.send({from:a.getFrom(),where:c.getContext("footer"),
to:c.getPlace("disabledContactUs")})},contactOnHover:function(){l.isContactUsEnabled()||n.presentPopover(x,q.find(".spaui-footer"))},contactOnLeave:function(){q.find(".spaui-popover").remove()},presentPopover:function(a,b){if(!(b.find(".spaui-popover").size()>0)){var c=e.$('<div class="spaui-popover">');c.html(a);b.append(c)}}};return{init:n.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-shim").register("spaui-metrics",function(e,h,d){var b={data:null,TIMEOUT:300,DROPPED_METRIC:"droppedMetric",
MAXIMUM_SIZE:64,endpoint:{protocol:"https://",host:"fls-na.amazon.com",path:"/1/action-impressions/1/OP/sp-athena/action/athena:",pathHmd:"/1/action-impressions/1/OP/sp-athena/action/help_hmd:",params:"",requestId:0},map:{context:{alert:"alert",alertShinyObject:"alertShinyObject",allAlerts:"allAlerts",async:"async",autoSummonParam:"autoSummonParam",autoSummonHelpParam:"autoSummonHelpParam",breadcrumb:"breadcrumb",browseForums:"browseForums",content:"content",getSupportCardItem:"getSupportCardItem",
directAnswer:"direct-answer",eciNotification:"eciNotification",externalApi:"externalApi",externalTrigger:"externalTrigger",featured:"featured",featuredThreads:"featuredThreads",footer:"footer",globalSearch:"globalSearch",groupedAlert:"groupedAlert",header:"header",interceptTaskList:"interceptTaskList",interceptCardPushNotification:"interceptCardPushNotification",navBack:"navBack",navFeedback:"navFeedback",navHome:"navHome",navSearch:"navSearch",noHelpResults:"noHelpResults",noResults:"noResults",
predictive:"predictive",previewFeedback:"previewFeedback",previewGetAnswers:"previewGetAnswers",previewAnywhere:"previewAnywhere",pushNotification:"pushNotification",results:"results",rating:"rating",rightClick:"rightClick",scFooter:"scFooter",searchSuggestions:"search-suggestions",session:"session",suggestedForums:"suggestedForums",tools:"tools",trigger:"trigger"},place:{alerts:"alerts",async:"async",browse:"browse",caseLog:"caseLog",contact:"contact",getSupportCard:"getSupportCard",disabledContactUs:"disabledContactUs",
globalNav:"globalNav",info:"info",external:"external",feedback:"feedback",forums:"forums",search:"search",searchMore:"searchMore",topic:{id:null,text:"topic"},refresh:"refresh",fileDownload:"fileDownload",mailtoLink:"mailtoLink",retailLink:"retailLink",popPage:"popPage",previewCard:"previewCard",launchGenericPage:"launch-genericPage",launchNoSearchResults:"launch-noSearchResults",loadPushNotification:"loadPushNotification",dismissPushNotification:"dismissPushNotification",openPushNotification:"openPushNotification",
setAlertRead:"setAlertRead",setAlertAbort:"setAlertAbort",setFeaturedContentAndPredictiveHelp:"setFeaturedContentAndPredictiveHelp",setForumsVisible:"setForumsVisible",setForumsVisibleViaConfig:"setForumsVisibleViaConfig",setForumsHidden:"setForumsHidden",setContactUsFooter:"setContactUsFooter",setLaunchContactUs:"setLaunchContactUs",disabledGetSupportClick:"disabledGetSupportClick",setLinkCopyOpen:"setLinkCopyOpen",setLinkCopyClosed:"setLinkCopyClosed",searchRedirect:"searchRedirect",searchErrorClient:"search-error-client",
setAthenaSummoned:"setAthenaSummoned",setAthenaBanished:"setAthenaBanished",setAhOpen:"setAhOpen-",setAhClose:"setAhClose-",setFbRate:"setFbRate",setFbClear:"setFbClear",setFbSend:"setFbSend",setPhAdopt:"setPhAdopt",setPhOpen:"setPhOpen",setPhClose:"setPhClose",setPhDismiss:"setPhDismiss",setPhYes:"setPhYes",setPhNo:"setPhNo",setSizeActive:"",setSizeLarge:"setSizeLarge",setSizeSmall:"setSizeSmall",alertDiscovered:"alertDiscovered",alertMassDiscovered:"alertMassDiscovered",alertMassRead:"alertMassRead",
alertSuppressed:"alertSuppressed",minimized:"minimized",noAlertToShow:"noAlertToShow",groupedAlertInnerDiscover:"groupedAlertInnerDiscover"},action:{unhandledLink:"unhandledLink"}},ADDITIONAL_METADATA:"&additionalMetadata="},c={init:function(a){h.group("metrics.init()");b.endpoint.host=a.host;if(a.hasOwnProperty("path")&&a.path!=="")b.endpoint.path=a.path;b.data=e.state("spaui-state");for(var c in b.data)b.data.hasOwnProperty(c)&&(b.endpoint.params+="&"+c+"="+b.data[c]);h.log(b);h.groupEnd()},send:function(a,
d,k){if(b.data){var d=b.endpoint.protocol+b.endpoint.host+(d===void 0?b.endpoint.path:d),g=b.endpoint.params+"&requestId="+b.data.parentRequestId+"_"+b.endpoint.requestId;c.encodeAdditionalObj(a);c.encodePayloadObj(a);if(a.errorDetails)a.additional=c.appendToAdditional(a.additional,"errorType",a.errorDetails.type),a.additional=c.appendToAdditional(a.additional,"errorJqueryStatus",a.errorDetails.jqueryStatus),a.additional=c.appendToAdditional(a.additional,"errorHttpStatus",a.errorDetails.httpStatus),
a.additional=c.appendToAdditional(a.additional,"errorReadyState",a.errorDetails.readyState);var j=[a.from,a.where,a.to].join("_");c.oversized(j)&&(h.group("Metric Size Error"),h.error("Metrics cannot exceed "+b.MAXIMUM_SIZE+" your event was "+j.length+" characters long"),h.groupEnd(),c.sendDroppedMetric(j,a));g+=a.additional?a.additional:"";g+=a.payload?a.payload:"";if(a.isError)a.to="error-"+a.to;else if(a.isPlatformError)a.to="error-platform-"+a.to;e.$.ajax({url:d+j+"?"+g,timeout:b.TIMEOUT}).always(function(){k!==
void 0&&e.$.isFunction(k)&&k()})}else h.error("no data for tracking calls");b.endpoint.requestId++},sendHmd:function(a,d){c.send(a,b.endpoint.pathHmd,d)},oversized:function(a){return a.length>=b.MAXIMUM_SIZE},sendDroppedMetric:function(a){c.send({from:b.DROPPED_METRIC,where:b.DROPPED_METRIC,to:b.DROPPED_METRIC,additionalObj:{attempted:a}})},encodeAdditionalObj:function(a){if(a.additionalObj){var c=[];Object.keys(a.additionalObj).forEach(function(b){c.push(b+":"+a.additionalObj[b])});a.additional=
b.ADDITIONAL_METADATA+encodeURIComponent(c.join("|"))}},encodePayloadObj:function(a){if(a.payloadObj)a.payload=d.formatObjectAsUrlParams(a.payloadObj,!0)},appendToAdditional:function(a,c,d){c=c+":"+d;a===void 0||a===null||a===""?a=b.ADDITIONAL_METADATA+c:a+="|"+c;return a},validate:function(a){if(a)try{c.validOrThrownForEventPart(a,"from");c.validOrThrownForEventPart(a,"where");c.validOrThrownForEventPart(a,"to");if(a.additionalObj&&!e.$.isPlainObject(a.additionalObj))throw"METRICS.validate failed, additionalObj must be an object if set";
return!0}catch(b){throw b;}else throw"METRICS.validate failed, tracking is empty";},validOrThrownForEventPart:function(a,b){if(a[b]){if(a[b].indexOf("_")!==-1)throw"Failed to validate field '"+b+"' it should not contain underscores (_)";}else throw"Failed to validate field '"+b+"' it was empty";},sanitizeEventPart:function(a){return a.split("_").join("-")},returnRequestId:function(){return b.endpoint.requestId},returnParentRequestId:function(){return b.data.parentRequestId},returnSession:function(){return b.data.session},
returnIsSpoofer:function(){return b.data.isSpoofer},returnRegionId:function(){return b.data.regionId},returnAllData:function(){return b.data},returnAllParams:function(){return b.endpoint.params},returnNextChildRequestId:function(){var a=b.data.parentRequestId+"_"+b.endpoint.requestId;b.endpoint.requestId++;return a},returnAction:function(a){return b.map.action[a]},returnPlace:function(a){return b.map.place[a]},returnContext:function(a){return b.map.context[a]},setSizeActive:function(a){b.map.place.setSizeActive=
a},returnTopic:function(){return b.map.place.topic.text},returnTopicID:function(){return b.map.place.topic.id}};return{init:c.init,send:c.send,sendHmd:c.sendHmd,validate:c.validate,sanitizeEventPart:c.sanitizeEventPart,getSession:c.returnSession,getSpoofer:c.returnIsSpoofer,getRegionId:c.returnRegionId,getData:c.returnAllData,getParams:c.returnAllParams,getRequestId:c.returnRequestId,getParentRequestId:c.returnParentRequestId,incrementChildRequestId:c.returnNextChildRequestId,getAction:c.returnAction,
getPlace:c.returnPlace,getContext:c.returnContext,setSizeActive:c.setSizeActive,getTopic:c.returnTopic,getTopicID:c.returnTopicID}});ASPP.when("ASPA","spaui-ui").register("spaui-overlay",function(e,h){var d={template:e.$('<div id="spaui-fullscreen-overlay" class="spaui-fullscreen-overlay"></div>'),overlayActive:!1,$window:e.$(window),fadeTime:200},b={createFullscreenOverlay:function(){if(!d.overlayActive)e.$("body").append(d.template.clone()),d.overlayActive=!0,b.bindScroll(),b.recomputeSize(),h.hideClose(),
h.contentChanged(),h.makeLarge()},removeOverlay:function(){var c=b.findOverlay();c.fadeOut(d.fadeTime,function(){c.remove();d.overlayActive=!1;b.unbindScroll();h.showClose();h.contentChanged()})},bindScroll:function(){d.$window.bind("scroll resize",b.recomputeSize)},unbindScroll:function(){d.$window.unbind("scroll resize",b.recomputeSize)},recomputeSize:function(){var c=b.findOverlay(),a=b.calculateTop(),d=b.calculateHeight(a);c.css("top",a);c.css("height",d)},findOverlay:function(){var b="#"+d.template.attr("id");
return e.$(b)},calculateTop:function(){var c=e.$("#spooferSpacerDiv").outerHeight()||0,a=b.visibleHeight(e.$("#sc-masthead"),c),d=b.visibleHeight(e.$("#merchant-bar-container"),c);return c+a+d},calculateHeight:function(c){var a=e.$(".sc-footer, #sc_footer").eq(0),f=b.visibleHeight(a),a=b.heightFromBottom(a);return d.$window.height()-f-c-a},visibleHeight:function(b,a){if(b.size()===0)return 0;var a=a||0,f=b.outerHeight(),e=d.$window.height(),g=b[0].getBoundingClientRect(),h=g.top-a,g=g.bottom;return Math.max(0,
h>0?Math.min(f,e-h):g<e?g-a:e)},heightFromBottom:function(b){if(b.size()===0)return 0;var a=d.$window.height(),b=b[0].getBoundingClientRect().bottom;return Math.max(0,a-b)},overrideConfig:function(b){d=e.$.extend(d,b)}};return{createFullscreenOverlay:b.createFullscreenOverlay,removeOverlay:b.removeOverlay,overrideConfig:b.overrideConfig}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-metrics","spaui-history","spaui-discovery","spaui-ajax").register("spaui-predictive",function(e,h,d,b,c,a,f){var k,
g=!0,j={init:function(a){h.log("predictive.init()");j.hydrate(a);j.bind()},hydrate:function(b){k=b;a.register("predictive","info",!1,j.adoptionCheck)},bind:function(){k.delegate(".spaui-ph-expand-closed","click",j.show);k.delegate(".spaui-ph-expand-open","click",j.hide);k.delegate(".spaui-ph-dismiss","click",j.dismiss);k.delegate(".spaui-ph-item-feedback-yes","click",j.yes);k.delegate(".spaui-ph-item-feedback-no","click",j.no);k.delegate("#spaui-ph-dismiss-legal","mouseenter mouseleave",j.legal);
k.delegate("#spaui-ph-view-legal","mouseenter mouseleave",j.legal)},getDetails:function(a){a=e.$(a.currentTarget).closest(".spaui-ph-item");return{qid:a.data("question"),pid:e.$("#spaui-ph-header").attr("data-prediction"),rank:a.data("rank"),total:a.data("total"),workflowId:a.data("workflow")}},show:function(a){a.preventDefault();var c=j.getDetails(a),a=e.$(a.currentTarget);e.$("#spaui-ph-item-"+c.qid+"-closed").hide();e.$("#spaui-ph-item-"+c.qid+"-open").show();if(c.workflowId){var d=e.$("#spaui-ph-workflow-"+
c.qid);d.length>0&&d.attr("spaui-ph-workflowdisplayed")==="N"&&(d.attr("spaui-ph-workflowdisplayed","Y"),j.displayWorkflow(c))}a.attr("data-logged")!=="true"&&(a.attr("data-logged","true"),e.$.post("/hz/recommended-help/api/send-user-action?"+j.getIdParams(c)));j.instrument(c,b.getPlace("setPhOpen"))},displayWorkflow:function(a){f.post("/hz/augur/execute-workflow?workflowId="+a.workflowId+"&client=AthenaPH",{dataType:"html"},function(b){j.flush(a,b.data,!0)},function(b){j.flush(a,b.data,!1)})},flush:function(a,
b,c){c?(e.$("#spaui-ph-workflow-"+a.qid).html(b),e.$("#spaui-ph-item-"+a.qid+"-feedback").show()):e.$("#spaui-ph-workflow-"+a.qid).parent().remove()},hide:function(a){a.preventDefault();a=j.getDetails(a);e.$("#spaui-ph-item-"+a.qid+"-open").hide();e.$("#spaui-ph-item-"+a.qid+"-closed").show();j.instrument(a,b.getPlace("setPhClose"))},dismiss:function(a){a.preventDefault();a=j.getDetails(a);e.$.post("/hz/recommended-help/api/send-feedback-text?feedbackText=dismissed&"+j.getIdParams(a));j.instrument(a,
b.getPlace("setPhDismiss"));e.$("#spaui-ph-item-"+a.qid).remove()},yes:function(a){a.preventDefault();a=j.getDetails(a);e.$.post("/hz/recommended-help/api/send-feedback?feedback=true&"+j.getIdParams(a));e.$("#spaui-ph-item-"+a.qid+"-feedback").hide();e.$("#spaui-ph-item-"+a.qid+"-feedback-ui-yes").show();j.instrument(a,b.getPlace("setPhYes"))},no:function(a){a.preventDefault();a=j.getDetails(a);e.$.post("/hz/recommended-help/api/send-feedback?feedback=false&"+j.getIdParams(a));e.$("#spaui-ph-item-"+
a.qid+"-feedback").hide();e.$("#spaui-ph-item-"+a.qid+"-feedback-ui-yes").show();j.instrument(a,b.getPlace("setPhNo"))},getIdParams:function(a){return"id="+a.qid+"&prediction="+a.pid},instrument:function(a,d){b.send({from:c.getFrom(),to:d,where:b.getContext("predictive"),payloadObj:{resultRank:a.rank,resultTotal:a.total},additionalObj:{questionId:a.qid,topicId:a.pid,workflowId:a.workflowId}})},legal:function(a){a.type==="mouseenter"&&(k.find("#spaui-ph-dismiss-legal-icon").addClass("on"),k.find("#spaui-ph-view-legal").addClass("on"));
a.type==="mouseleave"&&(k.find("#spaui-ph-dismiss-legal-icon").removeClass("on"),k.find("#spaui-ph-view-legal").removeClass("on"))},adoptionCheck:function(){if(g){var a=d.gebi("spaui-ph-header");if(a=a?d.gda(a,"prediction"):null)e.$.post("/hz/recommended-help/api/send-adoption?predictionId="+a),g=!1}}};return{init:j.init}});ASPP.when("ASPA","spaui-debug").register("spaui-progress",function(e,h){var d={complete:0,current:0,fadeIn:200,fadeOut:100,parentSelector:null,steps:3,ie9:!1,ie8:!1,safari:!1,
ie9prefix:"",safariPrefix:""},b,c={init:function(a){if(!a.cfg.parentSelector)throw"parentSelector is required.";c.extend(a.cfg);c.hydrate(a.spaui);c.userAgentSniff();c.updateTransitionEvent();d.ie8?c.ie8():(c.bind(),c.delayUpdate())},extend:function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&(d[b]=a[b])},hydrate:function(a){b=a;b.find(d.parentSelector).prepend('<div id="spaui-intercept-progress-radial" class="spaui-intercept-progress-radial"><div id="spaui-intercept-progress-current" class="spaui-intercept-progress-current">0<span>%</span></div><div id="spaui-intercept-progress-circle" class="spaui-intercept-progress-circle"><div id="spaui-intercept-progress-mask-full" class="spaui-intercept-progress-mask spaui-intercept-progress-full"><div id="spaui-intercept-progress-fill-full" class="spaui-intercept-progress-fill"></div></div><div id="spaui-intercept-progress-mask-half" class="spaui-intercept-progress-mask spaui-intercept-progress-half"><div id="spaui-intercept-progress-fill-half" class="spaui-intercept-progress-fill"></div><div id="spaui-intercept-progress-fix" class="spaui-intercept-progress-fill spaui-intercept-progress-fix"></div></div></div><div class="spaui-intercept-progress-inset"></div><div class="spaui-intercept-progress-circle-back"></div></div>')},
userAgentSniff:function(){d.ie9=e.$("html").hasClass("a-ie9");d.ie8=e.$("html").hasClass("a-ie8");d.safari=navigator.userAgent.indexOf("Safari")!==-1&&navigator.userAgent.indexOf("Chrome")===-1},bind:function(){b.delegate("#spaui-intercept-progress-fix","transitionend",c.revealCompleted)},delayUpdate:function(){setTimeout(function(){c.updateComplete()},10)},updateTotal:function(a){h.log("progress.updateTotal()");if(a+d.current<=d.steps&&a+d.current>0)d.current=a+d.current,c.updateComplete();else throw"That would be larger than steps, or less than zero. Please try again.";
},updateComplete:function(){d.complete=d.current/d.steps;c.updateUI()},updateUI:function(){b.find("#spaui-intercept-progress-current").fadeOut(d.fadeOut,c.updateIndicator)},updateIndicator:function(){var a=d.complete*180,f=a*2;b.find("#spaui-intercept-progress-mask-full").css(d.safariPrefix+d.ie9prefix+"transform","rotate("+a+"deg)");b.find("#spaui-intercept-progress-fill-full").css(d.safariPrefix+d.ie9prefix+"transform","rotate("+a+"deg)");b.find("#spaui-intercept-progress-fill-half").css(d.safariPrefix+
d.ie9prefix+"transform","rotate("+a+"deg)");b.find("#spaui-intercept-progress-fix").css(d.safariPrefix+d.ie9prefix+"transform","rotate("+f+"deg)");(d.ie9||d.ie8)&&c.revealCompleted()},revealCompleted:function(){h.log("progress.revealCompleted()");b.find("#spaui-intercept-progress-current").html(parseInt(d.complete*100,10)+"<span>%</span>");b.find("#spaui-intercept-progress-current").fadeIn(d.fadeIn)},updateTransitionEvent:function(){d.ie9&&c.ie9();d.safari&&c.safari()},ie9:function(){d.ie9prefix=
"-ms-"},safari:function(){d.safariPrefix="-webkit-"},ie8:function(){d.complete=d.current/d.steps;c.revealCompleted()}};return{init:c.init,update:c.updateTotal}});ASPP.when("ASPA","spaui-events","spaui-util").register("spaui-push-notification",function(e,h,d){var b,c,a,f,k=!1,g={width:400,duration:{show:400,hide:300,minimize:300},severities:{HIGH:"urgent",MEDIUM:"alert",OPPURTUNITY:"oppurtunity",INFORMATION:"info"},showDismissClass:"spaui-pn-show-dismiss",showMinimizeClass:"spaui-pn-show-minimize"},
j={init:function(a){j.hydrate(a);j.bind()},hydrate:function(){b=e.$("#spaui-templates");c=b.find("#spaui-push-notification");a=e.$("#sc-quicklink-help").find(".sc-ql-a").find(".sc-quick-txt");f=e.$("#sc-quicklinks-top")},bind:function(){window.addEventListener("resize",function(){k&&j.adjust()})},create:function(a,b,d,e){if(!k)return c.find("#spaui-pn-title").text(a),c.find("#spaui-pn-content").append(b),c.find(".spaui-alert-dismiss").remove(),c.addClass(j.getClassName(d)),e?c.addClass(g.showMinimizeClass):
c.addClass(g.showDismissClass),j.bindExpand(),f.prepend(c),j.adjust(),k=!0,c},bindExpand:function(){c.click(j.expandPushNotification);c.removeClass("expanded")},bindDismissOrMinimize:function(){c.hasClass(g.showMinimizeClass)?c.find("#spaui-pn-title-bar").click(j.collapsePushNotification):c.hasClass(g.showDismissClass)&&c.find("#spaui-pn-close-icon").click(j.hidePushNotification)},hide:function(){c.fadeOut({duration:g.duration.hide,complete:j.afterHideNotification})},isActive:function(){return k},
expandPushNotification:function(){h.publish(h.getName("pushNotificationOpened"));c.unbind("click",j.expandPushNotification);c.addClass("expanded");var a=c.find("#spaui-pn-content");a.css("top",-1*a.height());a.animate({top:0},{duration:g.duration.show,complete:j.bindDismissOrMinimize})},collapsePushNotification:function(){h.publish(h.getName("pushNotificationMinimize"));c.find("#spaui-pn-title-bar").unbind("click",j.collapsePushNotification);var a=c.find("#spaui-pn-content");a.animate({top:-1*a.height()},
{duration:g.duration.minimize,complete:j.bindExpand})},hidePushNotification:function(){h.publish(h.getName("pushNotificationClosed"));j.hide()},afterHideNotification:function(){k=!1;c.removeClass("expanded");b.append(c)},adjust:function(){c.css("top",f.height());c.css("right",-d.getElementRightOffset(f));var b=c.find("#spaui-pn-arrow"),e=a.offset().left-c.offset().left;e+=a.width()/2;e-=10;e=parseInt(e,10);b.css("left",e)},isValidSeverity:function(a){switch(a){case g.severities.HIGH:case g.severities.MEDIUM:case g.severities.OPPURTUNITY:case g.severities.INFORMATION:return!0}return!1},
getClassName:function(a){if(a)return"spaui-pn-"+a.toLowerCase();else throw"severity is not set!";}};return{init:j.init,create:j.create,hide:j.hide,isActive:j.isActive,HIGH:g.severities.HIGH,MEDIUM:g.severities.MEDIUM,OPPURTUNITY:g.severities.OPPURTUNITY,INFORMATION:g.severities.INFORMATION,overrideConfig:function(a){g=e.$.extend(g,a)}}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-util").register("spaui-rightclick",function(e,h,d,b){var c=null,a=null,f=null,k={init:function(a){k.populate(a);
k.enhance();k.bind()},populate:function(d){c=d;a=e.$("#sc-quicklink-help");f=b.getContactUsFooterLink()},enhance:function(){a.attr("data-feature-name","scHelpLink");f.attr("data-feature-name","scGetSupportLink")},bind:function(){var b=function(a){a=e.$(a.target);k.handleRightClick(a)};c.bind("contextmenu",b);a.delegate("a","contextmenu",b);f.bind("contextmenu",b);e.$(window).delegate("#spaui-push-notification","contextmenu",b)},handleRightClick:function(a){var c=a.closest("[data-feature-name]").data("feature-name"),
a=a.closest("a").attr("href"),a=a!==void 0?b.getTopicIDFromLink(a):void 0,c={from:d.getFrom(),where:h.getContext("rightClick"),to:c};if(a!==void 0)c.additionalObj={helpTopicId:a};h.send(c)}};return{init:k.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-history","spaui-session","spaui-metrics","spaui-content","spaui-search-suggestions","spaui-help","spaui-global-nav-search","spaui-events").register("spaui-search",function(e,h,d,b,c,a,f,k,g,j,l){var i,o,r,s,m,q,x=!1,u="Search",n={init:function(a,
b,c){h.log("spaui-search init()");n.hydrate(a);n.bind();n.subscribe();u=i.attr("placeholder");(x=c)&&j.init(n.externalSubmitSearch,n.externalSynchronizeSearchBoxValue);k.init(b,u)},hydrate:function(a){h.log("spaui-search hydrate()");o=e.$(document);r=a;i=a.find("#spaui-search-box");s=a.find(".spaui-head-controls-search");m=a.find("#spaui-search-icon");a.find(".spaui-search-filter-wrapper");q=a.find(".spaui-search-filter")},bind:function(){m.click(n.clickSearch);i.focus(n.focusSearch);i.blur(n.blurSearch);
o.keydown(n.keyDown);i.keyup(n.synchronizeGlobalNavSearch);r.delegate("#spaui-toggle-forums","click",n.toggleForumResults);r.delegate(".spaui-search-trigger","click",n.handleSearchTriggerClick)},subscribe:function(){l.subscribe(l.getName("newPage"),n.handleNewPage)},toggleForumResults:function(c){c.preventDefault();var c=e.$(c.currentTarget),d="";r.find(".spaui-search-results").hasClass("showForums")?(c.removeClass("asp-button-selected"),d=c.find("input").data("include-label"),r.find(".spaui-search-results").removeClass("showForums"),
b.setSearchShowForums(!1),a.send({from:b.getFrom(),to:a.getPlace("setForumsHidden"),where:a.getContext("navSearch")})):(c.addClass("asp-button-selected"),d=c.find("input").data("exclude-label"),r.find(".spaui-search-results").addClass("showForums"),b.setSearchShowForums(!0),a.send({from:b.getFrom(),to:a.getPlace("setForumsVisible"),where:a.getContext("navSearch")}));c.find("input").val(d);c.find(".asp-button-text").html(d)},clickSearch:function(a){a.preventDefault();i.trigger("focus");n.keyDown({keyCode:13})},
focusSearch:function(){b.setSearchFocused(!0);s.addClass("on");m.addClass("on");k.newBind(i,n.suggestionsSearch,void 0,s.width())},blurSearch:function(){b.setSearchFocused(!1);s.removeClass("on");m.removeClass("on")},synchronizeGlobalNavSearch:function(){if(x){var a=i.val();j.setSearchBoxValue(a)}},keyDown:function(a){b.getSearchFocused()&&e.$.trim(i.val())!==""&&(a.keyCode||a.which)===13&&n.submitSearch()},suggestionsSearch:function(a){n.submitSearch(null,a)},submitSearch:function(d,h,k){k===void 0&&
(k=function(){});var j=i.val();c.storeSearchQuery(j);d===void 0&&(d={});d=e.$.extend({from:b.getFrom(),where:a.getContext("navSearch")},d,{to:a.getPlace("search")});h?(k("help"),g.displayHelpTopic(h,null,d)):(h=q.val()||"any",b.setSearchQuery(j),b.setSearchStart(0),b.setSearchFilter(h),b.pushPop(""),f.placeSearch(j,h,e.$.proxy(n.searchCompleted,null,k,d)))},searchCompleted:function(c,f,g){if(g.isError)f.isError=!0,f.errorDetails=g.errorDetails,a.send(f);else if(g.isPlatformError)f.isPlatformError=
!0,a.send(f),e.$("#spaui-error-search-retry").bind("click",function(){d.gebi("spaui-search-icon").click()});else{if(g.isRedirect)a.send({from:f.from,where:a.getContext("results"),to:a.getPlace("searchRedirect"),additionalObj:{searchRedirect:g.redirectType,query:b.getSearchQuery()}},void 0,g.callback);else{n.rebindScroll();var h="content="+b.getSearchFilter()+"|start="+b.getSearchStart()+"|size="+b.getSearchSize()+"|query="+b.getSearchQuery();f.payloadObj={queryString:h,resultTotal:b.getSearchTotal()};
h=d.truncateString(b.getSearchQuery(),100,"...");f.additionalObj=e.$.extend(f.additionalObj,{query:h});a.send(f)}c(g.searchType);setTimeout(function(){n.searchScroll()},100)}},handleSearchTriggerClick:function(a){a.preventDefault();var b=d.gda(a.currentTarget,"search"),a=d.gda(a.currentTarget,"filter");a!==void 0&&q.val(a);b!==void 0&&(i.val(b),n.submitSearch())},externalSubmitSearch:function(a,b,c,d){i.val(a);n.submitSearch(b,c,d)},externalSynchronizeSearchBoxValue:function(a){i.val(a)},setSearchBoxValue:function(a){if(a===
void 0||a===null)a="";a=decodeURIComponent(a);i.val(a);n.synchronizeGlobalNavSearch()},searchScroll:function(){f.placeNextSearchPage(function(c,d){var f="content="+b.getSearchFilter(),e="|start="+b.getSearchStart(),g="|size="+b.getSearchSize(),h="|query="+b.getSearchQuery(),f=f+e+g+h;a.send({isError:!c,errorDetails:d,from:b.getFrom(),where:a.getContext("results"),to:a.getPlace("searchMore"),additionalObj:{query:b.getSearchQuery()},payloadObj:{queryString:f,resultTotal:b.getSearchTotal()}})})},handleNewPage:function(a){a.type===
"search"&&n.rebindScroll()},rebindScroll:function(){r.find("#spaui-content").unbind("scroll");r.find("#spaui-content").bind("scroll",n.searchScroll)}};return{setSearchBoxValue:n.setSearchBoxValue,externalSubmitSearch:n.externalSubmitSearch,externalKeyDown:n.externalKeyDown,bindGlobalNav:n.bindGlobalNav,blurSearch:n.blurSearch,init:n.init}});ASPP.when("ASPA","spaui-util","spaui-metrics","spaui-history","spaui-session","spaui-ajax","spaui-shim","spaui-weblabs").register("spaui-search-suggestions",function(e,
h,d,b,c,a,f,k){var g={name:"spaui-search-suggestions",serviceUrl:"/hz/sellerpartner/suggest-search/",lastRequestId:0,someResults:!1,selectedResult:null,lastSearchQuery:null,searchIconMargin:27,dontHideOnNextBlur:!1,weblabActive:!1,enabled:!0,invokeSearchFunc:null,externalPlace:null,defaultWidth:300,enabledSearchSuggestions:!1,searchPlaceholder:null,requestTypingDelay:300,visible:!1,inPHWeblab:!1},j={tools:{resultKind:"SellerCentralTool",kind:"tool",title:null,number:3,lineBreak:!0,priority:3},history:{resultKind:"History",
kind:"history",title:null,number:3,lineBreak:!0,priority:1},help:{resultKind:"PredictiveHelp",kind:"help",title:null,number:3,priority:2},autohelp:{resultKind:"PredictiveHelpAuto",kind:"autohelp",title:null,number:0,lineBreak:!0,priority:2},previous:{resultKind:"previous",kind:"previous-search",title:null,number:3,priority:0}},l,i,o,r,s,m={init:function(a,b){if(h.gebi("spaui-search-suggestions"))g.weblabActive=!0;g.enabledSearchSuggestions=a;g.searchPlaceholder=b;g.inPHWeblab=k.isAnyTreatment(k.SEARCH_SUGGEST_PH);
m.hydrate()},hydrate:function(){l=e.$("#spaui-template-search-suggestions");i=e.$("#spaui-search-suggestions");o=e.$("#spaui-search-suggestions-list");r=e.$('<span class="spaui-loading-gif-medium spaui-suggestions-loading">');Object.keys(j).forEach(function(a){j[a].title=i.data(a+"-title")});if(g.inPHWeblab)j.autohelp.number=j.help.number,j.help.number=0,j.tools.lineBreak=!1},newBind:function(a,b,c,d){if(!m.isDisabled()){if(d===void 0)d=g.defaultWidth;m.resize(d);m.unbind(s);m.bind(a);a.after(i);
i.css("top",a.outerHeight()-1);g.invokeSearchFunc=b;g.externalPlace=c;m.show()}},unbind:function(a){if(a)l.append(i),a.unbind("focus",m.show),a.unbind("blur",m.onBlur),a.unbind("keydown",m.onKeyDown),a.unbind("input",m.onChange),g.invokeSearchFunc=null,g.currentPlace=null},bind:function(a){s=a;s.attr("autocomplete","off");s.focus(m.show);s.blur(m.onBlur);s.keydown(m.onKeyDown);s.bind("input",null,m.onChange)},onBlur:function(){g.dontHideOnNextBlur||m.hide();g.dontHideOnNextBlur=!1},onKeyDown:function(a){if(!m.isDisabled()&&
(a.keyCode===40||a.keyCode===38||a.keyCode===13)){var b=!0;switch(a.keyCode){case 40:m.moveSelectionDown();break;case 38:m.moveSelectionUp();break;case 13:m.hide();var b=!1,c=m.getSelectedSuggestion();c&&(b=m.handleSpecialSuggestionSelection(c,a))}return b?(a.preventDefault(),a.stopImmediatePropagation(),!1):!0}},onChange:function(){m.resetSelection(!1);h.delayFunc(function(){var a=s.val();m.search(a)},g.requestTypingDelay)},resize:function(a){m.isDisabled()||i.width(a-g.searchIconMargin)},show:function(){var a=
s.val();g.visible=!0;a===""||a===g.searchPlaceholder?m.loadPreviousSearchSuggestions():g.someResults?i.addClass("shown"):(a=s.val(),m.search(a))},hide:function(){i.removeClass("shown");g.visible=!1},showLoading:function(){i.addClass("shown");o.empty();i.append(r)},hideLoading:function(){r.remove()},enable:function(){g.enabled=!0},disable:function(){g.enabled=!1},isDisabled:function(){return!g.enabled||!g.weblabActive},search:function(b){b=b.trim();if(!m.invalid(b)){var c=++g.lastRequestId;b===""?
m.showSearchResults(c,!1,[],b):(m.showLoading(),m.instrumentRequest(),a.get(g.serviceUrl+encodeURIComponent(b)+"/",{dataType:"json"},e.$.proxy(function(a,b,c){m.showSearchResults(a,!0,b,c.data)},null,c,b),function(){m.hide();m.instrumentFailure()}))}},invalid:function(a){return m.isDisabled()||!g.enabledSearchSuggestions||a===g.lastQuery||a===g.searchPlaceholder},showSearchResults:function(a,b,c,d){if(!m.isDisabled()&&a===g.lastRequestId)m.hideLoading(),g.lastQuery=c,m.displayResults(d,b)},displayResults:function(a,
b){if(!m.isDisabled())if(b&&m.instrumentResponse(a.length),!a||a.length===0)o.empty(),i.removeClass("shown"),g.someResults=!1;else{g.someResults=!0;var c=s.val();o.empty();var d=1,f=Object.keys(j).map(function(a){return j[a]});g.inPHWeblab&&f.sort(function(a,b){return a.priority-b.priority});f.forEach(function(b){var f=m.getFilteredResults(b,a);f.forEach(function(a,f){b.title&&f===0&&o.append('<span class="suggestion-group-title">'+b.title+('<span class="spaui-sprite spaui-suggestion-icon spaui-suggestion-icon-'+
b.kind+'"></span>')+"</span>");o.append(m.generateSearchSuggestionItem(c,a,b,a.link,a.topicId,d));d++});b.lineBreak&&f.length>0&&o.append('<div class="suggestion-group-separator">')});g.lastSearchQuery=c;g.lastNumResults=d-1;m.determineShow();m.resetSelection();m.rebindList(d)}},determineShow:function(){g.visible?i.addClass("shown"):i.removeClass("shown")},getFilteredResults:function(a,b){return b.filter(function(b){return b.kind===a.resultKind}).slice(0,a.number).map(function(b){var c=m.getTopicIDFromResult(b),
d=m.generateLinkText(a,b,c);return e.$.extend(b,{topicId:c,link:d})}).filter(function(a){return a.link!==null})},getTopicIDFromResult:function(a){try{var b=null,c=JSON.parse(a.data);e.$.isArray(c)?b=c[0].HELP_TOPIC_ID:typeof c==="number"&&(b=c);return b}catch(d){return null}},generateLinkText:function(a,b,c){var d="/hz/help/search?query="+b.text;if(a.resultKind==="SellerCentralTool")try{d=JSON.parse(b.data).ToolPath}catch(f){return null}else if(m.isHelpArticle(a))if(c)d="/gp/help/"+c;else return null;
return d},generateSearchSuggestionItem:function(a,b,c,d,f,g){a=m.getHighlightedContent(a,b.text);d=e.$('<a class="spaui-suggestion-'+c.kind+'" href="'+d+'">'+a+"</a>");d.addClass("result-link");d.attr("data-name",b.text);d.attr("data-kind",c.kind);d.attr("data-rank",g);f!==null&&m.isHelpArticle(c)&&d.attr("data-topic-id",f);return d},isHelpArticle:function(a){return a.resultKind==="PredictiveHelp"||a.resultKind==="PredictiveHelpAuto"},handleSpecialSuggestionSelection:function(a,b){var d=!1;if(a.hasClass("spaui-suggestion-tool"))h.redirect(a.attr("href")),
c.setPinned(!1),b.preventDefault(),d=!0;else if(a.hasClass("spaui-suggestion-help")||a.hasClass("spaui-suggestion-autohelp"))d=h.gda(a,"topic-id"),g.invokeSearchFunc(d),m.hide(),b.preventDefault(),d=!0;return d},rebindList:function(a){o.find(".result-link").each(function(){e.$(this).attr("data-total",a-1)});o.find("a").mousedown(function(){g.dontHideOnNextBlur=!0});o.find("a").click(function(a){m.instrumentClick(this);var b=e.$(this);if(b.hasClass("spaui-suggestion-history")||b.hasClass("spaui-suggestion-previous-search"))return s.val(h.gda(b,
"name")),g.invokeSearchFunc(),m.hide(),a.stopImmediatePropagation(),!1;else m.handleSpecialSuggestionSelection(b,a)})},getHighlightedContent:function(a,b){var a=a.replace(/\W+/g," "),a=a.replace(/\s+/g," "),c=a.split(" "),d={},f;for(f in c)if(c.hasOwnProperty(f)){var e=c[f];d.hasOwnProperty(e)||e===""||(d[e]=!0)}c=Object.keys(d).join("|");return b.replace(RegExp("("+c+")","gi"),'<span class="highlight_text">$1</span>')},instrumentClick:function(a){a&&m.instrumentSend("result-selected",{query:s.val(),
name:h.gda(a,"name"),kind:h.gda(a,"kind"),rank:h.gda(a,"rank"),total:h.gda(a,"total")})},instrumentRequest:function(){m.instrumentSend("request",{query:s.val()})},instrumentResponse:function(a){m.instrumentSend("response",{query:s.val(),total:a})},instrumentFailure:function(){m.instrumentSend("request-error",{query:s.val()})},instrumentSend:function(a,c){d.send({from:g.externalPlace?g.externalPlace:b.getFrom(),to:a,where:d.getContext("searchSuggestions"),additionalObj:c})},resetSelection:function(a){g.selectedResult=
null;m.changeSelection(a)},moveSelectionDown:function(){if(g.selectedResult===null)g.selectedResult=0;else if(g.selectedResult++,g.selectedResult>=g.lastNumResults)g.selectedResult=null;m.changeSelection()},moveSelectionUp:function(){if(g.selectedResult===null)g.selectedResult=g.lastNumResults-1;else if(g.selectedResult--,g.selectedResult<0)g.selectedResult=null;m.changeSelection()},changeSelection:function(a){a=a===void 0?!0:a;o.find("a").removeClass("selected-result");var b=s.val(),c=g.lastSearchQuery;
g.selectedResult!==null&&g.selectedResult>=0&&g.selectedResult<g.lastNumResults&&(c=m.getSelectedSuggestion(),c.addClass("selected-result"),c=h.gda(c,"name"));a&&b!==c&&s.val(c)},getSelectedSuggestion:function(){return g.selectedResult===null?null:o.find("a").eq(g.selectedResult)},loadPreviousSearchSuggestions:function(){var a=[];c.getLastSearches().forEach(function(b){a.push({kind:"previous",text:b})});m.displayResults(a,!1)},overrideConfig:function(a){g=e.$.extend({},g,a)}};return{overrideConfig:m.overrideConfig,
hide:m.hide,showLoading:m.showLoading,hideLoading:m.hideLoading,enable:m.enable,disable:m.disable,newBind:m.newBind,resize:m.resize,init:m.init}});ASPP.when("ASPA","spaui-debug","spaui-metrics","spaui-history","spaui-util","spaui-events").register("spaui-session",function(e,h,d,b,c){var a={id:null,data:{article:{topicID:null,link:null},closeAffordance:{show:!0},pinned:{is:!1},preview:{show:!0},size:{large:!1},lastSearches:[],dismissed:!1,timeSellerViewingArticle:null,deflectionVisitId:null,contactUsLinkClicked:!1}},
f={init:function(){h.log("spaui-session init()");if(d.getSession())h.info("setting "+d.getSession()+" as session key."),a.id=d.getSession();if(typeof JSON==="undefined"||typeof localStorage==="undefined")h.error("No localStorage on init."),d.send({from:b.getFrom(),to:"localStorage",where:"info",additional:"&additionalMetadata=no-session-storage-support"});else{try{var c=JSON.parse(localStorage.getItem("spaui"));h.info("storage:");h.dir(c);f.updateCfgData(c)}catch(e){}h.info("cfg.session:");h.dir(a)}},
updateCfgData:function(b){b.id&&b.id===a.id?(h.info("EXISTING SESSION: use session data from non-expired key: "+a.id),a.data=e.$.extend(!0,{},a.data,b.data)):(h.info("session is expired or nonexistent. use new key: "+a.id),localStorage.removeItem("spaui"))},returnTopicID:function(){return a.data.article.topicID},returnTopicURL:function(){return a.data.article.link},returnSize:function(){return a.data.size.large},returnPinned:function(){return a.data.pinned.is},returnPreview:function(){return a.data.preview.show},
setPreview:function(b){a.data.preview.show=b;f.update()},setPinned:function(b){a.data.pinned.is=b;f.update()},setTopicID:function(b){a.data.article.topicID=b;f.update()},setTopicURL:function(b){a.data.article.link=b;f.update()},returnCloseAffordance:function(){return a.data.closeAffordance.show},setCloseAffordance:function(b){a.data.closeAffordance.show=b;f.update()},setSize:function(b){a.data.size.large=b;f.update()},setTopic:function(a){f.setTopicID(a);f.setTopicURL(a)},update:function(){typeof localStorage===
"undefined"?h.error("No localStorage. Instrument?"):typeof JSON==="undefined"?h.error("No JSON. Instrument?"):localStorage.setItem("spaui",JSON.stringify(a))},getLastSearches:function(){return a.data.lastSearches},getWasDismissed:function(){return a.data.dismissed},setWasDismissed:function(b){a.data.dismissed=b;f.update()},getTimeSellerViewingArticle:function(){return a.data.timeSellerViewingArticle},setTimeSellerViewingArticle:function(b){a.data.timeSellerViewingArticle=b;f.update()},revertSellerToInfoCard:function(){f.setTopic(null)},
storeSearchQuery:function(b){a.data.lastSearches.unshift(b);a.data.lastSearches=c.getUniqueArray(a.data.lastSearches);a.data.lastSearches.splice(3,a.data.lastSearches.length);f.update()},setDeflectionCardVisitId:function(b){a.data.deflectionVisitId=b;f.update()},getDeflectionCardVisitId:function(){return a.data.deflectionVisitId},setContactUsLinkClicked:function(b){a.data.contactUsLinkClicked=b;f.update()},getContactUsLinkClicked:function(){return a.data.contactUsLinkClicked}};return{setTopic:f.setTopic,
setCloseAffordance:f.setCloseAffordance,getCloseAffordance:f.returnCloseAffordance,setTopicID:f.setTopicID,setSize:f.setSize,setTopicURL:f.setTopicURL,setPinned:f.setPinned,setPreview:f.setPreview,getPreview:f.returnPreview,getPinned:f.returnPinned,getSize:f.returnSize,getTopicID:f.returnTopicID,getTopicURL:f.returnTopicURL,getLastSearches:f.getLastSearches,getWasDismissed:f.getWasDismissed,setWasDismissed:f.setWasDismissed,getTimeSellerViewingArticle:f.getTimeSellerViewingArticle,setTimeSellerViewingArticle:f.setTimeSellerViewingArticle,
revertSellerToInfoCard:f.revertSellerToInfoCard,storeSearchQuery:f.storeSearchQuery,updateCfgData:f.updateCfgData,init:f.init,setDeflectionCardVisitId:f.setDeflectionCardVisitId,getDeflectionCardVisitId:f.getDeflectionCardVisitId,setContactUsLinkClicked:f.setContactUsLinkClicked,getContactUsLinkClicked:f.getContactUsLinkClicked}});ASPP.register("spaui-shim",function(){var e={init:function(){e.objectKeys();e.trim();e.endsWith();e.arrayIndexOf();e.foreach();e.filter();e.include();e.map()},objectKeys:function(){if(!Object.keys)Object.keys=
function(e){var d=[],b;for(b in e)e.hasOwnProperty(b)&&d.push(b);return d}},trim:function(){typeof String.prototype.trim!=="function"&&Object.defineProperty(String.prototype,"trim",{value:function(){return this.replace(/^\s+|\s+$/g,"")}})},endsWith:function(){String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,d){var b=this.toString();if(typeof d!=="number"||!isFinite(d)||Math.floor(d)!==d||d>b.length)d=b.length;d-=e.length;b=b.indexOf(e,d);return b!==-1&&
b===d}})},arrayIndexOf:function(){Array.prototype.indexOf||Object.defineProperty(Array.prototype,"indexOf",{value:function(e,d){var b;if(this===null||this===void 0)throw new TypeError('"this" is null or not defined');var c=Object(this),a=Math.abs(c.length);if(a===0)return-1;b=+d||0;Math.abs(b)===Infinity&&(b=0);if(b>=a)return-1;for(b=Math.max(b>=0?b:a-Math.abs(b),0);b<a;){if(b in c&&c[b]===e)return b;b++}return-1}})},foreach:function(){Array.prototype.forEach||Object.defineProperty(Array.prototype,
"forEach",{value:function(e,d){var b,c;if(this===null)throw new TypeError(" this is null or not defined");var a=Object(this),f=a.length>>>0;if(typeof e!=="function")throw new TypeError(e+" is not a function");arguments.length>1&&(b=d);for(c=0;c<f;){var k;c in a&&(k=a[c],e.call(b,k,c,a));c++}}})},filter:function(){Array.prototype.filter||Object.defineProperty(Array.prototype,"filter",{value:function(e){if(this===void 0||this===null)throw new TypeError;var d=Object(this),b=d.length>>>0;if(typeof e!==
"function")throw new TypeError;for(var c=[],a=arguments.length>=2?arguments[1]:void 0,f=0;f<b;f++)if(f in d){var k=d[f];e.call(a,k,f,d)&&c.push(k)}return c}})},include:function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,d){var b=Object(this),c=parseInt(b.length,10)||0;if(c===0)return!1;var a=parseInt(d,10)||0;a>=0||(a=c+a,a<0&&(a=0));for(var f;a<c;){f=b[a];if(e===f||e!==e&&f!==f)return!0;a++}return!1}})},map:function(){Array.prototype.map||Object.defineProperty(Array.prototype,
"map",{value:function(e,d){var b,c,a;if(this===null)throw new TypeError(" this is null or not defined");var f=Object(this),k=f.length>>>0;if(typeof e!=="function")throw new TypeError(e+" is not a function");arguments.length>1&&(b=d);c=Array(k);for(a=0;a<k;){var g;a in f&&(g=f[a],g=e.call(b,g,a,f),c[a]=g);a++}return c}})}};return{init:e.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-theming").register("spaui-state",function(e,h,d,b){var c,a,f,k,g,j,l,i={showBrowseAllHelpOnLoad:!0},o={autoSummonParam:"spaui-auto-summon",
helpSummonParam:"spaui-help-topic"},r={init:function(a){h.log("spaui-state init()");r.initCfg(a);r.override()},initCfg:function(b){c=b.location.search.split(/[\?&]+/);a=encodeURIComponent(document.getElementsByTagName("title")[0].innerHTML);f=b.location.pathname.split(/\/ref=/)[0];k=encodeURIComponent(b.location.hash);g="";j={title:"spaui",url:"spaui-url",spauiDebug:"spauiDebug",auiDebug:"1",stringDebug:"true",auiReset:"1",athenaNotificationMockType:void 0};l=b.location.search},override:function(){var b=
c.length,e,h={};for(e=0;e<b;e++){var i=c[e].split(/\=/);i[0]===j.title&&(a=i[1]);i[0]===j.url&&(f=i[1]);i[0]===j.spauiDebug?(h.spauiDebug="1",h.auiDebug="1",h.auiReset="1"):i[0]in j&&(h[i[0]]=j[i[0]]||i[1])}g=d.formatObjectAsUrlParams(h,!0)},getState:function(a){return i[a]},setState:function(a,b){i[a]=b},isParamPresent:function(a){return l.indexOf(a)!==-1},isOnUrl:function(a){return a instanceof RegExp?a.test(f):f.indexOf(a)!==-1},isAnySummoningParamPresent:function(){for(var a=Object.keys(o),b=
0;b<a.length;b++)if(r.isParamPresent(o[a[b]]))return!0;return!1},getParamValue:function(a){var b=l,c=b.indexOf(a);if(!(c<0))return a=b.indexOf("=",c),c=b.indexOf("&",c),a<0||a>c&&c>-1?void 0:c<0?b.substring(a+1):b.substring(a+1,c)},enhanceUrl:function(c){c=c.split("#");c[0]+=c[0].indexOf("?")!==-1?c[0].endsWith("&")?"":"&":"?";c[0]=c[0]+"pageTitle="+a+"&pageUrl="+f+"&pageHash="+k+g+"&theme="+b.getTheme();return c.join("#")}};return{init:r.init,showBrowseAllHelpOnLoad:e.$.proxy(r.getState,null,"showBrowseAllHelpOnLoad"),
setShowBrowseAllHelpOnLoad:e.$.proxy(r.setState,null,"showBrowseAllHelpOnLoad"),isParamPresent:r.isParamPresent,isAnySummoningParamPresent:r.isAnySummoningParamPresent,getParamValue:r.getParamValue,summoningParams:o,enhanceUrl:r.enhanceUrl,isOnUrl:r.isOnUrl}});ASPP.when("ASPA").register("spaui-theming",function(e){var h="",d=!1,b=!1,c=999,a={NEW_SELLER_THEME:"new-seller-theme",TWELVE_MONTH_THEME:"twelve-month-theme"};return{init:function(){var a=e.state("spaui-theming-state");h=a.theme;d=a.hideFeedbackOnInfoCard===
"true";b=a.hideAllAlerts==="true";c=parseInt(a.hideAlertLevel,10)},getTheme:function(){return h},isFeedbackDisabledOnInfoCard:function(){return d},shouldHideAlerts:function(a){return b||a>c},showPushNotification:function(){return h===a.NEW_SELLER_THEME},showShinyObject:function(){return h===a.TWELVE_MONTH_THEME},THEMES:a}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-state","spaui-history","spaui-metrics","spaui-ui","spaui-content","spaui-events","spaui-features","spaui-search","spaui-help",
"spaui-alerts","spaui-contact-deflection").register("spaui-triggers",function(e,h,d,b,c,a,f,k,g,j,l,i,o,r){var s=null,m=null,q={},x={init:function(a){h.log("triggers.init()");q.athenaHome=a.athenaHome;x.checkForAutoSummonParam();x.checkForPinRequest(d.gebi("spaui-pin-request"));x.checkForTabbedContent(d.gebi("spaui-hash"));x.addLegacyLinkClickListener(a);e.$("body ").delegate(".spaui-trigger","click",x.handleClick);window.ATHENA_DISABLE_EXTERNAL_LINK_ONCLICK=!0;a.footerContactUs&&x.bindContactUsLinks()},
bindContactUsLinks:function(){var a=d.getContactUsFooterLink();a.length===1&&(a.addClass("spaui-trigger"),a.attr("data-spaui",'{"type":"contact-us","data":{"page":"sx-athena","context":"contactusfooter"}}'),a.attr("data-href",a.attr("href")),a.removeAttr("href"))},checkForAutoSummonParam:function(){if(b.isParamPresent(b.summoningParams.autoSummonParam))f.summoner({where:a.getContext("autoSummonParam")});else if(b.isParamPresent(b.summoningParams.helpSummonParam)){var c=b.getParamValue(b.summoningParams.helpSummonParam);
i.displayHelpTopic(c,null,{where:a.getContext("autoSummonHelpParam")});f.summoner({where:a.getContext("autoSummonHelpParam"),additionalObj:{topicID:c}})}},checkForPinRequest:function(a){a&&(h.warn("FOUND PIN"),f.summoner({external:!0}));h.log("triggers.checkForPinRequest()")},checkForTabbedContent:function(a){h.log("triggers.checkForTabbedContent()");if(a&&(h.warn("FOUND HASH"),s=a,m=d.gda(s,"regex"),"onhashchange"in window))window.onhashchange=x.hashChange},hashChange:function(){var b=window.location.hash;
b.match(m)&&k.placeFeaturedAndPredictive(function(d,f){a.send({isError:!d,errorDetails:f,from:c.getFrom(),where:a.getContext("externalTrigger"),to:a.getPlace("setFeaturedContentAndPredictiveHelp"),additionalObj:{action:"tabSwitch",hash:b}})})},handleClick:function(a){if(typeof JSON!=="undefined")try{var b=JSON.parse(d.gda(a.currentTarget,"spaui"));b.data.href=a.currentTarget.href;b.type==="topic"&&(a.preventDefault(),x.placeTopic(b.data));b.type==="page"&&(a.preventDefault(),x.placePage(b.data));
b.type==="search"&&(a.preventDefault(),x.placeSearch(b.data));if(b.type==="forum")return h.error("no forums yet."),{error:"forums are not yet supported."};b.type==="contact-us"&&x.handleContactUs(a,b.data);f.getVisible()||f.summoner({external:!0})}catch(c){}},handleContactUs:function(b){b.preventDefault();var d=f.getVisible(),e=r.isActive();!d&&!e?(q.athenaHome({preventDefault:function(){}}),b=a.getPlace("setContactUsFooter")):b=a.getPlace("disabledGetSupportClick");d||f.summoner({external:!1});e?
r.displayDeflectionCard(a.getContext("scFooter"),!d):a.send({from:c.getFrom(),to:b,where:a.getContext("trigger")})},placeTopic:function(b){i.displayHelpTopic(b.id,b.href,{where:a.getContext("externalTrigger"),additionalObj:{client:b.page,context:b.context}},b.bookmark)},placePage:function(b){var c=b.id.toLowerCase();if(c==="home")if(f.isSummoned())g.publish(g.getName("goHome"));else{var d=function(){g.publish(g.getName("goHome"));g.unsubscribe("summon",d)};g.subscribe("summon",d)}else b={where:a.getContext("externalTrigger"),
additionalObj:{page:b.page,context:b.context}},c==="browse"&&i.displayBrowseAllHelp(b),c==="alerts"&&o.displayAllAlerts(b)},placeSearch:function(b){l.externalSubmitSearch(decodeURIComponent(b.query),{where:a.getContext("externalTrigger"),additionalObj:{client:b.page,context:b.context}})},parseLinkHref:function(){var a=/openModalDialog\('(.*)'\)/,b=/itemID=?([0-9]+)/,c=[window.location.protocol,"//",window.location.hostname,"/"].join("");return function(d){var d=(a.exec(d)||[])[1],f=(b.exec(d)||[])[1];
return!d||!f?!1:{href:[c,"gp/help/help-popup.html?itemID=",f].join(""),id:f}}}(),handleLegacyLinkClick:function(a){if(typeof a!=="object"||!a.target)return!1;a=x.parseLinkHref(a.target.href);if(typeof a!=="object")return!1;x.placeTopic({id:a.id,page:"campaign-manager",context:"page",href:a.href,bookmark:""});f.getVisible()||f.summoner({external:!0});return!0},addLegacyLinkClickListener:function(a){a=a||{};a.location=a.location||{};var b=a.location.pathname||window.location.pathname,a=(a.location.hash||
window.location.hash).indexOf("#/hz/cm")===0;if(b.indexOf("/hz/cm")!==0&&!a)return!1;e.$(document).bind("click",function(a){x.handleLegacyLinkClick(a)&&a.preventDefault()});return!0}};return{init:x.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-session","spaui-history","spaui-metrics","spaui-predictive","spaui-search-suggestions","spaui-featured-content","spaui-events","spaui-theming").register("spaui-ui",function(e,h,d,b,c,a,f,k,g,j,l){var i,o,r,s,m,q,x,u,n,A,v,z,t=!1,C=null,D=0,p=!1,
E=!1,y={init:function(a){h.log("spaui-ui init()");y.hydrate(a);y.bind();y.handleSpooferBar()},hydrate:function(a){i=e.$(window);o=a;r=a.find(".spaui-head-controls-search");s=a.find(".spaui-head-controls-search #spaui-search-icon");m=a.find(".spaui-head-controls-pop");a.find("#spaui-head-controls");q=a.find("#spaui-close");x=a.find("#spaui-head-controls-close-affordance");u=e.$("#sc-quicklink-help").find("a");n=e.$("#helpMenuID").find("a");A=a.find("#spaui-resize");v=e.$("#athena-controlled-width-area");
z=e.$("#globalActionBar");v.length!==0&&(p=!0);C=410},bind:function(){u.click(y.summon);n.click(y.summon);q.click(y.banish);x.hover(y.closeAffordHover);u.hover(y.triggerHover);A.click(y.resize);z.length!==0&&i.scroll(y.windowScroll)},initialState:function(){b.getSize()?y.makeLarge():y.makeSmall()},summon:function(a){a.preventDefault();j.publish(j.getName("triggerSummon"));y.summoner({})},summoner:function(a){y.isSummoned()||(t=!0,o.css("display","block"),y.setSize(C),p&&v.animate({width:C},200),o.animate({marginRight:0},
200,function(){y.summoned(a)}))},summoned:function(d){h.group("summoned()");b.setPinned(!0);b.setPreview(!1);var f="";d.where?f=d.where:(f=d.session?a.getContext("session"):a.getContext("trigger"),d.external&&(f=a.getContext("externalTrigger")));var g={theme:l.getTheme()};d.additionalObj&&e.$.extend(g,d.additionalObj);a.send({from:c.getFrom(),to:a.getPlace("setAthenaSummoned"),where:f,additionalObj:g});E=!0;t=!1;y.closeAffordance();j.publish(j.getName("summon"));h.groupEnd()},banish:function(a){a.preventDefault();
b.setWasDismissed(!0);y.banisher()},banisher:function(a){j.publish(j.getName("dismissed"));t||(t=!0,p&&v.animate({width:0},300),o.animate({marginRight:"-="+C},300,function(){y.banished(a)}))},banished:function(d){h.group("banished()");o.css("display","none");b.setPinned(!1);d=e.$.extend({from:c.getFrom(),where:a.getContext("header"),to:a.getPlace("setAthenaBanished")},d);a.send(d);t=E=!1;h.groupEnd()},isSummoned:function(){return t||E},resize:function(a){a.preventDefault();y.resizer(a)},resizer:function(){b.getSize()?
y.makeSmall(!0):y.makeLarge(!0)},makeSmall:function(c){c&&b.getSize()&&a.setSizeActive(a.getPlace("setSizeSmall"));b.setSize(!1);A.removeClass("spaui-resize-large");y.setSize(410)},makeLarge:function(c){c&&!b.getSize()&&a.setSizeActive(a.getPlace("setSizeLarge"));b.setSize(!0);A.addClass("spaui-resize-large");y.setSize(y.calculateLargeWidth())},setSize:function(a,b){C=a;var c=y.getSearchSize(C);E?(p&&v.animate({width:C},250),b||o.animate({width:C},250,y.resized),r.animate({width:c},250).css("overflow",
"visible")):(o.css("margin-right","-"+C+"px"),o.width(C),r.width(c));k.resize(c+s.width()-1)},resized:function(){var b="<style>";b+="#spaui {width:"+C+"px;}";b+="#spaui-next {right:-"+C+"px;}";b+="#spaui-prev {right:"+C+"px;}";b+="</style>";d.gebi("spaui-css-override").innerHTML=b;b=a.getPlace("setSizeActive");b!==""&&a.send({from:c.getFrom(),to:b,where:a.getContext("header")})},getSearchSize:function(a){a-=30;m.css("display")!=="none"&&(a-=26);a-=26;a-=y.getCloseIconSize();a-=8;return a},closeAffordance:function(){b.getCloseAffordance()&&
(b.setCloseAffordance(!1),x.show(),setTimeout(y.closeAffordStartFade,1E3))},closeAffordStartFade:function(){x.addClass("spaui-fade");setTimeout(y.closeAffordAfterFade,1250)},closeAffordAfterFade:function(){x.remove()},closeAffordHover:function(){x.remove()},triggerHover:function(a){if(a.type==="mouseenter")a.currentTarget.style.color="#e47911",a.currentTarget.style.cursor="pointer";if(a.type==="mouseleave")a.currentTarget.style.color="",a.currentTarget.style.cursor="auto"},calculateLargeWidth:function(){var a=
Math.min(parseInt((i.width()-410)*0.4+410,10),575);a<=410&&(a=411);return a},returnVisible:function(){return E},handleSpooferBar:function(){d.gebi("spooferDiv")&&setTimeout(function(){D=e.$("#spooferDiv").outerHeight();o.css("top",D)},300)},windowScroll:function(){var a=0,a=z.length!==0&&z.css("position")==="fixed"?z.outerHeight():D;o.css("top",a)},scrollToHash:function(a){var b;a.toLowerCase()==="top"?e.$("#spaui-content").scrollTop(0):(b=e.$("#spaui"),d.gebi(a)&&e.$("#spaui-content").find('a[name="'+
a+'"]').length>0?(h.info("links.helpContent(): We have an ID & an Name attribute, use ID."),d.updateScrollTop(b.find("#"+a),55)):(d.gebi(a)&&(h.info("links.helpContent(): We have just an ID."),d.updateScrollTop(b.find("#"+a),55)),e.$("#spaui-content").find('a[name="'+a+'"]').length>0&&(h.info("links.helpContent(): We have just a name attribute."),d.updateScrollTop(b.find('a[name="'+a+'"]'),70))))},contentChanged:function(){var a=y.getSearchSize(C);r.animate({width:a},void 0).css("overflow","visible")},
hideClose:function(){q.css("display","none");r.css("right","auto")},showClose:function(){q.css("display","");r.css("right","")},getCloseIconSize:function(){return q.css("display")!=="none"?44:13}};return{scrollToHash:y.scrollToHash,summon:y.summon,summoner:y.summoner,banish:y.banish,banisher:y.banisher,resize:y.resize,getVisible:y.returnVisible,getLargeWidth:y.calculateLargeWidth,makeSmall:y.makeSmall,makeLarge:y.makeLarge,isSummoned:y.isSummoned,initialState:y.initialState,contentChanged:y.contentChanged,
hideClose:y.hideClose,showClose:y.showClose,init:y.init}});ASPP.when("ASPA","spaui-shim").register("spaui-util",function(e){var h=null,d={init:function(b){h=b},textareaFocusPlaceholderFix:function(b){b.attr("placeholder")===b.val()&&b.val("")},returnTopicIDFromLocation:function(){return d.returnTopicIDFromLink(h.location.href)},returnTopicIDFromLink:function(b){var c,a=/\/help\/([\d]+)/;b.match(a)&&b.match(a)[1]&&(c=b.match(a)[1]);for(var a=b.split(/[\?&]+/),d=a.length,b=0;b<d;b++){var e=a[b].split("=");
e[0]==="itemID"&&(e=e[1].match(/^([0-9]+).*/),e!==null&&(c=e[1]))}return c},updateScrollTop:function(b,c){e.$("#spaui").find("#spaui-content").scrollTop(b.offset().top-c)},isOnArticle:function(){var b=!1,c=h.location.href,a=/\/help\/([\d]+)/;c.match(a)&&c.match(a)[1]&&(b=!0);for(var a=c.split(/[\?&]+/),d=a.length,c=0;c<d;c++)a[c].split("=")[0]==="itemID"&&(b=!0);return b},exposejQuery:function(){if(typeof h.$!=="function")h.$=e.$},gda:function(b,c){return b.attr?b.attr("data-"+c):b.data?b.data(c):
b.dataset?b.dataset[c]:b.getAttribute("data-"+c)},gebi:function(b){return document.getElementById(b)},delayInit:function(){var b=0;return function(c,a){clearTimeout(b);b=setTimeout(c,a)}},startsWith:function(b,c){var a=!1;b.substr(0,c.length)===c&&(a=!0);return a},contains:function(b,c){if(typeof b==="string")if(c instanceof RegExp)return c.test(b);else if(b.indexOf(c)!==-1)return!0;return!1},handleSigninRedirect:function(b){return e.$(b).find("#signin-box").length>0&&e.$(b).find("#sign-in-button").length>
0?(h.location.reload(),!0):!1},openInNewWindow:function(b){h.open(b,"_blank").focus()},redirect:function(b){h.location=b},getUniqueArray:function(b){for(var c={},a=[],d=0,e=b.length;d<e;++d)c.hasOwnProperty(b[d])||(a.push(b[d]),c[b[d]]=1);return a},isString:function(b){return typeof b==="string"||b instanceof String},isNumber:function(b){return!isNaN(b-0)&&b!==null&&b!==""&&b!==!1},isNull:function(b){return b===null||b===void 0},formatObjectAsUrlParams:function(b,c){if(e.$.isPlainObject(b)){var a=
[],d;for(d in b)if(b.hasOwnProperty(d)){var h=b[d];h===!0?h="true":h===!1&&(h="false");c&&(h=encodeURIComponent(h));a.push(d+"="+h)}return a.length>0?"&"+a.join("&"):""}return null},getErrorDetailsFromAjaxResponse:function(b,c){var a="none";c==="error"?a=b.status===0&&b.readyState===0?"abort":b.status===500?"server-error":"unknown-error":c==="abort"&&(a="abort");return{type:a,jqueryStatus:c,httpStatus:b.status,readyState:b.readyState}},getUid:function(){function b(){return Math.floor((1+Math.random())*
65536).toString(16).substring(1)}return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()},truncateString:function(b,c,a){a===void 0&&(a="");if(b===void 0||!d.isString(b)||!d.isString(a)||!d.isNumber(c))return"";c===void 0&&(c=100);return b.length>c?b.substr(0,c-a.length)+a:b},isParamPresent:function(b){return h.location.search.indexOf(b)!==-1},forEachObjectValue:function(b,c){for(var a in b)b.hasOwnProperty(a)&&c(b[a])},getElementRightOffset:function(b){var c=b.offset();return c===null?0:document.body.clientWidth-
c.left-b.width()},ensureId:function(b){if(b.length!==0&&b instanceof e.$){var c=b.attr("id");(c===""||c===void 0)&&b.attr("id",d.getUid())}},resetJqueryAnimation:function(b){b.length!==0&&b instanceof e.$&&(b.css("height",""),b.css("margin-top",""),b.css("margin-bottom",""),b.css("padding-top",""),b.css("padding-bottom",""),b.css("overflow",""))},isHashOnCurrentPage:function(b){var c=d.removeHashFromUrl(d.escape(h.location.href));return RegExp(c+"#.*$").test(b)},escape:function(b){return b.replace(/[-\/\\\^$*+?.()|\[\]{}]/g,
"\\$&")},removeHashFromUrl:function(b){return b.split("#")[0]},isHtmlElement:function(b){return typeof HTMLElement==="object"?b instanceof HTMLElement:!1},isSellerULink:function(b){return b==="201047930"},executeIf:function(b,c){return function(a){if(e.$.isFunction(b)&&b(a)||!e.$.isFunction(b)&&b)return c(a)}},executeIfElse:function(b,c,a){return function(d){return e.$.isFunction(b)&&b(d)||!e.$.isFunction(b)&&b?c(d):a(d)}},getPathArguments:function(b){var c={},b=b&&b.split("?");if(!b||b.length>2)return c;
(b[1]?b[1].split("&"):[]).forEach(function(a){a=a.split("=");c[a[0]]=a.length<2?"":a[1]});return c},getContactUsFooterLink:function(){return e.$(".sc-footer, #sc_footer").find('a[href*="contact-"]')}};return{init:d.init,startsWith:d.startsWith,contains:d.contains,delayFunc:d.delayInit(),exposejQuery:d.exposejQuery,gda:d.gda,gebi:d.gebi,getTopicIDFromLink:d.returnTopicIDFromLink,getTopicIDFromLocation:d.returnTopicIDFromLocation,handleSigninRedirect:d.handleSigninRedirect,isOnArticle:d.isOnArticle,
openInNewWindow:d.openInNewWindow,textareaFocusPlaceholderFix:d.textareaFocusPlaceholderFix,updateScrollTop:d.updateScrollTop,getUniqueArray:d.getUniqueArray,isString:d.isString,isNumber:d.isNumber,isNull:d.isNull,formatObjectAsUrlParams:d.formatObjectAsUrlParams,truncateString:d.truncateString,isParamPresent:d.isParamPresent,getErrorDetailsFromAjaxResponse:d.getErrorDetailsFromAjaxResponse,getUid:d.getUid,forEachObjectValue:d.forEachObjectValue,getElementRightOffset:d.getElementRightOffset,ensureId:d.ensureId,
resetJqueryAnimation:d.resetJqueryAnimation,redirect:d.redirect,isHashOnCurrentPage:d.isHashOnCurrentPage,isHtmlElement:d.isHtmlElement,isSellerULink:d.isSellerULink,executeIf:d.executeIf,executeIfElse:d.executeIfElse,getPathArguments:d.getPathArguments,getContactUsFooterLink:d.getContactUsFooterLink}});ASPP.when("ASPA","spaui-debug","spaui-shim","spaui-util").register("spaui-weblabs",function(e,h,d,b){var c={newSeller:"C",contactDeflection:"C",searchSuggestionPHRefactor:"C"},a={init:function(a){e.$.extend(c,
a);Object.keys(c).forEach(function(a){c[a]=c[a].toUpperCase()})},doesTreatmentEqual:function(b,d){return a.executeWithWeblab(b,function(a){return c[a]===d.toUpperCase()},function(){return!1})},getTreatment:function(b){return a.executeWithWeblab(b,function(a){return c[a]},function(){return"C"})},isControl:function(b){return a.doesTreatmentEqual(b,"C")},isAnyTreatment:function(b){return a.executeWithWeblab(b,function(a){return c[a].match(/^T[0-9]+$/)},function(){return!1})},executeWithWeblab:function(d,
e,g){return b.executeIfElse(c.hasOwnProperty(d),function(a){return e(a)},function(b){a.logMissingWeblabError(b);return g(b)})(d)},logMissingWeblabError:function(a){h.error('WEBLABS.doesTreatmentEqual failed, weblab "'+a+'" is not supported, please add it or correct it')}};return e.$.extend({init:a.init,doesTreatmentEqual:a.doesTreatmentEqual,getTreatment:a.getTreatment,isControl:a.isControl,isAnyTreatment:a.isAnyTreatment},{NEW_SELLER:"newSeller",CONTACT_DEFLECTION:"contactDeflection",SEARCH_SUGGEST_PH:"searchSuggestionPHRefactor"})});
ASPP.when("ASPA","spaui-ajax","spaui-events","spaui-shim").register("spaui-workflows",function(e,h,d){var b={},c={ID_REGEX:/workflow-id_(\S*)($|\s)/,WORKFLOW_URL:"/hz/sellerpartner/workflow?",WORKFLOW_ID:"workflowId=",CLIENT_ID:"&clientId=",TRANSITION_TIME:400,AUGUR_POPULATE_DELAY:25},a={init:function(){a.bind();a.initializeClientMapping()},bind:function(){d.subscribe(d.getName("newPage"),a.handleNewPage)},initializeClientMapping:function(){b["#_modules .workflow-placeholder"]="FullPageHelp";b[".spaui-help .workflow-placeholder"]=
"AthenaHelp"},handleNewPage:function(){var b=a.scanForWorkflows();b.length>0&&b.forEach(a.replace)},scanForWorkflows:function(){var c=[],d=function(b){return function(d,h){var i=e.$(h),i=a.stripReplacementElement(i,b);i!==null&&c.push(i)}};e.$("#_modules .workflow-placeholder").each(d(b["#_modules .workflow-placeholder"]));e.$(".spaui-help .workflow-placeholder").each(d(b[".spaui-help .workflow-placeholder"]));return c},stripReplacementElement:function(b,c){var d=a.getIdFromPossibleReplacement(b);
return d!==null?{id:d,element:b,client:c}:null},getIdFromPossibleReplacement:function(a){a=a.attr("class");a=c.ID_REGEX.exec(a);return a===null?null:a[1]},replace:function(b){h.get(c.WORKFLOW_URL+c.WORKFLOW_ID+b.id+c.CLIENT_ID+b.client,{dataType:"html"},function(c){a.flush(b.element,c.data,!0)},function(c){a.flush(b.element,c.data,!1)})},flush:function(a,b,d){var h=e.$(b);d&&h.children().size()>0?a.is(":visible")&&(h.hide(),a.replaceWith(h),setTimeout(function(){h.slideDown(c.TRANSITION_TIME)},c.AUGUR_POPULATE_DELAY)):
a.remove()},overrideConfig:function(a){e.$.extend(c,a)}};return{init:a.init,overrideConfig:a.overrideConfig}})});