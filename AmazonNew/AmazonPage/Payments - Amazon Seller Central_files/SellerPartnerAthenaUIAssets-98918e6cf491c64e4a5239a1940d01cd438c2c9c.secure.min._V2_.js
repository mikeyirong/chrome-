(window.AmazonUIPageJS?AmazonUIPageJS:P).execute(function(){ASPP.when("ASPA","spaui-util","spaui-metrics","spaui-history").register("spaui-ajax",function(f,g,d,a){var c={get:function(a,b,d,j){c.core(f.$.get,a,b,d,j)},post:function(a,b,d,j){c.core(f.$.post,a,b,d,j)},core:function(b,l,h,j,m){h=f.$.extend({url:l,data:"",dataType:void 0,payload:{}},h);b(h.url,h.data,null,h.dataType).done(function(b,e,o){if(c.isResponseHtml(o)&&g.handleSigninRedirect(b))d.send({from:a.getFrom(),where:"someAjaxRequest",
to:"responseWasLoginPage",additionalObj:{url:l}});else if(f.$.isFunction(j))h.payload.data=b,j(h.payload)}).fail(function(a,b){if(f.$.isFunction(m))h.payload.data=a,h.payload.errorStatus=b,m(h.payload)})},isResponseHtml:function(a){return(a.getResponseHeader("content-type")||"").indexOf("html")>-1},mockGet:function(a,d,f,j,g){b.get=c.mockCore(a,d,f,j,g)},mockPost:function(a,d,f,j,g){b.post=c.mockCore(a,d,f,j,g)},mockCore:function(a,b,c,d,g,i){return function(k,o,s,w){var r=function(){var g=f.$.extend({},
o.payload,{data:b});k.match(a)&&(i!==void 0&&i(o),f.$.isFunction(d)&&d(k,o,s,w),c?f.$.isFunction(w)&&w(g):f.$.isFunction(s)&&s(g))};g?setTimeout(r,g):r()}},mockFailedGet:function(a,d,f){b.get=c.mockFailedCore(a,d,f)},mockFailedPost:function(a,d,f){b.post=c.mockFailedCore(a,d,f)},mockFailedCore:function(a,b,c){return function(d,g,i,k){g=f.$.extend({},g.payload,{data:b,errorStatus:c});d.match(a)&&f.$.isFunction(k)&&k(g)}}},b={get:c.get,post:c.post,mockGet:c.mockGet,mockPost:c.mockPost,mockFailedGet:c.mockFailedGet,
mockFailedPost:c.mockFailedPost};return b});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-metrics","spaui-theming","spaui-history","spaui-content","spaui-ui","spaui-push-notification","spaui-events","spaui-discovery","spaui-state","spaui-async","spaui-grouped-alerts","spaui-eci-widget","spaui-alert-metrics","spaui-alert-util").register("spaui-alerts",function(f,g,d,a,c,b,e,l,h,j,m,i,k,o,s,w,r){var y,t,n,A,u,z={parentRequestId:null,athenaInitializedWithoutSummon:!1,onInfoCard:!1,isInfoCardLoaded:!1,
alertLoaded:!1,alertFlushed:!1,marketplaceId:null,overrideContext:null,overrideAlertId:null,alertContent:null,shinyCount:0,alertHandles:[]},q={init:function(a){g.log("spaui-alerts init()");z.marketplaceId=f.state("spaui-state").marketplaceID||f.state("spaui-state").marketplaceId;q.hydrate(a);q.bind()},hydrate:function(b){y=b;t=f.$("#sc-quicklink-help").find(".sc-ql-a").find(".sc-quick-txt");n=f.$("#spaui-template-shiny-object");j.subscribeAsyncModuleEvent("alerts",k.LOADED_EVENT,q.onLoad);j.subscribeAsyncModuleEvent("alerts",
k.COMPLETED_EVENT,q.onCompleteLoad);j.subscribe(j.getName("newPage"),q.onNewPage);j.subscribe(j.getName("initializedWithoutSummon"),q.onInitialize);j.subscribe(j.getName("dismissed"),q.onAthenaDismissed);m.register("alerts","info",!1,q.firstDiscovery);b={simpleRegister:q.registerSimpleAlert,customRegister:q.registerAlert};s.registerHandles(b);o.registerHandles(b);q.registerSimpleAlert(function(){return!0},a.getContext("alert"),a.getContext("pushNotification"))},registerSimpleAlert:function(a,b,c,
d){q.registerAlert(a,q.createInstrumentClosure(w.discover,b,c),q.createInstrumentClosure(w.read,b,c),q.createInstrumentClosure(w.dismiss,b,c),q.createInstrumentClosure(w.minimize,b,c),d)},createInstrumentClosure:function(a,b,c){return function(d){a(b,c,r.getAlertDetails(d))}},registerAlert:function(a,b,c,d,e,j){z.alertHandles.push({checkFunc:a,onDiscover:b,onOpen:c,onDismiss:d,onMinimize:e,pushConfig:j})},onLoad:function(b){z.alertLoaded=!0;z.alertContent=b?b:y.find(".spaui-alerts");f.$(z.alertContent).find(".spaui-alert").length<=
0&&q.instrumentNoAlertsToShow(a.getContext("alert"));q.attemptMastheadDisplay()},onInitialize:function(){z.athenaInitializedWithoutSummon=!0;q.attemptMastheadDisplay()},onAthenaDismissed:function(){z.onInfoCard=!1;z.athenaInitializedWithoutSummon=!0;q.attemptMastheadDisplay()},attemptMastheadDisplay:function(){if(!z.onInfoCard&&!r.isAlertsHidden()&&z.alertLoaded&&z.athenaInitializedWithoutSummon&&z.alertContent!==null){var a=f.$(z.alertContent);z.shinyCount=a.data("shiny-count");a=a.find(".spaui-alert");
if(a.length>0){z.alertContent=null;var b=q.getPushNotificationConfig(a);a.data("is-push")&&b!==!1?q.displayPushNotification(a):q.displayShinyObjectAlert(a)}}},onNewPage:function(a){a.type===e.getPageType("info")&&q.dynamicHydrate()},onCompleteLoad:function(){z.alertFlushed=!0;j.publish(j.getName("alertsLoaded"));q.dynamicHydrate();if(r.isAlertsHidden())A.hide();else if(q.isTimeToDiscover())q.onDiscover()},dynamicHydrate:function(){A=y.find("#spaui-content .spaui-alerts");A.find(".spaui-alert").each(function(){var a=
f.$(this),b=q.getIconTemplate(a),a=a.find(".spaui-alert-badge"),b=b.find(".spaui-alert-icon");a.empty();a.append(b.clone())})},bind:function(){y.delegate(".spaui-alert-toggle","click",q.toggle);y.delegate(".spaui-alert-dismiss","click",q.dismiss);y.delegate(".spaui-alert-load-all","click",q.loadAllHandle);f.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-alert-load-all","click",q.pushNotificationLoadAll)},toggle:function(a){a.preventDefault();var a=f.$(a.currentTarget),b=r.getAlertFromChild(a);
a.hasClass("spaui-alert-toggle-closed")?(a.removeClass("spaui-alert-toggle-closed").addClass("spaui-alert-toggle-open"),a.parent().find(".spaui-alert-content").css("display","block"),d.updateScrollTop(a,70),q.callAlertHandle("onOpen",b)):(a.removeClass("spaui-alert-toggle-open").addClass("spaui-alert-toggle-closed"),a.parent().find(".spaui-alert-content").css("display","none"),q.callAlertHandle("onMinimize",b))},dismiss:function(a){a.preventDefault();f.$("#spaui-alerts-icon").remove();t.css("padding-right",
"");a=r.getAlertFromChild(f.$(a.currentTarget));q.callAlertHandle("onDismiss",a);r.hideSingleAlert(r.getAlertDetails(a).id)},loadAllHandle:function(b,c){b.preventDefault();q.displayAllAlerts({where:c?a.getContext("pushNotification"):a.getContext("alert")})},displayAllAlerts:function(c){l.getVisible()||l.summoner({});var d="/hz/sellerpartner/athena-all-alerts?requestId="+a.incrementChildRequestId();e.placeEndpoint(i.enhanceUrl(d),"alerts",function(){a.send(f.$.extend({from:b.getFrom(),where:a.getContext("alert"),
to:a.getPlace("alerts")},c));q.loadAllDiscover();q.loadAllRead()})},pushNotificationLoadAll:function(a){q.loadAllHandle(a,!0)},loadAllDiscover:function(){var b=[];f.$(".spaui-alerts-all .spaui-alert-header").each(function(){b.push(d.gda(this,"id"))});b.length<=0?q.instrumentNoAlertsToShow(a.getContext("allAlerts")):w.massDiscover(a.getContext("allAlerts"),b);q.dynamicHydrate()},loadAllRead:function(){var b=[];f.$(".spaui-alerts-all .spaui-alert-header.spaui-alert-fixed").each(function(){b.push(d.gda(this,
"id"))});b.length>0&&w.massRead(a.getContext("allAlerts"),b)},onDiscover:function(){var d=A.find(".spaui-alert");if(d.length>0&&!r.isAlertsHidden()){var e=u===void 0?void 0:parseInt(u.data("priority"),10);c.shouldHideAlerts(e)?(d=r.getAlertDetails(d),a.send({from:b.getFrom(),where:a.getContext("alert"),to:a.getPlace("alertSuppressed"),payloadObj:{notificationId:d.id,notificationType:d.type,notificationName:d.name}})):(q.callAlertHandle("onDiscover",d),q.isNonToggleAlert(d)&&q.callAlertHandle("onOpen",
d))}},isTimeToDiscover:function(){return z.isInfoCardLoaded&&z.alertFlushed},isNonToggleAlert:function(a){return!r.getAlertDetails(a).expandable},firstDiscovery:function(){z.onInfoCard=!0;z.isInfoCardLoaded=!0;if(q.isTimeToDiscover())q.onDiscover()},instrumentNoAlertsToShow:function(c){a.send({from:b.getFrom(),where:c,to:a.getPlace("noAlertToShow")})},displayShinyObjectAlert:function(e,j){var o=q.getIconTemplate(e,j).find(".spaui-alert-shiny").clone(),i=d.gda(o,"priority");if(!(e!==void 0&&c.shouldHideAlerts(i))&&
!(i>=(u===void 0?999:d.gda(u,"priority")))){t.length===0&&(t=f.$("#helpMenuID .sc_quicklink"));t.length===0&&g.error("Cant find help link for alerts icon!");u!==void 0&&u.remove();u=o;t.append(o);t.css("padding-right","25px");var h=null,i=j||d.gda(e,"severity"),k=q.getSeverity(i);if(h===null||k.priority<h.priority)h=k;h&&(t.attr("aria-label","Help - "+h.ariaLabel),k=A!==void 0?A.data("shiny-count"):z.shinyCount,h.showCount&&k>0?(o.removeClass("spaui-sprite"),o.addClass("spaui-alert-shiny-count"),
o.text(k),o=o.clone(),e.find(".spaui-alert-load-all-node .spaui-alert-load-all").append(o)):k=0,a.send({from:b.getFrom(),where:a.getContext("alertShinyObject"),to:"discovered",additionalObj:{severityShow:i,count:k}}))}},getShinyIconOverrideCode:function(){return{A1F83G8C2ARO7P:"GB",A1PA6795UKMFR9:"EU",A13V1IB3VIYZZH:"EU",A1RKKUPIHCS9HS:"EU",AJZF8LZ1EJVJN:"EU",APJ6JRA9NG5V4:"EU",A3HOBANJMCMD83:"EU",A21TJRUUN4KGV:"IN",A2XZLSVIQ0F4JT:"IN",AAHKV2X7AFYLW:"SEA",A1VC38T7YXB528:"SEA"}[z.marketplaceId]||"default"},
getSeverity:function(a){return{ALERT_HIGH:{priority:0,ariaLabel:"Urgent notification",showCount:!0},ALERT_MEDIUM:{priority:1,ariaLabel:"Important notification",showCount:!0},INFORMATION:{priority:2,ariaLabel:"Information alert",showCount:!1},OPPORTUNITY:{priority:3,ariaLabel:"Oppurtunity alert",showCount:!1}}[a]},displayPushNotification:function(a){var b=a.find(".spaui-alert-toggle").text(),c=a.find(".spaui-alert-content").clone(),d=q.getPushNotificationConfig(a),a=r.getAlertDetails(a),e=h.create(b,
c,d.pushNotificationSev,d.hasMinimizeButton);e.data("id",a.id);e.data("type",a.type);e.data("name",a.name);e.data("is-push",!0);q.callAlertHandle("onDiscover",e);j.subscribe(j.getName("pushNotificationOpened"),function(){q.callAlertHandle("onOpen",e)});j.subscribe(j.getName("pushNotificationClosed"),function(){q.callAlertHandle("onDismiss",e)});j.subscribe(j.getName("pushNotificationMinimize"),function(){q.callAlertHandle("onMinimize",e)})},getPushNotificationConfig:function(a){var b={ALERT_HIGH:{type:"urgent",
pushNotificationSev:h.HIGH},OPPORTUNITY:{type:"opportunity",pushNotificationSev:h.OPPORTUNITY},ALERT_MEDIUM:{type:"alert",pushNotificationSev:h.MEDIUM},INFORMATION:{type:"info",pushNotificationSev:h.INFORMATION}}[a.data("severity")];return b?(b={type:b.type,pushNotificationSev:b.pushNotificationSev,hasMinimizeButton:!1},a=q.getAlertHandles(a),a.pushConfig&&f.$.isPlainObject(a.pushConfig)&&(b=f.$.extend({},b,a.pushConfig)),b):!1},getState:function(){return z},getIconTemplate:function(a,b){var c=q.getShinyIconOverrideCode(),
e=b||d.gda(a,"severity"),e=n.find("#"+e),c=e.find("."+c);c.length===0&&(c=e.find(".default"));return c},getAlertHandles:function(a){for(var b=0;b<z.alertHandles.length;++b){var c=z.alertHandles[b];if(c.checkFunc(a))return c}},callAlertHandle:function(a,b){var c=q.getAlertHandles(b);if(c[a]&&f.$.isFunction(c[a]))c[a](b)}};return{init:q.init,bindIrisCallsToPushNotification:q.bindIrisCallsToPushNotification,getSeverity:q.getSeverity,getState:q.getState,getShinyIconOverrideCode:q.getShinyIconOverrideCode,
getIconTemplate:q.getIconTemplate,displayShinyObjectAlert:q.displayShinyObjectAlert,displayAllAlerts:q.displayAllAlerts}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-ajax").register("spaui-alert-metrics",function(f,g,d,a){var c=null,b=[],e=[],l={iris:"DISCOVERED",alertAction:g.getPlace("alertDiscovered"),pushAction:"load",idList:b},h={iris:"READ",alertAction:g.getPlace("setAlertRead"),pushAction:"open",idList:e},j={iris:"ABORT",alertAction:g.getPlace("setAlertAbort"),pushAction:"dismiss",
idList:[]},m={iris:null,alertAction:g.getPlace("minimized"),pushAction:g.getPlace("minimized"),idList:null},i={init:function(){c=g.getParentRequestId()},instrumentMassDiscover:function(a,c){c=i.filterIdsAlreadySeen(c,b);if(c.length>0){b=b.concat(c);var e=c.join(",");i.sendIrisResponse(l.iris,e,function(){g.send({from:d.getFrom(),where:a,to:g.getPlace("alertMassDiscovered"),additionalObj:{ids:e}})})}},instrumentMassRead:function(a,b){b=i.filterIdsAlreadySeen(b,e);if(b.length>0){e=e.concat(b);var c=
b.join(",");i.sendIrisResponse(h.iris,c,function(){g.send({from:d.getFrom(),where:a,to:g.getPlace("alertMassRead"),additionalObj:{ids:c}})})}},instrumentDiscover:function(a,b,c){i.instrumentAlert(l,a,b,c)},instrumentRead:function(a,b,c){i.instrumentAlert(h,a,b,c)},instrumentDismiss:function(a,b,c){i.instrumentAlert(j,a,b,c)},instrumentMinimize:function(a,b,c){i.sendMetrics(m,a,b,c)},instrumentAlert:function(a,b,c,d){var e=a.idList;e.indexOf(d.id)===-1&&(e.push(d.id),i.sendIrisResponse(a.iris,d.id,
function(){i.sendMetrics(a,b,c,d)}))},sendMetrics:function(a,b,c,e){b=i.chooseContext(b,c,e);a=i.getAction(a,e);g.send({from:d.getFrom(),where:b,to:a,additionalObj:{isPush:e.isPush},payloadObj:{notificationId:e.id,notificationType:e.type,notificationName:e.name}})},sendIrisResponse:function(b,d,e){a.get("/hz/sellerpartner/alert/"+b+"?ids="+d+"&prid="+c,{},function(){f.$.isFunction(e)&&e()})},chooseContext:function(a,b,c){return c.isPush?b:a},getAction:function(a,b){return b.isPush?a.pushAction:a.alertAction},
filterIdsAlreadySeen:function(a,b){return a.filter(function(a){return b.indexOf(a)===-1})}};return{init:i.init,massDiscover:i.instrumentMassDiscover,massRead:i.instrumentMassRead,discover:i.instrumentDiscover,read:i.instrumentRead,dismiss:i.instrumentDismiss,minimize:i.instrumentMinimize}});ASPP.when("ASPA").register("spaui-alert-util",function(f){var g=null,d;return{init:function(a){g=a;d=f.$("#sc-quicklinks-top")},getAlertFromInnerEvent:function(a){var a=f.$(a.target),c=a.closest(".spaui-alert");
c.length===0&&(c=a.closest("#spaui-push-notification"));return c},getAlertDetails:function(a){var c={isPush:!1},b=a.find(".spaui-alert-header");if(b.length===0&&a.is("#spaui-push-notification"))c.isPush=!0,b=a;c.id=b.data("id");c.name=b.data("name");c.type=b.data("type");c.expandable=b.data("expandable");return c},getAlertFromChild:function(a){var c=a.closest(".spaui-alert");c.length===0&&(c=a.closest("#spaui-push-notification"));return c},hideSingleAlert:function(a){var c=g.find(".spaui-alerts");
c.length>0&&(c.find(".spaui-alert").length===1&&c.data("is-hidden",!0),a&&(c=c.find('.spaui-alert-header[data-id="'+a+'"]').closest("li.spaui-alert"),c.length>0&&c.fadeOut({duration:300})));c=d.find("#spaui-push-notification");if(c.length>0){var b=c.data("id")+"";a+="";b===a&&c.fadeOut({duration:300})}},isAlertsHidden:function(){var a=g.find(".spaui-alerts");return a.length>0?a.data("is-hidden")===!0:!1}}});ASPP.when("ASPA","spaui-ui","spaui-metrics","spaui-history","spaui-events","spaui-content",
"spaui-search","spaui-util","spaui-help").register("spaui-api",function(f,g,d,a,c,b,e,l,h){var j=!1,m={init:function(){m.bind()},bind:function(){window._sellerPartnerAthena=k;c.subscribe(c.getName("initialized"),function(){m.triggerLoadedEvent(g.getVisible())})},triggerLoadedEvent:function(a){if(window._sellerPartnerAthenaLoaded&&!j){j=!0;var b=window._sellerPartnerAthenaLoaded,c;for(c in b)if(b.hasOwnProperty(c)&&f.$.isFunction(b[c]))b[c](a)}},summon:function(){g.summoner({external:!0,where:d.getContext("externalApi"),
additionalObj:f.$.extend({},i)})},maybeSummon:function(){g.getVisible()||m.summon()},getTracking:function(){return{where:d.getContext("externalApi"),additionalObj:f.$.extend({},i)}},assertRegistered:function(){if(i.clientId===null||i.context===null)throw"Access to Athena's external API is restricted until you register with it by calling _sellerPartnerAthena.register([clientId], [context])";}},i={client:null,context:null},k={register:function(a,b){i.client=a;i.context=b},summon:function(){m.assertRegistered();
m.maybeSummon()},banish:function(){m.assertRegistered();g.banisher(m.getTracking())},displayHelpArticle:function(a){m.assertRegistered();h.displayHelpTopic(a,null,m.getTracking());m.maybeSummon()},displaySearchResults:function(a){m.assertRegistered();e.externalSubmitSearch(decodeURIComponent(a),m.getTracking());m.maybeSummon()},isContentInsideAthena:function(a){if(!(a instanceof f.$))if(l.isHtmlElement(a))a=f.$(a);else throw"content must be either a jQuery object (from ASPA) or an HtmlElement";return a.closest("#spaui, #spaui-push-notification").length>
0}};return{init:m.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-state","spaui-history","spaui-events","spaui-ajax").register("spaui-async",function(f,g,d,a,c,b,e){var l,h,j={},m={},i={transitionTime:400,flushable:[],onSummonAsyncElements:[],nonAsyncModules:{"featured-content":"featured-content",predictive:"predictive",alerts:"alerts"},onLoadState:null,onSummonState:null,preventFlushFlag:!1,LOADED:"loaded",QUEUED:"queued",SLIDING_UP:"slidingUp",FLUSHED:"flushed",SLIDING_DOWN:"slidingDown",
COMPLETED:"completed",LOADED_EVENT:"Loaded",COMPLETED_EVENT:"Completed"},k={init:function(a,b){g.log("async.init()");k.hydrate(a);k.bind();var c=l.find(".spaui-async-load"),d=k.splitLoadAndSummonAsync(c),c=d.immediately,d=d.onSummon;i.onLoadState=k.initialState(c);i.onSummonState=k.initialState(d);i.onSummonAsyncElements=d;i.callback=b;k.triggerLoad(c);k.loadComplete();k.loadNonAsync()},initialState:function(a){return{initialElementCount:a.length,remainingElementCount:a.length}},hydrate:function(a){l=
a;h=f.$("#spaui-template-async")},bind:function(){b.subscribe(b.getName("newPage"),k.onNewPage);b.subscribe(b.getName("summon"),k.asyncOnSummon);b.subscribe(b.getName("leavingPage"),k.onLeavePage)},onNewPage:function(){for(var a in j)if(j.hasOwnProperty(a)&&j[a]===i.FLUSHED){var b=m[a],c=l.find("#"+b);b&&c.length!==0&&(d.resetJqueryAnimation(c),k.moduleComplete(a))}k.flushNoTransition()},onLeavePage:function(){for(var a in j)if(j.hasOwnProperty(a))if(j[a]===i.SLIDING_UP)j[a]=i.QUEUED;else if(j[a]===
i.SLIDING_DOWN)j[a]=i.FLUSHED;k.preventFlush()},triggerLoad:function(a){for(var b=0;b<a.length;b++)k.asyncLoad(a[b])},splitLoadAndSummonAsync:function(a){var b=[],c=[];a.each(function(){var a=f.$(this),d=a.data("load-event"),e=a.data("module");delete i.nonAsyncModules[e];if(d==="load")b.push(a);else if(d==="summon")c.push(a);else throw"Unrecognized load event type in async module: "+d;});return{onSummon:c,immediately:b}},asyncOnSummon:function(){if(i.onSummonAsyncElements.length>0)k.triggerLoad(i.onSummonAsyncElements),
i.onSummonAsyncElements=[]},asyncLoad:function(b){var c=d.gda(b,"async-url"),j=a.enhanceUrl(c);b.attr("id")===void 0&&b.attr("id",d.getUid());var i=d.gda(b,"load-event");g.log("attempting to load "+j);e.get(j,{dataType:"html"},function(a){k.asyncSuccess(b,a.data,c,i)},function(a){k.asyncError(b,a,c,i)})},transitionAsyncElement:function(a,b,c,e){var h=f.$(b);e?(k.replaceAndFlush(a,h,c),k.moduleComplete(c)):(j[c]=i.SLIDING_UP,a.slideUp(i.transitionTime,function(){if(j[c]===i.SLIDING_UP)h.hide(),k.replaceAndFlush(a,
h,c),d.ensureId(h),m[c]=h.attr("id"),j[c]=i.SLIDING_DOWN,h.slideDown(i.transitionTime,function(){j[c]===i.SLIDING_DOWN&&k.moduleComplete(c)})}))},replaceAndFlush:function(a,b,c){a.replaceWith(b);k.removeModuleFromFlushQueue(c)},moduleComplete:function(a){j[a]=i.COMPLETED;b.publishAsyncModuleEvent(a,i.COMPLETED_EVENT)},attemptFlush:function(a,c){var d=a.data("module"),e="#"+a.attr("id");i.flushable.push({selector:e,replacement:c,module:d});j[d]=i.QUEUED;b.publishAsyncModuleEvent(d,i.LOADED_EVENT,c);
e=l.find(e);!i.preventFlushFlag&&e.size()>0&&k.transitionAsyncElement(e,c,d)},asyncSuccess:function(a,b,c,d){g.log("async success fetching "+c);k.attemptFlush(a,b);k.attemptLoadComplete(d)},asyncError:function(a,b,c,e){g.log("async failure fetching "+c);d.getErrorDetailsFromAjaxResponse(b.data,b.errorStatus).type!=="abort"&&(b=a.data("template"),b=k.getTemplateHtmlString(b),k.attemptFlush(a,b),k.attemptLoadComplete(e))},getTemplateHtmlString:function(a){a=h.find("#"+a);return a.length>0?a[0].outerHTML:
""},attemptLoadComplete:function(a){a==="summon"?i.onSummonState.remainingElementCount--:i.onLoadState.remainingElementCount--;k.loadComplete()},loadComplete:function(){k.isTimeToCallback()&&i.callback!==void 0&&i.callback()},isTimeToCallback:function(){return i.onLoadState.remainingElementCount<=0&&i.onSummonState.remainingElementCount<=0},loadNonAsync:function(){d.forEachObjectValue(i.nonAsyncModules,function(a){b.publishAsyncModuleEvent(a,i.LOADED_EVENT,null);b.publishAsyncModuleEvent(a,i.COMPLETED_EVENT)})},
getFlushableState:function(){return i.flushable},flushNoTransition:function(){i.preventFlushFlag=!1;i.flushable.forEach(function(a){var b=l.find(a.selector);b.length>0&&k.transitionAsyncElement(b,a.replacement,a.module,!0)})},removeModuleFromFlushQueue:function(a){i.flushable=i.flushable.filter(function(b){return b.module!==a})},preventFlush:function(){i.preventFlushFlag=!0},setTransitionTime:function(a){i.transitionTime=a}};return{init:k.init,getFlushableState:k.getFlushableState,setTransitionTime:k.setTransitionTime,
LOADED_EVENT:i.LOADED_EVENT,COMPLETED_EVENT:i.COMPLETED_EVENT}});ASPP.when("ASPA","spaui-debug","spaui-history","spaui-metrics","spaui-session","spaui-state","spaui-triggers","spaui-ui","spaui-util","spaui-content","spaui-search","spaui-feedback","spaui-alerts","spaui-links","spaui-predictive","spaui-shim","spaui-global-nav-search","spaui-hmd","spaui-featured-content","spaui-async","spaui-theming","spaui-intercept-card","spaui-forums","spaui-push-notification","spaui-eci-widget","spaui-events","spaui-features",
"spaui-weblabs","spaui-discovery","spaui-api","spaui-help","spaui-linkcopy","spaui-direct-answer","spaui-contact-deflection","spaui-alert-util","spaui-alert-metrics","spaui-expand","spaui-grouped-alerts","spaui-workflows","spaui-rightclick","ready").register("spaui",function(f,g,d,a,c,b,e,l,h,j,m,i,k,o,s,w,r,y,t,n,A,u,z,q,C,D,p,E,x,K,I,L,F,J,M,N,O,Q,R,S){var v={animation:{duration:{previewFadeOut:400,backAnimate:50,contentFadeIn:300,fbConfirm:2E3},distance:410},$dom:{},preview:{show:!0,dismiss:"/hz/sellerpartner/preview-card/dismiss"},
template:{next:'<div id="spaui-next"></div>',prev:'<div id="spaui-prev"></div>',current:'<div id="spaui-content" class="spaui-content spaui-new spaui-hide" tabindex="-1"></div>',searchLoader:'<div id="scroll-loader" class="scroll-loader"><div class="spaui-content-loading"></div></div>'}},G=null,H,B={init:function(f){w.init();g.group("init()");g.warn(f);g.groupEnd();d.init();b.init(window);h.init(window);h.exposejQuery();x.init();O.init();B.hydrate();B.bind();E.init(f.weblabs);a.init(f.instrumentation);
c.init();S.init(v.$dom.spaui);l.init(v.$dom.spaui);K.init();I.init(v.$dom.spaui);j.init(v.$dom.spaui,f.serverUrl.url,f.sellerU.ids,f.helpContentJSWhitelist.ids);L.init(v.$dom.spaui,f.serverUrl.url);m.init(v.$dom.spaui,f.enableSearchSuggestions.enabled,f.navSearchWeblab.treatment);q.init(v.$dom.spaui);i.init(v.$dom.spaui);y.init(v.$dom.spaui);z.init(v.$dom.spaui);B.preview(f.preview);e.init({athenaHome:B.home,footerContactUs:f.footerContactUsWeblab.treatment});A.init();M.init(v.$dom.spaui);N.init();
k.init(v.$dom.spaui);C.init(v.$dom.spaui);o.init(v.$dom.spaui,f.enableForumsCard.enabled,f.disableContactUsWeblabText);s.init(v.$dom.spaui);t.init(v.$dom.spaui);u.init(v.$dom.spaui);F.init(v.$dom.spaui);J.init(v.$dom.spaui);Q.init(v.$dom.spaui);R.init();n.init(v.$dom.spaui,function(){});B.initialState()},hydrate:function(){v.$dom.doc=f.$(document);v.$dom.win=f.$(window);v.$dom.spaui=f.$("#spaui");v.$dom.home=v.$dom.spaui.find("#spaui-home");v.$dom.panel=v.$dom.spaui.find("#spaui-panel");v.$dom.pop=
v.$dom.spaui.find("#spaui-pop");v.$dom.back=v.$dom.spaui.find("#spaui-content-ui-back")},bind:function(){v.$dom.home.click(B.home);v.$dom.pop.click(B.pop);v.$dom.back.click(B.back);v.$dom.spaui.delegate(".spaui-go-home","click",B.home);D.subscribe(D.getName("goHome"),function(){B.home()})},preview:function(a){v.preview.show=a.show},initialState:function(){p.initialState();j.initialState();l.initialState();u.initialState();J.initialState();b.isOnUrl("/hz/productsearch")&&b.isParamPresent("productSearchTourOpen")&&
f.$("#tutorial-expander-id").trigger("click");var a=!1;h.isOnArticle()&&b.showBrowseAllHelpOnLoad()?(G=j.getPageType("browseAllHelp"),a=!0,I.displayBrowseAllHelpFromSession()):c.getTopicID()&&!b.isAnySummoningParamPresent()&&(G=j.getPageType("helpTopic"),a=!0,I.displayHelpTopicFromSession(c.getTopicID(),c.getTopicURL()));c.getPinned()?a?D.subscribe(D.getName("newPage"),B.onNewPage):l.summoner({session:!0}):l.isSummoned()||D.publish(D.getName("initializedWithoutSummon"));B.previewToDataStore();D.publish(D.getName("initialized"))},
onNewPage:function(a){a.type===G&&(G=null,D.unsubscribe(D.getName("newPage"),B.onNewPage),l.summoner({session:!0}))},previewToDataStore:function(){c.getPreview()&&v.preview.show&&B.enablePreview();c.getPreview()&&!v.preview.show&&c.setPreview(!1);!c.getPreview()&&v.preview.show&&B.previewUpdate()},previewUpdate:function(){f.$.get(v.preview.dismiss)},enablePreview:function(){f.$("#spaui").append(h.gebi("spaui-template-preview").innerHTML);c.getPinned()?B.previewMetric(a.getContext("session")):(H=f.$.proxy(B.previewMetric,
null,a.getContext("trigger")),D.subscribe(D.getName("summon"),H));v.$dom.spaui.delegate("#spaui-preview-jackpot","click",B.previewDismiss);v.$dom.spaui.delegate("#spaui-preview-modal","click",B.previewDismiss);v.$dom.spaui.delegate("#spaui-preview-map-feedback","click",B.previewFeedback);v.$dom.spaui.delegate("#spaui-preview-map-dismiss","click",B.previewGetAnswers)},previewMetric:function(b){H&&D.unsubscribe(D.getName("summon"),H);a.send({from:d.getFrom(),where:b,to:a.getPlace("previewCard")})},
previewFadeOut:function(b,c,e){b.preventDefault();b.stopPropagation();B.previewUpdate();a.send({from:d.getFrom(),where:c,to:d.getFrom()});f.$("#spaui-preview-modal").fadeOut(v.animation.duration.previewFadeOut,function(){e&&e()})},previewDismiss:function(b){B.previewFadeOut(b,a.getContext("previewAnywhere"))},previewFeedback:function(b){B.previewFadeOut(b,a.getContext("previewFeedback"),function(){i.launchFeedback()})},previewGetAnswers:function(b){B.previewFadeOut(b,a.getContext("previewGetAnswers"))},
back:function(a,b,c){a.preventDefault();i.setTyping(!1);j.hideUI();B.previousNodePrep();B.previousNodeReveal(!0,b,c)},previousNodePrep:function(){v.$dom.panel.prepend(v.template.prev);f.$("#spaui-prev").css("height",v.$dom.win.height()+"px")},previousNodeReveal:function(a,b,c){f.$("#spaui-prev").animate({right:"-="+v.animation.distance},v.animation.duration.backAnimate,function(){B.transitionToPreviousContent(a,b,c)})},transitionToPreviousContent:function(b,c,e){d.popPop();f.$("#spaui-content").remove();
v.$dom.panel.append(v.template.current);f.$("#spaui-content").bind("scroll",j.searchScroll);e&&d.prepForHome();h.gebi("spaui-content").innerHTML=d.popDom();if(c){f.$("#spaui-content").prepend(c);var i=setTimeout(function(){f.$("#spaui-content").find(".spaui-feedback-message-inner").fadeOut(function(){f.$("#spaui-content").find(".spaui-feedback-message-inner").remove()});clearTimeout(i);i=null},v.animation.duration.fbConfirm)}f.$("#spaui-content").fadeIn(v.animation.duration.contentFadeIn,function(){f.$("#spaui-prev").remove();
f.$("#spaui-content").removeClass("spaui-hide");f.$("#spaui-content").removeClass("spaui-new");m.blurSearch();f.$("#spaui-content").focus();f.$("#spaui-content").scrollTop(d.popScroll());j.showUI(d.getTo());a.send({from:d.getFrom(),to:d.getTo(),where:e?a.getContext("navHome"):a.getContext("navBack")});d.update({isBack:!0});var b=d.getSearchQueryHistory();m.setSearchBoxValue(b)})},home:function(a){a&&a.preventDefault();v.$dom.home.hasClass("spaui-home-off")||d.getFromLength()>1&&B.back({preventDefault:function(){}},
null,!0)},pop:function(b){b.preventDefault();c.setPinned(!1);a.send({from:d.getFrom(),to:a.getPlace("popPage"),where:a.getContext("header")});h.openInNewWindow(d.getPop())},overrideConfig:function(a){v=f.$.extend({},v,a)}};return{init:B.init,overrideConfig:B.overrideConfig}});ASPP.when("ASPA").register("spaui-browser-support",function(){return{placeholderIsSupported:function(){return"placeholder"in document.createElement("input")}}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-history","spaui-session",
"spaui-metrics","spaui-ui","spaui-hmd","spaui-theming","spaui-events","spaui-ajax").register("spaui-content",function(f,g,d,a,c,b,e,l,h,j,m){function i(){return f.$.extend({},C)}var k,o,s,w,r,y,t,n,A,u,z=null,q={animation:{visible:!1,active:!1,contentFadeInTime:300,distance:410,resizeDuration:250,resizePercentage:0.4,closeAffordance:{delay:1E3,fade:1250}},bind:!0,template:{next:'<div id="spaui-next"></div>',prev:'<div id="spaui-prev"></div>',current:'<div id="spaui-content" class="spaui-content spaui-new spaui-hide" tabindex="-1"></div>',
searchLoader:'<div id="scroll-loader" class="scroll-loader"><div class="spaui-content-loading"></div></div>'},url:null,sellerUniIds:null,javascriptWhitelistIds:null,lastSearchRequestId:0,specialTitleBarActiveClass:"spaui-special-title-bar-active",pageTypes:{alerts:"alerts",browseAllHelp:"browseAllHelp",getSupportCard:"getSupportCard",error:"error",feedback:"feedback",forums:"forums",helpTopic:"helpTopic",info:"info",loading:"loading",search:"search"},HELP_URL_PATH:"/gp/help/",TIME_BEFORE_REVERTING_BACK_MS:18E4},
C={backButton:!0,feedbackLink:!0,resetTopic:!0},D={alerts:i(),browseAllHelp:i(),error:i(),forums:i(),search:i(),loading:i(),getSupportCard:f.$.extend({},C,{backButton:!1}),feedback:f.$.extend({},C,{feedbackLink:!1}),helpTopic:f.$.extend({},C,{feedbackLink:!1,resetTopic:!1}),info:f.$.extend({},C,{backButton:!1})},p={init:function(a,b,c,d){p.hydrate(a);p.bind();q.url=b;q.sellerUniIds=c||[];q.javascriptWhitelistIds=d||[];g.log("content.init()")},hydrate:function(a){g.log("content.hydrate()");k=f.$(window);
o=a;s=a.find("#spaui-panel");w=a.find("#spaui-home");r=a.find(".spaui-head-controls-pop");a.find("#spaui-foot-browse");y=a.find("#spaui-content-ui");t=a.find("#spaui-content-ui-back");n=a.find("#spaui-content-ui-feedback-text");A=a.find(".spaui-footer-forum");u=a.find("#spaui-special-title-bar-container")},bind:function(){j.subscribe(j.getName("summon"),p.onAthenaSummoned);f.$(window).unload(p.onPageUnload)},initialState:function(){p.hideUI(!0);n.show();var a=p.getPageType("info");p.setPage(a);j.publish(j.getName("newPage"),
{type:a});a=c.getTimeSellerViewingArticle();a!==null&&(new Date).getTime()-a>q.TIME_BEFORE_REVERTING_BACK_MS&&(c.revertSellerToInfoCard(),c.setTimeSellerViewingArticle(null))},overrideConfig:function(a){f.$.extend(q,a)},prepNext:function(){var b=s.find("#spaui-next");if(!(b.length>0)){var c=f.$("#spaui-content");p.setPage(p.getPageType("loading"));a.pushScroll(c.scrollTop());s.append(q.template.next);b=s.find("#spaui-next");b.css("height",k.height()+"px");b.animate({right:"+="+q.animation.distance},
50,function(){c.scrollTop(0)})}},capturePayloadAndCallPlace:function(a,b,c){if(!f.$.isPlainObject(a))throw"First argument must be a plain object of the page details";return function(d){a.content=d.data;a.errorStatus=d.errorStatus;b(a,c)}},refreshContent:function(b,c){a.pushDom(d.gebi("spaui-content").innerHTML);f.$("#spaui-content").remove();s.append(q.template.current);c?f.$("#spaui-content").html(b):d.gebi("spaui-content").innerHTML=b},fadeContentIn:function(b,d,e){var j=f.$("#spaui-content"),i=
b.type;j.fadeIn(q.animation.contentFadeInTime,function(){f.$("#spaui-next").remove();j.removeClass("spaui-hide");j.removeClass("spaui-new");if(p.isErrorDom(b.content))c.revertSellerToInfoCard(),b.isPlatformError=!0,b.attemptedType=b.type,b.type=p.getPageType("platformError"),e.isPlatformError=!0;p.showUI(i,d,e);a.update({to:p.getMetricPlaceFromDetails(b)});j.focus()})},isErrorDom:function(a){return f.$(a).find("#spaui-error").length>0},displaySpecialTitleBar:function(a){u.append(a);o.addClass(q.specialTitleBarActiveClass)},
removeSpecialTitleBar:function(){u.empty();o.removeClass(q.specialTitleBarActiveClass)},getFailed:function(b,c){var e={errorDetails:d.getErrorDetailsFromAjaxResponse(b.content,b.errorStatus),isError:!0};a.pushPop("");p.refreshContent(d.gebi("spaui-template-error-client").innerHTML);b.attemptedType=b.type;b.type=p.getPageType("error");p.fadeContentIn(b,c,e)},getPageType:function(a){return q.pageTypes[a]},hideBackBar:function(){y.hide();s.addClass("spaui-hidden-backbar")},hideUI:function(a){r.removeClass("spaui-shown");
h.isFeedbackDisabledOnInfoCard()&&p.hideBackBar();p.removeSpecialTitleBar();A.removeClass("spaui-active");t.hide();n.hide();w.addClass("spaui-home-off");p.publishEventForLeavingPage(a)},showUI:function(a,b,d){y.show();s.removeClass("spaui-hidden-backbar");a!=="info"&&w.removeClass("spaui-home-off");var i=p.getPageConfig(a);if(i===null)if(d="Page not supported: "+a,b){b({isError:!0,error:d});return}else throw d;i.resetTopic&&c.setTopic(null);i.backButton?t.show():t.hide();i.feedbackLink?n.show():n.hide();
i.type==="info"&&h.isFeedbackDisabledOnInfoCard()&&p.hideBackBar();i.type==="helpTopic"&&(r.addClass("spaui-shown"),c.setTimeSellerViewingArticle((new Date).getTime()));a=p.getPageDetails(i);p.setPage(a.type);b(d);j.publish(j.getName("newPage"),a);(new Date).getTime();e.contentChanged()},externalShowUI:function(a,b){b===void 0&&(b=function(){});p.showUI(p.mapMetricsPlaceToPage(a),b)},prepEndpoint:function(a,b,c){p.hideUI();p.prepNext();b={type:b};m.get(a,{},p.capturePayloadAndCallPlace(b,p.placePage,
c),p.capturePayloadAndCallPlace(b,p.getFailed,c))},prepTemplate:function(a,b){p.hideUI();p.prepNext();var c=d.gebi("spaui-template-"+a);c===null?b({isError:!0,error:"Template '"+a+"' does not exist"}):p.placePage({type:a,content:c.innerHTML},b)},placePage:function(a,b){p.refreshContent(a.content);p.fadeContentIn(a,b,{})},prepHelpTopic:function(b,e,j){d.isNull(e)&&(e="/gp/help/"+b);d.isSellerULink(b)?(d.openInNewWindow(e),c.setPinned(!1)):(p.hideUI(),p.prepNext(),a.pushPop(e),e={type:p.getPageType("helpTopic"),
topicId:b,url:e},m.get("/hz/sellerpartner/help-content/"+b+"/",{},p.capturePayloadAndCallPlace(e,p.placeHelpTopic,j),p.capturePayloadAndCallPlace(e,p.getFailed,j)))},placeHelpTopic:function(a,b){c.setTopicID(a.topicId);c.setTopicURL(a.url);var d=p.isSellerUVideo(a.topicId),j=p.isJavascriptOverride(a.topicId);p.refreshContent(a.content,d||j);d&&e.makeLarge();l.enable(a.topicId);p.fadeContentIn(a,b,{})},isSellerUVideo:function(a){return p.isMemberOf(a,q.sellerUniIds)},isJavascriptOverride:function(a){return p.isMemberOf(a,
q.javascriptWhitelistIds)},isMemberOf:function(a,b){var c=parseInt(a,10);return b.indexOf(c)!==-1},isSearchRedirectDom:function(a){return f.$(a).find("#spaui-redirect").length>0},formEncode:function(a){return encodeURIComponent(a).replace(/%20/g,"+")},prepSearch:function(b,c,d){p.hideUI();p.prepNext();c={type:p.getPageType("search"),requestId:++q.lastSearchRequestId,query:b,filter:c,queryString:a.getSearchQuery()};b=p.formEncode(a.getSearchQuery());m.post("/hz/sellerpartner/athena-search",{data:"query="+
b+"&size="+a.getSearchSize()+"&content="+a.getSearchFilter()},p.capturePayloadAndCallPlace(c,p.placeSearch,d),p.capturePayloadAndCallPlace(c,p.getFailed,d))},placeSearch:function(b,d){if(b.requestId===q.lastSearchRequestId){var e={searchType:"search"},j=f.$(b.content);if(p.isSearchRedirectDom(b.content)){var j=j.find("#spaui-redirect"),i=j.data("url");if(i.match(/\/hz\/inventory/))e.searchType="inventory";else if(i.match(/\/gp\/orders/))e.searchType="order";e.searchType+="-redirect";e.isRedirect=
!0;e.redirectType=j.data("type").split("_").join("-");e.callback=function(){window.location.href=i};c.setPinned(!1);d(e)}else a.setSearchTotal(j.find("#spaui-search-total").data("total")),p.refreshContent(b.content,!0),p.testForOnlyForumResults(j),p.fadeContentIn(b,d,e)}},testForOnlyForumResults:function(c){var c=c.find(".spaui-search-result-help").length,e=o.find(".spaui-search-results").hasClass("showForums");if(c===0&&!e){c=f.$("#spaui-toggle-forums");e="";c.addClass("asp-button-selected");e=c.find("input").data("exclude-label");
o.find(".spaui-search-results").addClass("showForums");var j=d.gebi("spaui-template-only-forum-results").innerHTML;o.find(".spaui-search-results").before(j);c.find("input").val(e);c.find(".asp-button-text").html(e);a.setSearchShowForums(!0);b.send({from:a.getFrom(),to:b.getPlace("setForumsVisible"),where:b.getContext("noHelpResults")})}},placeNextSearchPage:function(b){if(!a.getSearchRequest()&&d.gebi("spaui-results")){var c=f.$("#spaui-content").scrollTop(),e=f.$("#spaui-content").innerHeight(),
i=f.$("#spaui-content").prop("scrollHeight");c+e>=i-a.getSearchScrollBuffer()&&(a.setSearchStart(a.getSearchStart()+a.getSearchSize()),a.setSearchStartHistory(a.getSearchStart()),a.setSearchQuery(a.getSearchQueryHistory()),a.setSearchTotal(a.getSearchTotalHistory()),a.getSearchStart()+a.getSearchSize()>a.getSearchTotal()||(f.$("#spaui-content").append(q.template.searchLoader),a.setSearchRequest(!0),m.post("/hz/sellerpartner/athena-search",{data:"query="+a.getSearchQuery()+"&start="+a.getSearchStart()+
"&size="+a.getSearchSize()},function(c){f.$("#scroll-loader").remove();d.gebi("spaui-content").innerHTML+=c.data;a.setSearchRequest(!1);j.publish(j.getName("newContentOnPage"));b(!0)},function(a){b(!1,d.getErrorDetailsFromAjaxResponse(a.data,a.errorResponse))})))}},prepFeaturedAndPredictive:function(a){var b=f.$("#spaui-featured-content-results"),c=f.$("#spaui-predictive-help"),e=b.height()+c.height(),b=b.add(c),j=!1,i=null,h=null;f.$("#spaui-content").append('<div id="spaui-featured-content-predictive-help-loading" class="spaui-featured-content-predictive-help-loading spaui-new" style="top:-'+
e+"px;height:"+e+'px;"></div>');e=f.$("#spaui-featured-content-predictive-help-loading");b.css("display","none");e.css("top","0px");b.remove();var g=function(){j?p.placeFeaturedAndPredictive(h+i,a):j=!0},e=function(b){b=d.getErrorDetailsFromAjaxResponse(b.data,b.errorResponse);a(!1,b)},b=window.location.pathname,c=window.location.hash,A=f.$("title").text(),b="?pageUrl="+b+"&pageHash="+encodeURIComponent(c)+"&pageTitle="+A;m.get("/hz/sellerpartner/featured-content"+b,{},function(a){h=a.data;g()},e);
m.get("/hz/sellerpartner/predictive-help"+b,{},function(a){i=a.data;g()},e)},placeFeaturedAndPredictive:function(a,b){f.$("#spaui-content").append(a);var c=f.$("#spaui-featured-content-predictive-help-loading");f.$("#spaui-featured-content-results");var e=f.$("#spaui-predictive-help"),d=c.height();e.css("position","relative");e.css("top","-"+d+"px");c.css("display","none");e.css("top","0px");c.remove();f.$("#spaui-content").focus();b(!0)},placeContentAfterHelpArticle:function(a){o.find(".spaui-help").after(a)},
onAthenaSummoned:function(){(new Date).getTime()},onPageUnload:function(){p.publishEventForLeavingPage()},publishEventForLeavingPage:function(b){b||(b=p.mapMetricsPlaceToPage(a.getFrom()),b=p.getPageDetails(p.getPageConfig(b)),j.publish("leavingPage",b))},setPage:function(a){z=a},getPage:function(){return z},getPageDetails:function(a){var b={type:a.type};if(a.type==="helpTopic")b.topicId=c.getTopicID();return b},getPageConfig:function(a){if(D.hasOwnProperty(a)){var b=D[a];b.type=a;return b}else return null},
mapMetricsPlaceToPage:function(a){var c={};c[b.getPlace("alerts")]=p.getPageType("alerts");c[b.getPlace("browse")]=p.getPageType("browseAllHelp");c[b.getPlace("getSupportCard")]=p.getPageType("getSupportCard");c[b.getPlace("feedback")]=p.getPageType("feedback");c[b.getPlace("info")]=p.getPageType("info");c[b.getPlace("search")]=p.getPageType("search");c[b.getPlace("forums")]=p.getPageType("forums");var e=null;c.hasOwnProperty(a)?e=c[a]:(a.substr(0,5)===b.getTopic()&&(e=p.getPageType("helpTopic")),
a.substr(0,6)==="error-"&&(e=p.getPageType("error")));return e},getMetricPlaceFromDetails:function(a){var c={};c[p.getPageType("alerts")]=b.getPlace("alerts");c[p.getPageType("browseAllHelp")]=b.getPlace("browse");c[p.getPageType("getSupportCard")]=b.getPlace("getSupportCard");c[p.getPageType("feedback")]=b.getPlace("feedback");c[p.getPageType("forums")]=b.getPlace("forums");c[p.getPageType("info")]=b.getPlace("info");c[p.getPageType("search")]=b.getPlace("search");var e=null;if(c.hasOwnProperty(a.type))e=
c[a.type];else if(a.type===p.getPageType("helpTopic"))e=b.getTopic()+a.topicId;else if(a.attemptedType)c=f.$.extend({},a,{type:a.attemptedType}),a.type===p.getPageType("error")&&(e="error-"+p.getMetricPlaceFromDetails(c)),a.type===p.getPageType("platformError")&&(e="error-platform-"+p.getMetricPlaceFromDetails(c));else throw"No attempted page type";return e}};return{displaySpecialTitleBar:p.displaySpecialTitleBar,getPageType:p.getPageType,getPage:p.getPage,placeContentAfterHelpArticle:p.placeContentAfterHelpArticle,
placeEndpoint:p.prepEndpoint,placeTemplate:p.prepTemplate,placeHelpTopic:p.prepHelpTopic,placeSearch:p.prepSearch,placeNextSearchPage:p.placeNextSearchPage,placeFeaturedAndPredictive:p.prepFeaturedAndPredictive,showUI:p.externalShowUI,hideUI:p.hideUI,overrideConfig:p.overrideConfig,initialState:p.initialState,init:p.init}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-content","spaui-util","spaui-events","spaui-shim","spaui-session","spaui-help","spaui-overlay","spaui-state","spaui-ui").register("spaui-contact-deflection",
function(f,g,d,a,c,b,e,l,h,j,m,i){var k=a.getPageType("getSupportCard"),o=null,s=!1,w=null,r=[a.getPageType("getSupportCard"),a.getPageType("helpTopic")],y=/contact-us/,t=null,n,A,u={init:function(a){o=l.getDeflectionCardVisitId();u.hydrate(a);u.bind()},hydrate:function(a){t=a;n=f.$("#spaui-templates #spaui-template-getSupportCard");A=a.find("#spaui-foot-contact")},bind:function(){u.isActive()&&(u.rebindContactUs(),u.delegateBind(),b.subscribe(b.getName("newPage"),u.handleNewPage),b.subscribe(b.getName("summon"),
u.handleSummon),b.subscribe(b.getName("dismissed"),u.handleDismiss))},className:function(a){return".spaui-get-support-card-"+a},rebindContactUs:function(){var a=n.find(u.className("header-title")).text(),b=A.find(".spaui-footer-icon");A.text(a);A.append(b);A.removeAttr("href");A.attr("title",a.trim())},delegateBind:function(){t.delegate(".spaui-open "+u.className("item-header"),"click",u.handleClose);t.delegate(".spaui-closed "+u.className("item-header"),"click",u.handleOpen);t.delegate(u.className("item")+
" a","click",u.handleLinkClick)},handleClose:function(a){u.transition(a,"spaui-open","spaui-closed","setItemCollapsed")},handleOpen:function(a){u.transition(a,"spaui-closed","spaui-open","setItemExpanded")},transition:function(a,b,c,e){a.preventDefault();a=f.$(a.currentTarget);a=u.nearestItem(a);a.removeClass(b);a.addClass(c);b=a.attr("id");e={from:d.getFrom(),where:g.getContext("getSupportCardItem"),to:e,additionalObj:{itemId:b}};u.appendVisitAndSendMetrics(e)},handleNewPage:function(a){w=a.type;
a.type===k?t.addClass("spaui-footer-hidden"):t.removeClass("spaui-footer-hidden");u.determineVisitId(a.type)},handleSummon:function(){s=!0;w&&u.determineVisitId(w)},handleDismiss:function(){s=!1;u.clearVisitId()},determineVisitId:function(a){s&&(r.includes(a)||u.clearVisitId())},handleLinkClick:function(a){var b=a.currentTarget.href,e=c.getTopicIDFromLink(b),A=c.contains(b,y),k={from:d.getFrom(),where:g.getContext("content")},o={groupId:u.getGroupId(f.$(a.currentTarget))};j.removeOverlay();l.setContactUsLinkClicked(!0);
e!==void 0?(a.preventDefault(),o=f.$.extend(o,{articleId:e}),k.additionalObj=o,u.appendVisitId(k),h.displayHelpTopic(e,b,k),c.executeIf(c.isSellerULink,function(a){g.send(f.$.extend(k,{to:g.getTopic()+a}))})(e)):(l.setPinned(!1),e="launch-unknownPage",A&&(e="launch-contactUs",m.isOnUrl(y)&&(a.preventDefault(),l.getSize()&&i.makeSmall(),i.banisher({where:g.getContext("getSupportCardItem")}))),u.fillLinkMetricsObject(k,e,b,o),u.appendVisitAndSendMetrics(k))},fillLinkMetricsObject:function(a,b,c,e){e=
f.$.extend(e,{url:c});a.additionalObj=e;a.to=b},getGroupId:function(a){return u.nearestItem(a).attr("id")},nearestItem:function(a){return a.closest(u.className("item"))},isActive:function(){return n.length>0},displayDeflectionCard:function(b,c){var e={from:d.getFrom(),where:b,to:g.getPlace("getSupportCard")};if(c!==void 0)e.additionalObj={summoned:c};a.placeTemplate(k,function(){u.appendVisitAndSendMetrics(e);c&&!l.getPinned()&&i.summoner({external:!1})})},appendVisitAndSendMetrics:function(a){u.appendVisitId(a);
g.send(a)},appendVisitId:function(a){var b=f.$.extend(a.additionalObj,u.getVisitIdObj());a.additionalObj=b},getVisitIdObj:function(){o===null&&u.generateNewVisitId();return{visitId:o}},clearVisitId:function(){o=null;l.setDeflectionCardVisitId(null);l.setContactUsLinkClicked(!1)},generateNewVisitId:function(){var a=c.getUid();o=a;l.setDeflectionCardVisitId(a)},initialState:function(){u.isActive()&&u.shouldAutoSummon()&&(l.setTopicID(void 0),u.displayDeflectionCard("contactUsAutoSummon",!0),j.createFullscreenOverlay())},
shouldAutoSummon:function(){var a=n.data("weblab-auto-summon")===!0,b=m.isOnUrl(y),c=m.isParamPresent("categoryId"),e=l.getContactUsLinkClicked();b||l.setContactUsLinkClicked(!1);return a&&b&&!c&&!e}};return{init:u.init,isActive:u.isActive,displayDeflectionCard:u.displayDeflectionCard,initialState:u.initialState}});ASPP.when("ASPA").register("spaui-debug",function(){var f={dir:function(g){window.location.search.indexOf("spauiDebug")!==-1&&(console.dir?console.dir(g):(f.log("}} SPAUI {{ -- DIR -- "),
f.log(g)))},error:function(g){window.location.search.indexOf("spauiDebug")!==-1&&(console.error?console.error(g):f.log("}} SPAUI {{ -- ERROR -- "+g))},info:function(g){window.location.search.indexOf("spauiDebug")!==-1&&(console.info?console.info(g):f.log("}} SPAUI {{ -- INFO -- "+g))},warn:function(g){window.location.search.indexOf("spauiDebug")!==-1&&(console.warn?console.warn(g):f.log("}} SPAUI {{ -- WARN -- "+g))},group:function(f){window.location.search.indexOf("spauiDebug")!==-1&&(console.group?
window.location.search.indexOf("spauiDebug")!==-1?console.group(f):console.groupCollapsed(f):console.log("}} SPAUI {{ ----- "+f))},groupEnd:function(){window.location.search.indexOf("spauiDebug")!==-1&&(console.groupEnd?console.groupEnd():f.log("}} SPAUI {{ -- ENDGROUP -- "))},log:function(f){window.location.search.indexOf("spauiDebug")!==-1&&console.log&&console.log(f)}};return{log:f.log,group:f.group,groupEnd:f.groupEnd,error:f.error,info:f.info,warn:f.warn,dir:f.dir}});ASPP.when("ASPA","spaui-shim",
"spaui-events","spaui-metrics","spaui-history","spaui-expand").register("spaui-direct-answer",function(f,g,d,a,c,b){var e,l=[],h={init:function(a){e=a;h.bindEvents()},bindEvents:function(){d.subscribe(d.getName("newPage"),h.scanForDirectAnswer);e.delegate("#spaui-search-results .spaui-direct-answer","click",h.interactWithDirectAnswer);e.delegate("#spaui-search-results .spaui-direct-answer "+b.selectors.collapsedElementHeader,"click",h.expand);e.delegate("#spaui-search-results .spaui-direct-answer "+
b.selectors.expandedElementHeader,"click",h.collapse)},scanForDirectAnswer:function(){e.find("#spaui-search-results .spaui-direct-answer").each(function(){var a=f.$(this);h.discoverDirectAnswer(a);h.transformDirectAnswer(a);h.transformCollapsing(a)})},interactWithDirectAnswer:function(a){var b=e.find("#spaui-search-results .spaui-direct-answer").data("direct-answer-id"),a=f.$(a.target);l.includes(b)||h.adoptDirectAnswer(b,a);h.instrument(b,"interacted",a)},discoverDirectAnswer:function(a){var b=a.data("direct-answer-id");
h.instrument(b,"discovered",a);h.clearAdoptions()},transformDirectAnswer:function(a){h.isDirectAnswerTool(a)&&h.isSearchToolsPresent()&&h.removeToolHeader()},isDirectAnswerTool:function(a){return a.find(".spaui-direct-answer-tools").size()>0},isSearchToolsPresent:function(){return e.find("#spaui-tools-results").size()>0},removeToolHeader:function(){e.find("#spaui-tools-results h2").remove()},clearAdoptions:function(){l=[]},adoptDirectAnswer:function(a,b){l.push(a);h.instrument(a,"adopted",b)},instrument:function(b,
e,d){b=h.getAdditionalInfo(b,e,d);e={from:c.getFrom(),where:"direct-answer",to:e,additionalObj:b};a.send(e)},getAdditionalInfo:function(a,b,e){a={id:a,query:c.getSearchQuery()};if(b!=="discovered")a.action=e.data("direct-answer-action")||"unspecified";return a},expand:function(a){b.expand(a,h.instrumentExpandCollapse)},collapse:function(a){b.collapse(a,h.instrumentExpandCollapse)},instrumentExpandCollapse:function(b){b={from:c.getFrom(),where:"direct-answer",to:b};a.send(b)},transformCollapsing:function(a){a.find(".spaui-direct-answer-help-collapse").each(function(){b.transformCollapse(f.$(this))})}};
return{init:h.init,isDirectAnswerTool:h.isDirectAnswerTool}});ASPP.when("ASPA","spaui-events","spaui-util","spaui-async").register("spaui-discovery",function(f,g,d,a){var c={},b={},e={},l=!1,h={init:function(){g.subscribe(g.getName("newPage"),h.pageStateChanged);g.subscribe(g.getName("summon"),h.summonAthena);g.subscribe(g.getName("dismissed"),h.dismissAthena);g.subscribe(g.getName("leavingPage"),h.leftPage)},register:function(b,e,d,f){c[b]={module:b,page:e,multiplicity:d,discovered:!1,callback:f};
g.subscribeAsyncModuleEvent(b,a.COMPLETED_EVENT,function(){h.asyncModuleLoaded(b)})},registerWithoutAsync:function(a,b,d,f){c[a]={module:a,page:b,multiplicity:d,discovered:!1,callback:f};e[a]=!0},asyncModuleLoaded:function(a){e[a]=!0;h.discover()},pageStateChanged:function(a){h.setAllPageStatus(!1);b[a.type]=!0;h.discover()},leftPage:function(){h.setAllPageStatus(!1)},setAllPageStatus:function(a){Object.keys(b).forEach(function(c){b[c]=a})},summonAthena:function(){l=!0;h.discover()},dismissAthena:function(){l=
!1},discover:function(){d.forEachObjectValue(c,h.discoverSingleModule)},discoverSingleModule:function(a){if(l&&b[a.page]&&e[a.module]&&(!a.discovered||a.multiplicity))a.callback(),a.discovered=!0}};return{init:h.init,register:h.register,registerWithoutAsync:h.registerWithoutAsync}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-events","spaui-util","spaui-theming","spaui-ajax","spaui-content","spaui-session","spaui-debug","spaui-async","spaui-alert-util").register("spaui-eci-widget",function(f,
g,d,a,c,b,e,l,h,j,m,i){var k,o={fadeDuration:400,TIME_AFTER_SUBIMT_TO_HIDE:3E3,VALIDATION_ERROR:"validation_error",SUBMIT_TYPE:"SUBMIT"},s={init:function(a){s.hydrate(a);s.bind(a)},hydrate:function(){k=f.$("#spaui, #sc-quicklinks-top");o.parentRequestId=g.getParentRequestId()},bind:function(){s.contentDelegate(".spaui-eci-verify-yes","click",s.getDetailsAndCall(function(a,b){s.submitPhone(a,b,!0)}));s.contentDelegate(".spaui-eci-verify-no","click",s.getDetailsAndCall(s.verifyToChoosePhone));s.contentDelegate(".spaui-eci-submit",
"click",s.getDetailsAndCall(function(a,b){s.submitPhone(a,b,!1)}));s.contentDelegate(".spaui-eci-remind-me-later","click",s.getDetailsAndCall(s.remindMeLaterClicked,!0))},contentDelegate:function(a,b,c){k.delegate(".spaui-eci-content "+a,b,c)},getDetailsAndCall:function(a,b){return function(c){b&&c.preventDefault();var e=i.getAlertFromInnerEvent(c),e=i.getAlertDetails(e);a(e.id,s.getEciDom(c.target))}},getEciDom:function(a){return f.$(a).closest(".spaui-eci-content")},registerHandles:function(a){a.simpleRegister(s.isEciAlert,
g.getContext("eciNotification"),g.getContext("eciNotification"),{hasMinimizeButton:!0})},isEciAlert:function(a){return a.find(".spaui-eci-content").length>0},submitPhone:function(a,b,d){var i=b.find(".spaui-eci-choose-phone").data("path").replace(/\{feedbackType\}/,o.SUBMIT_TYPE),j=s.collectParams(a,b,d),i=i+"?"+c.formatObjectAsUrlParams(j);s.instrumentWithVerify(a,"submitted",d);s.submitToLoading(a,b);e.get(i,{},f.$.proxy(s.submitPhoneSuccess,null,a,b,d),f.$.proxy(s.submitPhoneFailed,null,a,b,d))},
remindMeLaterClicked:function(a,b){var c=b.find(".spaui-eci-verify").is(":visible"),d=s.collectParams(a,b,c);e.get("/hz/sellerpartner/alert/LATER?ids="+d.ids+"&prid="+o.parentRequestId,{},function(){s.instrumentWithVerify(a,"remindMeLaterClicked",c)});s.hide(a)},collectParams:function(a,b,c){a={ids:a,prid:o.parentRequestId,sellerVerifysNumber:c};c?(a.country_prefix="",a.phone=b.find(".spaui-eci-verify-phone").val()):(b=b.find(".spaui-eci-choose-phone"),a.country_prefix=b.find(".spaui-eci-country-prefix").val(),
a.phone=b.find(".spaui-eci-phone").val());return a},submitPhoneSuccess:function(a,b,c,e){e.data===o.VALIDATION_ERROR?(s.instrumentWithVerify(a,"validationError",c),s.loadingToValidationFailure(a,b,c)):(s.instrumentWithVerify(a,"submitSuccess",c),s.loadingToSuccess(a,b))},submitPhoneFailed:function(a,b,c){s.instrumentWithVerify(a,"submitFailed",c);s.loadingToFailure(a,b,c)},verifyToChoosePhone:function(a,b){s.instrument(a,"verifyDenied");b.find(".spaui-eci-verify").fadeOut({duration:o.fadeDuration,
complete:function(){b.find(".spaui-eci-choose-phone").show()}})},submitToLoading:function(a,b){b.find(".spaui-eci-choose-phone").hide();b.find(".spaui-eci-verify").hide();b.find(".spaui-eci-validation-failure").hide();b.find(".spaui-eci-submit-failure").hide();b.find(".spaui-eci-form-loading").show()},loadingToSuccess:function(a,b){b.find(".spaui-eci-form-loading").hide();b.find(".spaui-eci-remind-me-later").hide();b.find(".spaui-eci-submit-success").show();setTimeout(function(){s.hide(a)},o.TIME_AFTER_SUBIMT_TO_HIDE)},
hide:function(a){i.hideSingleAlert(a)},showVerifyOrChoose:function(a,b){var c={duration:o.fadeDuration};b?a.find(".spaui-eci-verify").fadeIn(c):a.find(".spaui-eci-choose-phone").fadeIn(c)},loadingToValidationFailure:function(a,b,c){b.find(".spaui-eci-form-loading").hide();b.find(".spaui-eci-validation-failure").show();s.showVerifyOrChoose(b,c)},loadingToFailure:function(a,b,c){b.find(".spaui-eci-form-loading").hide();b.find(".spaui-eci-submit-failure").show();s.showVerifyOrChoose(b,c)},instrumentWithVerify:function(a,
b,c){s.instrument(a,b,{verifying:c})},instrument:function(a,b,c){g.send({from:d.getFrom(),where:g.getContext("eciNotification"),to:b,additionalObj:f.$.extend(c,{eciId:a})})},mockConfig:function(a){f.$.extend(o,a)}};return{init:s.init,mockConfig:s.mockConfig,registerHandles:s.registerHandles}});ASPP.when("ASPA").register("spaui-events",function(f){var g={initialized:"initialized",initializedWithoutSummon:"initializedWithoutSummon",triggerSummon:"triggerSummon",summon:"summon",dismissed:"dismissed",
newPage:"newPage",newContentOnPage:"newContentOnPage",leavingPage:"leavingPage",pushNotificationOpened:"pushNotificationOpened",pushNotificationClosed:"pushNotificationClosed",pushNotificationMinimize:"pushNotificationMinimize",alertsLoaded:"alertsLoaded",goHome:"goHome",featuresChanged:"featuresChanged"},d={init:function(){},getName:function(a){if(g[a])return g[a];else throw"Name '"+a+"' not supported in EVENTS module";},resolveAuiName:function(a){return"spaui:"+a},subscribe:function(a,c){f.on(d.resolveAuiName(a),
c)},unsubscribe:function(a,c){f.off(d.resolveAuiName(a),c)},publish:function(a,c){f.trigger(d.resolveAuiName(a),c)},subscribeAsyncModuleEvent:function(a,c,b){d.subscribe("async"+c+":"+a,b)},publishAsyncModuleEvent:function(a,c,b){d.publish("async"+c+":"+a,b)}};return{init:d.init,getName:d.getName,subscribe:d.subscribe,unsubscribe:d.unsubscribe,publish:d.publish,subscribeAsyncModuleEvent:d.subscribeAsyncModuleEvent,publishAsyncModuleEvent:d.publishAsyncModuleEvent}});ASPP.when("ASPA").register("spaui-expand",
function(f){var g={collapsed:"spaui-collapsed",expanded:"spaui-expanded",duration:400},d={collapsedElementHeader:".spaui-collapsing."+g.collapsed+" .spaui-collapsingHeader",expandedElementHeader:".spaui-collapsing."+g.expanded+" .spaui-collapsingHeader",template:"#spaui-template-collapsing",collapsingContent:".spaui-collapsingContent",anyHeader:":header",elementHeader:".spaui-collapsingHeader"},a,c={init:function(){a=f.$(d.template)},expand:function(a,e){var d=c.getCollapsingContentObjectFromClick(a);
d.body.slideDown(g.duration,function(){c.changeClass(g.collapsed,g.expanded,d.parent,e)})},collapse:function(a,e){var d=c.getCollapsingContentObjectFromClick(a);d.body.slideUp(g.duration,function(){c.changeClass(g.expanded,g.collapsed,d.parent,e)})},getCollapsingContentObjectFromClick:function(a){a.preventDefault();var a=f.$(a.currentTarget).parent(),c=a.find(d.collapsingContent);return{parent:a,body:c}},changeClass:function(a,c,d,f){d.removeClass(a);d.addClass(c);f(c.replace("spaui-",""))},transformCollapse:function(b){var e=
c.findHeader(b);if(!(e.size()<=0)){e.detach();var f=a.clone();f.removeAttr("id");f.find(d.elementHeader).prepend(e);f.addClass(g.collapsed);b=b.replaceWith(f);f.find(d.collapsingContent).append(b)}},findHeader:function(a){return a.children(d.anyHeader).first()},overrideConfig:function(a){f.$.extend(g,a)}};return{init:c.init,expand:c.expand,collapse:c.collapse,transformCollapse:c.transformCollapse,overrideConfig:c.overrideConfig,selectors:d}});ASPP.when("ASPA","spaui-metrics","spaui-history").register("spaui-external-metrics",
function(f,g,d){var a,c;c=function(b,c){if(b)return f.$.proxy(a,null,b,c);else throw"Register must be given a string to identify your widget or team using our API.";};a=function(a,c,f,h){c={from:c?"client-"+c:d.getFrom(),where:a,to:"extern-"+f};if(h)c.additionalObj=h;try{g.validate(c),g.send(c)}catch(j){throw"Error sending metric for '"+a+"': "+j;}};return{register:c}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-events","spaui-discovery","spaui-async","ready").register("spaui-featured-content",
function(f,g,d,a,c,b){var e,l,h={init:function(d){e=d;c.register("featured-content","info",!1,h.instrumentDiscover);a.subscribeAsyncModuleEvent("featured-content",b.COMPLETED_EVENT,h.onload)},onload:function(){h.hydrate()},hydrate:function(){l=e.find("#spaui-featured-content-results .spaui-search-results")},getTopicIds:function(){var a=[];l.find("li.spaui-search-result a.spaui-search-result-hot").each(function(){var b=f.$(this);a.push(b.data("id"))});return a},instrumentDiscover:function(){var a=
h.getTopicIds();g.send({from:d.getFrom(),where:g.getContext("featured"),to:"discovered",additionalObj:{featuredTopicIds:a.join(",")}})}};return{getTopicIds:h.getTopicIds,init:h.init}});ASPP.when("ASPA","spaui-weblabs","spaui-theming","spaui-events").register("spaui-features",function(f,g,d,a){var c=!1,b={initialState:function(){b.update()},isContactUsEnabled:function(){var a=g.getTreatment(g.NEW_SELLER),a=a==="T2"||a==="T3",b=d.getTheme()===d.THEMES.NEW_SELLER_THEME;return!(a&&b&&!c)},setIsInterceptCardComplete:function(a){c=
a;b.update()},update:function(){a.publish(a.getName("featuresChanged"))}};return{initialState:b.initialState,isContactUsEnabled:b.isContactUsEnabled,setIsInterceptCardComplete:b.setIsInterceptCardComplete,isBackBarShownOnInfoCard:b.isBackBarShownOnInfoCard}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-history","spaui-metrics","spaui-content").register("spaui-feedback",function(f,g,d,a,c,b){var e,l,h={active:null,max:1E3,typing:!1,warn:!1},j={init:function(a){j.hydrate(a);j.bind()},hydrate:function(a){e=
a;l=e.find("#spaui-content-ui-back")},bind:function(){e.delegate(".spaui-feedback-link","click",j.giveFeedback);e.delegate("#spaui-feedback-rate-stars","hover",j.starsHover);e.delegate(".spaui-feedback-rate-star","hover",j.starHover);e.delegate(".spaui-feedback-rate-star","click",j.starClick);e.delegate("#spaui-feedback-rate-clear","click",j.starClear);e.delegate("#spaui-feedback-comments-textarea","focus",j.fbTextFocus);e.delegate("#spaui-feedback-comments-textarea","keyup",j.fbTextType);e.delegate("#spaui-feedback-comments-cancel",
"click",j.commentsClear);e.delegate("#spaui-feedback-comments-send","click",j.commentsSend)},giveFeedback:function(a){a.preventDefault();j.launchFeedback()},launchFeedback:function(){b.placeTemplate("feedback",function(){c.send({from:a.getFrom(),where:c.getContext("navFeedback"),to:c.getPlace("feedback")})})},starsHover:function(a){a.type==="mouseenter"&&(e.find(".spaui-feedback-rate-star").removeClass("on"),e.find("#spaui-feedback-rate-confirm").hide());if(a.type==="mouseleave"){e.find(".spaui-feedback-rate-star").removeClass("over");
e.find(".spaui-feedback-rate-text").hide();h.active&&e.find("#spaui-feedback-rate-confirm").show();for(a=1;a<h.active+1;a++)e.find("#spaui-feedback-rate-star"+a).addClass("on")}},starHover:function(a){if(a.type==="mouseenter"){var b=parseInt(a.currentTarget.id.substr(24),10);e.find("#spaui-feedback-rate-confirm").hide();e.find(".spaui-feedback-rate-text").hide();e.find("#spaui-feedback-rate-text"+b).show();var c;for(c=1;c<b+1;c++)e.find("#spaui-feedback-rate-star"+c).addClass("over")}a.type==="mouseleave"&&
(f.$(a.currentTarget).removeClass("over"),f.$(a.currentTarget).removeClass("on"))},starClick:function(b){h.active=parseInt(b.currentTarget.id.substr(24),10);e.find(".spaui-feedback-rate-star").removeClass("on");e.find(".spaui-feedback-rate-star").removeClass("over");e.find(".spaui-feedback-rate-text").hide();for(b=1;b<h.active+1;b++)e.find("#spaui-feedback-rate-star"+b).addClass("on");e.find("#spaui-feedback-rate-confirm").show();e.find("#spaui-feedback-rate-comments").show();c.send({from:a.getFrom(),
where:c.getContext("rating"),to:c.getPlace("setFbRate"),payloadObj:{feedbackStarRating:h.active}})},starClear:function(b){b.preventDefault();e.find("#spaui-feedback-rate-confirm").hide();e.find("#spaui-feedback-rate-comments").hide();h.active=null;e.find(".spaui-feedback-rate-star").removeClass("on");e.find("#spaui-feedback-context").show();c.send({from:a.getFrom(),where:c.getContext("rating"),to:c.getPlace("setFbClear")})},fbTextFocus:function(){var a=e.find("#spaui-feedback-comments-textarea");
a.addClass("active");d.textareaFocusPlaceholderFix(a)},fbTextType:function(a){var b=e.find("#spaui-feedback-comments-counter"),c=a.currentTarget.value;if(!h.typing)b.show(),e.find("#spaui-feedback-comments-buttons").show(),e.find("#spaui-feedback-context").hide(),h.typing=!0;a=h.max-c.length;a<=1&&(c.substr(0,h.max),a=0);c=b.hasClass("asp-color-price");a<21&&!c?b.addClass("asp-color-price"):a>=21&&c&&b.removeClass("asp-color-price");b.text(a)},commentsSend:function(b){b.preventDefault();b=e.find("#spaui-feedback-comments-textarea").val();
if(b!=="")h.typing=!1,l.trigger("click",d.gebi("spaui-feedback-message").innerHTML),c.send({from:a.getFrom(),to:c.getPlace("setFbSend"),where:c.getContext("rating"),payloadObj:{feedbackText:b}})},commentsClear:function(a){a.preventDefault();h.typing=!1;e.find("#spaui-feedback-comments-textarea").val("");e.find("#spaui-feedback-comments-textarea").removeClass("active");e.find("#spaui-feedback-comments-counter").hide();e.find("#spaui-feedback-comments-counter").text(h.max);e.find("#spaui-feedback-comments-buttons").hide();
e.find("#spaui-feedback-context").show()},setTyping:function(a){h.typing=a},overrideConfig:function(a){h=f.$.extend({},h,a)}};return{init:j.init,overrideConfig:j.overrideConfig,setTyping:j.setTyping,launchFeedback:j.launchFeedback}});ASPP.when("ASPA","spaui-util","spaui-metrics","spaui-content","spaui-history","spaui-events","spaui-state").register("spaui-forums",function(f,g,d,a,c,b,e){var l,h,j,m={init:function(a){m.hydrate(a);m.bind()},hydrate:function(a){l=a;h=a.find("#spaui-templates")},bind:function(){b.subscribe(b.getName("newPage"),
m.onNewPage);b.subscribe(b.getName("leavingPage"),m.onLeavingPage);m.bindForums([".spaui-forums-thread",".spaui-forums-thread-subject"],"click",m.openThread);m.bindForums([".spaui-forums-forum",".spaui-forums-forum-name"],"click",m.openForum);m.bindForums(".spaui-forums-browse-link","click",m.openBrowseForum)},getForumSelector:function(a){f.$.isArray(a)||(a=[a]);a.unshift("#spaui-forums");return a.join(" ")},bindForums:function(a,b,c){return l.delegate(m.getForumSelector(a),b,c)},getForumsElements:function(a){return l.find(m.getForumSelector(a))},
displayForums:function(){var b=e.enhanceUrl("/hz/sellerpartner/forums");a.placeEndpoint(b,"forums",function(){d.send({from:c.getFrom(),where:d.getContext("footer"),to:d.getPlace("forums")})})},onNewPage:function(b){if(b.type===a.getPageType("forums")){b=l.find("#spaui-forums #spaui-forums-title-bar");b.length>0&&(j&&j.remove(),j=b);a.displaySpecialTitleBar(j);var e=[];m.getForumsElements([".spaui-forums-threads-list",".spaui-forums-thread"]).each(function(){e.push(f.$(this).data("thread-id"))});var h=
[];m.getForumsElements([".spaui-forums-forum-list",".spaui-forums-forum"]).each(function(){h.push(f.$(this).data("forum-id"))});d.send({from:c.getFrom(),where:"forumsLinks",to:"discovered",additionalObj:{featuredThreadIds:e.join(","),suggestedForumIds:h.join(",")}})}},onLeavingPage:function(b){b.type===a.getPageType("forums")&&h.append(j)},openThread:function(a){m.openInNewTab(a);a=f.$(a.target).closest(".spaui-forums-thread");m.instrumentForums(d.getContext("featuredThreads"),"ThreadClicked",{threadId:a.data("thread-id"),
rank:a.data("rank"),total:m.getForumsElements(".spaui-forums-threads-list").data("total")})},openForum:function(a){m.openInNewTab(a);a=f.$(a.target).closest(".spaui-forums-forum");m.instrumentForums(d.getContext("suggestedForums"),"ForumClicked",{forumId:a.data("forum-id"),rank:a.data("rank"),total:m.getForumsElements(".spaui-forums-forum-list").data("total")})},openBrowseForum:function(a){m.openInNewTab(a);m.instrumentForums(d.getContext("browseForums"),"BrowseClicked",{})},openInNewTab:function(a){a.preventDefault();
g.openInNewWindow(a.target.getAttribute("href"))},instrumentForums:function(a,b,e){d.send({from:c.getFrom(),where:a,to:"forums"+b,additionalObj:e})}};return{init:m.init,displayForums:m.displayForums}});ASPP.when("ASPA","spaui-metrics","spaui-ui","spaui-search-suggestions","spaui-browser-support").register("spaui-global-nav-search",function(f,g,d,a,c){var b,e,l,h,j,m,i={invokeSearchFunc:null,invokeSynchronizeFunction:null,defaultSearchValue:null},k=!1,o={init:function(a,b){o.hydrate(a,b);o.bind()},
hydrate:function(a,c){i.invokeSearchFunc=a;i.invokeSynchronizeFunction=c;b=f.$(document);e=f.$("#sc-global-search");l=e.find("#sc-global-search-form #sc-search-field");h=e.find("#sc-global-search-form .sc-search-button");j=f.$("#spaui-templates #spaui-template-global-nav-search-loading");m=j.find("#spaui-global-nav-loading-tip");if(l.length>0)i.defaultSearchValue=l.val().trim();o.setupPlaceholder()},bind:function(){h.click(o.clickSearch);b.keydown(o.searchKey);l.keyup(o.synchronizeAthenaSearch);l.focus(o.searchFocused);
l.blur(o.searchBlurred);l.bind("paste",i.pasteFunc)},setupPlaceholder:function(){c.placeholderIsSupported()&&!o.placeHolderIsSet(l)?(l.attr("placeholder",i.defaultSearchValue),l.removeAttr("onclick"),l.removeAttr("onblur"),l.val(""),i.placeholderFunc=o.doNothing,i.pasteFunc=o.doNothing):(i.placeholderFunc=o.setPlaceholder,i.pasteFunc=o.onPaste)},placeHolderIsSet:function(a){return a.attr("placeholder")!==void 0},onPaste:function(){!o.searchTermIsViable()&&k&&l.val("")},doNothing:function(){},synchronizeAthenaSearch:function(){i.invokeSynchronizeFunction(l.val())},
clickSearch:function(a){a.preventDefault();o.submitSearch()},searchKey:function(a){if(k&&(a.keyCode||a.which)===13)return o.submitSearch(),a.preventDefault(),!1},searchFocused:function(){k=!0;a.newBind(l,o.submitSearch,g.getPlace("globalNav"))},searchBlurred:function(){k=!1},searchTermIsViable:function(){var a=l.val().trim();return a!==""&&a!==i.defaultSearchValue},submitSearch:function(b){o.searchTermIsViable()&&(o.showLoading(),a.disable(),a.hide(),i.invokeSearchFunc(l.val(),{from:g.getPlace("globalNav"),
where:g.getContext("globalSearch")},b,function(b){b==="order-redirect"?o.changeLoadingToOrderRedirect():b==="inventory-redirect"?o.changeLoadingToInventoryRedirect():(o.hideLoading(),a.enable(),d.summoner({}))}))},showLoading:function(){l.after(m)},changeLoadingToOrderRedirect:function(){m.addClass("spaui-global-nav-redirecting-to-order")},changeLoadingToInventoryRedirect:function(){m.addClass("spaui-global-nav-redirecting-to-inventory")},hideLoading:function(){m.removeClass("spaui-global-nav-redirecting-to-order");
m.removeClass("spaui-global-nav-redirecting-to-inventory");j.append(m)},setSearchBoxValue:function(a){o.isEmpty(a)&&!c.placeholderIsSupported()?i.placeholderFunc():l.val(a)},isEmpty:function(a){return a===void 0||a===null||a.length===0},setPlaceholder:function(){l.val(i.defaultSearchValue)}};return{init:o.init,setSearchBoxValue:o.setSearchBoxValue}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-alert-metrics","spaui-alert-util").register("spaui-grouped-alerts",function(f,g,d,a,c){var b=
g.getContext("groupedAlert"),e=g.getContext("groupedAlert"),l=null,h={init:function(a){l=a;l.delegate(h.getSelector(".spaui-grouped-alert-item-action"),"click",h.instrumentInteract)},registerHandles:function(a){a.customRegister(h.isGroupedAlert,h.alertDiscovered,h.alertOpened,function(){},h.alertMinimized)},isGroupedAlert:function(a){return a.hasClass("spaui-grouped-alert")},alertDiscovered:function(c){var d=h.getRangeOfAlerts(c,0,1);a.discover(b,e,h.getDetailsForAlert(c,d))},alertOpened:function(a){var e=
[];h.getRangeOfAlerts(a,1).each(function(){var a=f.$(this);e.push(a.data("id"))});a=c.getAlertDetails(a);g.send({from:d.getFrom(),where:b,to:g.getPlace("groupedAlertInnerDiscover"),additionalObj:{isPush:a.isPush},payloadObj:{notificationId:e.join(","),notificationType:a.type,notificationName:a.name}})},alertMinimized:function(d){var g=[];h.getRangeOfAlerts(d,0).each(function(){var a=f.$(this);g.push(a.data("id"))});d=c.getAlertDetails(d);d.id=g.join(",");a.minimize(b,e,d)},instrumentInteract:function(d){var f=
c.getAlertFromInnerEvent(d);a.read(b,e,h.getDetailsForAlert(f,h.getAlertFromEvent(d)))},getSelector:function(a){f.$.isArray(a)||(a=[a]);a.unshift(".spaui-grouped-alert");return a.join(" ")},getRangeOfAlerts:function(a,b,c){return a.find("ul li.spaui-grouped-alert-item").slice(b,c)},getDetailsForAlert:function(a,b){var e=c.getAlertDetails(a);e.id=b.data("id");return e},getAlertFromEvent:function(a){return f.$(a.target).closest(".spaui-grouped-alert-item")}};return{init:h.init,registerHandles:h.registerHandles}});
ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-content","spaui-util","spaui-weblabs","spaui-discovery","spaui-expand").register("spaui-help",function(f,g,d,a,c,b,e,l){var h=null,j=".spaui-help-content "+l.selectors.collapsedElementHeader,m=".spaui-help-content "+l.selectors.expandedElementHeader,i,k={init:function(a){i=a;k.delegateBind();k.eventBind()},delegateBind:function(){i.delegate(j,"click",k.expand);i.delegate(m,"click",k.collapse)},eventBind:function(){e.registerWithoutAsync("helpTopic",
a.getPageType("helpTopic"),!0,k.discoverHelpTopic);e.registerWithoutAsync("browseAllHelp",a.getPageType("browseAllHelp"),!0,k.discoverBrowseAllHelp)},bind:function(){f.$(".spaui-help-content .collapsible").each(function(){var a=f.$(this);k.determineCollapse(a)})},expand:function(a){l.expand(a,k.instrumentExpandCollapse)},collapse:function(a){l.collapse(a,k.instrumentExpandCollapse)},determineCollapse:function(a){l.transformCollapse(a)},displayHelpTopic:function(b,c,e,d,i){e===void 0&&(e={});a.placeHelpTopic(b,
c,function(a){var c=k.getTopicId(),j=k.getTrackingData({to:g.getTopic()+c},e,i);if(a.isError)f.$.extend(j,{isError:!0,errorDetails:a.errorDetails});else if(a.isPlatformError)j.isPlatformError=!0;h={tracking:j,bookmark:d,actualTopicId:c+"",requestedTopicId:b+""}})},displayHelpTopicFromSession:function(a,b,c){k.displayHelpTopic(a,b,c,null,!0)},getTopicId:function(){return i.find(".spaui-help").data("topic")},instrumentRedirects:function(a,b){g.send({from:"topic"+b,where:"redirect",to:"topic"+a})},discoverHelpTopic:function(){if(h){var a=
h.tracking,b=h.bookmark,e=h.actualTopicId,d=h.requestedTopicId;!a.isError&&!a.isPlatformError&&(k.bind(),b&&(b=b.slice(1),c.gebi(b)&&c.updateScrollTop(f.$(b),50)));g.validate(a);g.send(a);e!==d&&k.instrumentRedirects(e,d);h=null}},displayBrowseAllHelp:function(b,c){a.placeEndpoint("/hz/sellerpartner/browse-all-help/",a.getPageType("browseAllHelp"),function(){h={tracking:k.getTrackingData({where:g.getContext("featured"),to:g.getPlace("browse")},b,c)}})},displayBrowseAllHelpFromSession:function(a){k.displayBrowseAllHelp(a,
!0)},getTrackingData:function(a,b,c){var e=a.to,a=f.$.extend({from:d.getFrom()},a,b,{to:e});if(c)a.from=a.to,a.where=g.getContext("session"),a.to=g.getPlace("refresh");return a},discoverBrowseAllHelp:function(){h&&(g.send(h.tracking),h=null)},instrumentExpandCollapse:function(a){g.send({from:d.getFrom(),where:g.getContext("content"),to:a})}};return{init:k.init,displayHelpTopic:k.displayHelpTopic,displayHelpTopicFromSession:k.displayHelpTopicFromSession,displayBrowseAllHelp:k.displayBrowseAllHelp,
displayBrowseAllHelpFromSession:k.displayBrowseAllHelpFromSession,getTopicId:k.getTopicId}});ASPP.when("ASPA","spaui-debug").register("spaui-history",function(f,g){var d={dom:[],search:{content:[],query:[],start:[],total:[]},from:["info"],scroll:[],pop:[]},a="any",c=null,b=0,e=null,l=!1,h=!1,j=!1,m="any",i={init:function(){g.log("history.init()")},returnFrom:function(){return d.from[d.from.length-1]},returnTo:function(){return d.from[d.from.length-2]},returnPop:function(){return d.pop[d.pop.length-
1]},returnFromLength:function(){return d.from.length},prepForHome:function(){g.group("history.prepForHome()");var a=d.dom[0];d.dom=[];d.dom.push(a);var a=d.from[0],b=i.returnFrom();d.from=[];d.from.push(a);d.from.push(b);d.search.query=[];g.info("history: ");g.dir(d);g.groupEnd()},pushDom:function(a){d.dom.push(a)},pushPop:function(a){d.pop.push(a)},pushScroll:function(a){d.scroll.push(a)},popDom:function(){return d.dom.pop()},popPop:function(){return d.pop.pop()},popScroll:function(){return d.scroll.pop()},
update:function(f){g.group("history.update()");g.dir(d);f.isBack?(d.from.pop(),d.search.content.pop(),d.search.query.pop(),d.search.start.pop(),d.search.total.pop()):(d.from.push(f.to),f.to!=="search"&&(a="any",c=null,b=0,e=null),d.search.content.push(a),d.search.query.push(c),d.search.start.push(b),d.search.total.push(e));g.dir(d);g.groupEnd()},setSearchStartHistory:function(a){d.search.start[d.search.start.length-1]=a},returnSearchStartHistory:function(){return d.search.start[d.search.start.length-
1]},returnSearchTotalHistory:function(){return d.search.total[d.search.total.length-1]},returnSearchQueryHistory:function(){return d.search.query[d.search.query.length-1]},setSearchRequest:function(a){h=a},returnSearchRequest:function(){return h},setSearchFocused:function(a){l=a},returnSearchFocused:function(){return l},returnSearchScrollBuffer:function(){return 200},setSearchStart:function(a){b=a},returnSearchStart:function(){return b},returnSearchSize:function(){return 20},setSearchTotal:function(a){e=
a},returnSearchTotal:function(){return e},setSearchQuery:function(a){c=a},returnSearchQuery:function(){return c},returnSearchContent:function(){return a},setSearchShowForums:function(a){j=a},returnSearchShowForums:function(){return j},setSearchFilter:function(a){m=a},returnSearchFilter:function(){return m}};return{init:i.init,update:i.update,prepForHome:i.prepForHome,getFrom:i.returnFrom,getTo:i.returnTo,getPop:i.returnPop,getFromLength:i.returnFromLength,pushDom:i.pushDom,pushPop:i.pushPop,pushScroll:i.pushScroll,
popDom:i.popDom,popPop:i.popPop,popScroll:i.popScroll,setSearchStartHistory:i.setSearchStartHistory,getSearchStartHistory:i.returnSearchStartHistory,getSearchTotalHistory:i.returnSearchTotalHistory,getSearchQueryHistory:i.returnSearchQueryHistory,setSearchRequest:i.setSearchRequest,setSearchFocused:i.setSearchFocused,setSearchStart:i.setSearchStart,setSearchQuery:i.setSearchQuery,getSearchStart:i.returnSearchStart,getSearchContent:i.returnSearchContent,getSearchSize:i.returnSearchSize,getSearchQuery:i.returnSearchQuery,
getSearchTotal:i.returnSearchTotal,setSearchTotal:i.setSearchTotal,setSearchShowForums:i.setSearchShowForums,getSearchShowForums:i.returnSearchShowForums,setSearchFilter:i.setSearchFilter,getSearchFilter:i.returnSearchFilter,getSearchFocused:i.returnSearchFocused,getSearchRequest:i.returnSearchRequest,getSearchScrollBuffer:i.returnSearchScrollBuffer}});ASPP.when("ASPA","spaui-debug","spaui-metrics","spaui-util","spaui-history").register("spaui-hmd",function(f,g,d,a,c){var b,e,l,h={1:!1,2:!1,3:!1,
4:!1},j=!1,m={init:function(a){g.log("hmd.init()");m.hydrate(a);m.bind()},hydrate:function(a){b=a},bind:function(){b.delegate("#spaui-help-hmd-yes","click",m.yes);b.delegate("#spaui-help-hmd-no","click",m.no);b.delegate(".spaui-help-hmd-comments-textarea textarea","click",m.focus);b.delegate(".spaui-help-hmd-comments-textarea textarea","keyup",m.type);b.delegate(".spaui-help-hmd-comments-cancel","click",m.clear);b.delegate(".spaui-help-hmd-comments-send","click",m.send);b.delegate(".spaui-help-hmd-q",
"change",m.check)},dom:function(a){return b.find("#spaui-help-hmd-"+a)},commentsDom:function(a){return e.find(".spaui-help-hmd-comments-"+a)},allCommentsDom:function(a){return b.find(".spaui-help-hmd-comments-"+a)},getContent:function(){return b.find("#spaui-content")},activateComments:function(a){m.dom("question").addClass("spaui-hide");m.dom("message").removeClass("spaui-hide");e=b.find("#spaui-help-hmd-comments-"+a);e.removeClass("spaui-hide");l=e.find(".spaui-help-hmd-comments-textarea textarea");
j=a==="yes";m.getContent().animate({scrollTop:m.getContent()[0].scrollHeight},2E3)},deactivateComments:function(){e&&(e.addClass("spaui-hide"),e=null)},yes:function(b){b.preventDefault();m.activateComments("yes");a.textareaFocusPlaceholderFix(l);m.instrument(b,!0,!1);g.log("hmd.yes()")},no:function(b){b.preventDefault();m.activateComments("no");a.textareaFocusPlaceholderFix(l);m.instrument(b,!1,!1);g.log("hmd.no()")},focus:function(){l.addClass("active");a.textareaFocusPlaceholderFix(l)},type:function(a){if(1E3-
a.currentTarget.value.length<=1)a.currentTarget.value=a.currentTarget.value.substr(0,1E3);m.commentsDom("counter").text(1E3-a.currentTarget.value.length);1E3-a.currentTarget.value.length<21?m.commentsDom("counter").addClass("asp-color-price"):m.commentsDom("counter").removeClass("asp-color-price")},clear:function(a){a.preventDefault();for(var c in h)h[c]=!1,b.find("#spaui-help-hmd-q-"+c).attr("checked",!1);l.val("");l.removeClass("active");m.commentsDom("counter").text(1E3);g.log("hmd.clear()")},
send:function(b){b.preventDefault();a.textareaFocusPlaceholderFix(l);m.instrument(b,j,!0);m.dom("message").addClass("spaui-hide");m.deactivateComments();m.dom("message-again").removeClass("spaui-hide");var c=setTimeout(function(){m.dom("message-again").fadeOut(function(){m.dom("message-again").remove()});clearTimeout(c);c=null},2E3);g.log("hmd.send()")},check:function(b){var c=a.gda(b.currentTarget,"aInputName");(b.target||b.srcElement).checked?h[c]=!0:h[c]=!1;g.info("hmd.check()")},enable:function(b){a.gebi("spaui-content").innerHTML+=
a.gebi("spaui-template-help-hmd").innerHTML;m.allCommentsDom("send").attr("data-topic",b);m.dom("yes").attr("data-topic",b);m.dom("no").attr("data-topic",b)},instrument:function(b,e,g){var b=a.gda(b.currentTarget,"topic"),j="",m="",j=l.val();if(!e&&g){var m="",r;for(r in h)h[r]&&(m+=m===""?"":"|",m+=f.$("label[for=spaui-help-hmd-q-"+r+"]").find(".asp-checkbox-label").html(),h[r]=!1)}e=e?"1":"0";d.sendHmd({from:c.getFrom(),where:"HMD",to:"topic"+b,payloadObj:{source:"Athena",helpHmd:e,helpNodeId:b,
helpHmdSuggestions:m,helpFeedback:j}})}};return{init:m.init,enable:m.enable}});ASPP.when("ASPA","spaui-events","spaui-history","spaui-metrics","spaui-content","spaui-progress","spaui-session","spaui-ajax","spaui-ui","spaui-push-notification","spaui-theming","spaui-alerts","spaui-features","spaui-help","spaui-state").register("spaui-intercept-card",function(f,g,d,a,c,b,e,l,h,j,m,i,k,o,s){var w={UPDATE_ENDPOINT:"/hz/sellerpartner/intercept-task-update",FAILED_REQUEST_REASON:"brokenRequest",FALSE_RESPONSE_REASON:"falseResponseFromController",
DEFAULT_MESSAGE:"spaui-intercept-message25",MESSAGE_25:"spaui-intercept-message25",MESSAGE_50:"spaui-intercept-message50",MESSAGE_75:"spaui-intercept-message75",MESSAGE_100:"spaui-intercept-message100",VIDEO_TYPE:"VIDEO",ARTICLE_TYPE:"ARTICLE",CONTEXT:a.getContext("interceptCardPushNotification"),MESSAGE_FADE_TIME:300,DELAY_BEFORE_SEEING_CONTINUE_MESSAGE:1E4},r,y,t={progressWasInit:!1,resetToHome:!1},n={init:function(a){n.hydrate(a);n.getTaskListDom().length>0&&(n.bind(),s.setShowBrowseAllHelpOnLoad(!1))},
hydrate:function(a){r=a;y=f.$("#spaui-templates");n.parseTaskList()},getTaskListDom:function(){return r.find(".spaui-intercept-task-list")},getMessageDom:function(){return r.find(".spaui-intercept-message")},bind:function(){r.delegate(".spaui-intercept-task-list li a","click",n.taskClicked);r.delegate(".spaui-intercept-community-forums-link","click",n.forumsLinkClicked);r.delegate(".spaui-intercept-continue-button","click",n.continueButtonClicked);g.subscribe(g.getName("newPage"),n.newPageShown);
g.subscribe(g.getName("summon"),n.athenaSummoned);g.subscribe(g.getName("initializedWithoutSummon"),n.onNoSummon)},initialState:function(){n.getTaskListDom().length>0&&n.autoSummon()},onNoSummon:function(){n.presentPushNotification()},attemptProgressInit:function(){if(!t.progressWasInit)b.init({spaui:r,cfg:{current:t.numComplete,fadeIn:400,fadeOut:100,steps:t.numTasks,parentSelector:"#spaui-intercept-header"}}),t.progressWasInit=!0},autoSummon:function(){e.getWasDismissed()||h.summoner({where:a.getContext("interceptTaskList")})},
parseTaskList:function(){var a=n.getTaskListDom();t.cardId=a.data("interceptCardId");t.tasks={};t.numTasks=0;t.numComplete=0;a.find("li").each(function(a){var b=f.$(this),c=b.data("isCompleted"),e=b.data("topicId");t.tasks[e]={id:b.data("id"),topicId:e,rank:a,title:b.find("a").text(),isCompleted:c,wasCompleted:c,taskType:b.data("taskType")};t.numTasks++;c&&t.numComplete++});n.presentShinyObject();n.updateProgress()},newPageShown:function(a){if(a.type===c.getPageType("helpTopic")){if(n.isTopicIdInList(a.topicId)&&
(n.checkOffTask(a.topicId),t.placeContinueButtonInNextArticle)){a=y.find("#spaui-template-intercept-continue > div").clone();c.placeContentAfterHelpArticle(a);var b=a.find(".spaui-intercept-continue-message");b.hide();setTimeout(function(){b.fadeIn({duration:w.MESSAGE_FADE_TIME})},w.DELAY_BEFORE_SEEING_CONTINUE_MESSAGE)}}else a.type===c.getPageType("info")&&h.isSummoned()&&(n.attemptProgressInit(),n.updateTaskList());t.placeContinueButtonInNextArticle=!1},athenaSummoned:function(){g.unsubscribe(g.getName("pushNotificationOpened"),
n.onPushNotificationOpen);j.hide();c.getPage()===c.getPageType("info")&&n.attemptProgressInit();if(t.resetToHome)g.publish(g.getName("goHome")),t.resetToHome=!1},isTopicIdInList:function(a){return t.tasks.hasOwnProperty(a)},shouldTaskPlaceTopic:function(a){a=t.tasks[a];return a.taskType===w.VIDEO_TYPE||a.taskType===w.ARTICLE_TYPE},checkOffTask:function(a){n.instrumentTask("Viewed",a);var b=t.tasks[a];l.get(w.UPDATE_ENDPOINT+"/?cardId="+t.cardId+"&taskIds="+b.id,{},f.$.proxy(n.instrumentUpdate,null,
a,!0),f.$.proxy(n.instrumentUpdate,null,a,!1));if(!b.isCompleted)t.tasks[a].wasCompleted=!1,t.tasks[a].isCompleted=!0,t.numComplete++},taskClicked:function(b){b.preventDefault();var b=f.$(b.target).closest("li"),c=b.data("topicId");n.instrumentTask("Clicked",c);if(n.shouldTaskPlaceTopic(c))t.placeContinueButtonInNextArticle=!0,o.displayHelpTopic(c,b.find("a").attr("href"),{where:a.getContext("interceptTaskList")})},forumsLinkClicked:function(){n.instrument("forumsLinkClicked")},continueButtonClicked:function(){n.instrument("continueButtonClicked")},
updateTaskList:function(){var a=0;n.getTaskListDom().find("li").each(function(){var b=f.$(this),c=t.tasks[b.data("topicId")];if(c.isCompleted&&!c.wasCompleted)b.addClass("spaui-intercept-task-completed"),b.data("isCompleted",!0),c.wasCompleted=!0,a++});a>0&&b.update(a);n.updateProgress()},updateProgress:function(){t.numTasks===4?t.numComplete<=1?n.updateMessage(w.MESSAGE_25):t.numComplete===2?n.updateMessage(w.MESSAGE_50):t.numComplete===3?n.updateMessage(w.MESSAGE_75):t.numComplete===4&&(n.updateMessage(w.MESSAGE_100),
k.setIsInterceptCardComplete(!0)):n.updateMessage(w.DEFAULT_MESSAGE)},updateMessage:function(a){var b=n.getMessageDom(),a=f.$("#spaui ."+a).text();b.text(a)},presentPushNotification:function(){if(m.showPushNotification()){var b=r.find("#spaui-intercept-header h3").text();j.create(b,"",j.INFORMATION,!1);a.send({from:d.getFrom(),where:w.CONTEXT,to:"load"});g.subscribe(g.getName("pushNotificationOpened"),n.onPushNotificationOpen)}},presentShinyObject:function(){m.showShinyObject()&&t.numComplete<t.numTasks&&
(i.displayShinyObjectAlert(void 0,"INFORMATION"),g.subscribe(g.getName("triggerSummon"),n.onShinyObjectClick))},onShinyObjectClick:function(){t.resetToHome=!0},onPushNotificationOpen:function(){t.resetToHome=!0;h.summoner({where:w.CONTEXT})},instrumentUpdate:function(a,b,c){c=c.data;if(!b||c==="false")c="",c=b?w.FALSE_RESPONSE_REASON:w.FAILED_REQUEST_REASON,n.instrumentTask("UpdateFailed",a,{failReason:c})},instrumentTask:function(a,b,c){b=t.tasks[b];b={interceptCardId:t.cardId,taskId:b.id,rank:b.rank,
wasCompleted:b.isCompleted?"true":"false",title:b.title.trim()};f.$.extend(b,c);n.instrument("task"+a,b)},instrument:function(b,c){a.send({from:d.getFrom(),to:b,where:a.getContext("interceptTaskList"),additionalObj:c})},mockConfig:function(a){w=f.$.extend(w,a)},getState:function(){return t}};return{init:n.init,initialState:n.initialState,mockConfig:n.mockConfig,getState:n.getState}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-events","spaui-async").register("spaui-linkcopy",function(f,
g,d,a,c){var b,e=null,l={init:function(a,c){g.getData()&&g.getSpoofer()==="true"&&(b=a,b.delegate(".spaui-url-icon","click",l.linkCopyOpen),b.delegate(".spaui-url-input-close-icon","click",l.linkCopyClose),b.delegate(".spaui-link-copy-container","click",l.stopClickBubbling),e=c,l.bind())},bind:function(){a.subscribe(a.getName("newPage"),l.showURLIconIfPresent);a.subscribe(a.getName("newContentOnPage"),l.showURLIconIfPresent);a.subscribeAsyncModuleEvent("featured-content",c.COMPLETED_EVENT,l.showURLIconIfPresent)},
showURLIconIfPresent:function(){b.find(".spaui-url-icon").removeClass("spaui-hide");b.find(".spaui-search-results-title").addClass("spaui-inline")},linkCopyOpen:function(a){a.preventDefault();var b=f.$(a.currentTarget),c=b.parent(),a=c.find(".spaui-url-input"),c=c.find(".spaui-url-input-close-icon"),b=l.generateLink(b);a.val(b).removeClass("spaui-hide");c.removeClass("spaui-hide");a.select();g.send({from:d.getFrom(),to:g.getPlace("setLinkCopyOpen"),where:g.getContext("content")})},linkCopyClose:function(a){a.preventDefault();
a=f.$(a.currentTarget);a.parent().find(".spaui-url-input").addClass("spaui-hide");a.addClass("spaui-hide");g.send({from:d.getFrom(),to:g.getPlace("setLinkCopyClosed"),where:g.getContext("content")})},stopClickBubbling:function(a){a.preventDefault();a.stopPropagation()},generateLink:function(a){var b=a.data("topic-id"),a=a.data("type");if(a==="help")return e+"/gp/help/"+b;else if(a==="forums")return e+"/forums/thread.jspa?threadID="+b;else throw a+" is not a supported link type";}};return{init:l.init}});
ASPP.when("ASPA","spaui-debug","spaui-util","spaui-state","spaui-metrics","spaui-history","spaui-session","spaui-forums","spaui-ui","spaui-events","spaui-features","spaui-ajax","spaui-help","spaui-direct-answer","spaui-contact-deflection","spaui-alert-util").register("spaui-links",function(f,g,d,a,c,b,e,l,h,j,m,i,k,o,s,w){var r,y=null,t,n={init:function(a,b,c){n.hydrate(a,b,c);n.bind()},hydrate:function(a,b,c){r=a;r.find("#spaui-link-browse");t=b;y=c},bind:function(){r.delegate(".spaui-help-content a",
"click",n.helpContent);r.delegate(".spaui-ph-item-content-inner a","click",n.helpContent);r.delegate("#spaui-search-results .spaui-direct-answer a","click",n.directAnswer);r.delegate(".spaui-link-alerts-internal","click",n.alertsInternal);r.delegate(".spaui-link-alerts-external","click",n.alertsExternal);r.delegate(".spaui-link-ph-policy-internal","click",n.phPolicyInternal);r.delegate(".spaui-link-fc-internal","click",n.fcInternal);r.delegate(".spaui-link-fc-external","click",n.fcExternal);r.delegate(".spaui-link-tool-external",
"click",n.toolExternal);r.delegate(".spaui-link-search-internal","click",n.searchInternal);r.delegate(".spaui-link-search-external","click",n.searchExternal);r.delegate(".spaui-link-no-results-external","click",n.searchNoResultsExternal);r.delegate(".spaui-link-breadcrumb-help","click",n.bcHelp);r.delegate(".spaui-link-breadcrumb-forum","click",n.bcForum);r.delegate("#spaui-link-browse","click",n.browse);r.delegate(".spaui-link-browse-internal","click",n.browseInternal);r.delegate(".spaui-link-browse-parent",
"click",n.browseParent);r.delegate("#spaui-foot-caselog","click",n.caseLog);r.delegate("#spaui-foot-forums","click",n.forums);r.delegate("#spaui-foot-contact","click",n.contact);r.delegate("#spaui-foot-contact","mouseenter",n.contactOnHover);r.delegate("#spaui-foot-contact","mouseleave",n.contactOnLeave);f.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-link-alerts-internal","click",n.pushNotificationInternal);f.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-link-alerts-external",
"click",n.pushNotificationExternal);j.subscribe(j.getName("featuresChanged"),n.updateContactUsState)},updateContactUsState:function(){var a=r.find("#spaui-foot-contact");m.isContactUsEnabled()?a.data("href")&&(a.attr("href",a.data("href")),r.removeClass("spaui-disable-contact-us-weblab")):(r.addClass("spaui-disable-contact-us-weblab"),a.attr("title",y),a.data("href",a.attr("href")),a.attr("href","javascript:void(0)"))},directAnswer:function(a){o.isDirectAnswerTool(f.$(a.currentTarget))&&e.setPinned(!1);
n.contentLink(a,c.getContext("directAnswer"))},helpContent:function(a){n.contentLink(a,c.getContext("content"))},contentLink:function(a,g){var j=a.currentTarget.href,i=a.currentTarget.getAttribute("target");d.isOnArticle();var l=d.startsWith(j,"mailto:"),o=j.match(/\.[0-9a-z]{1,5}$/i),m=a.currentTarget.hash&&n.isLinkToCurrentArticle(j),s=d.getTopicIDFromLink(j),t=d.contains(j,/seller-?central.*\.amazon\./),r=d.contains(j,"www.amazon."),w=d.contains(j,"/hz/productsearch/"),i=["_self","_blank","_parent",
"_top","",null].indexOf(i)!==-1,y=d.isHashOnCurrentPage(j);if(l)c.send({from:b.getFrom(),where:g,to:c.getPlace("mailtoLink"),additionalObj:{email:j.substr(7)}});else if(t&&!m&&!s)c.send({from:b.getFrom(),where:g,to:c.getPlace("launchGenericPage"),additionalObj:{url:j}});else if(!y)if((o||m||s||r||i||w)&&a.preventDefault(),o)c.send({from:b.getFrom(),where:g,to:c.getPlace("fileDownload"),additionalObj:{filename:j.substr(j.lastIndexOf("/")+1)}}),d.openInNewWindow(j);else if(m)h.scrollToHash(a.currentTarget.hash.substr(1));
else if(s)k.displayHelpTopic(d.getTopicIDFromLink(j),j,{where:g});else if(r)c.send({from:b.getFrom(),where:g,to:c.getPlace("retailLink"),additionalObj:{url:j}}),d.openInNewWindow(j);else if(w)e.setPinned(!1),d.openInNewWindow(j);else if(i)d.openInNewWindow(j);else{var j=f.$.extend({},a.target.attributes),l={},F;for(F in j)if(j.hasOwnProperty(F))l[j[F].name]=j[F].value;c.send({from:b.getFrom(),where:g,to:c.getAction("unhandledLink"),additionalObj:l})}},isLinkToCurrentArticle:function(a){var a=d.getTopicIDFromLink(a),
b=k.getTopicId()+"";return a===b},phPolicyInternal:function(a){a.preventDefault();k.displayHelpTopic(d.gda(a.currentTarget,"id"),d.gda(a.currentTarget,"href"),{where:d.gda(a.currentTarget,"where")})},fcInternal:function(a){a.preventDefault();k.displayHelpTopic(d.gda(a.currentTarget,"id"),d.gda(a.currentTarget,"href"),{where:d.gda(a.currentTarget,"where"),payloadObj:{resultRank:d.gda(a.currentTarget,"rank"),resultTotal:d.gda(a.currentTarget,"total")}})},fcExternal:function(a){a.preventDefault();c.send({from:b.getFrom(),
where:d.gda(a.currentTarget,"where"),to:"launch-"+d.gda(a.currentTarget,"to")+"-"+d.gda(a.currentTarget,"id"),payload:"&resultRank="+d.gda(a.currentTarget,"rank")+"&resultTotal="+d.gda(a.currentTarget,"total")});d.openInNewWindow(a.currentTarget.href)},searchInternal:function(a){a.preventDefault();var c=parseInt(d.gda(a.currentTarget,"rank"),10)+b.getSearchStart();k.displayHelpTopic(d.gda(a.currentTarget,"id"),d.gda(a.currentTarget,"href"),{where:d.gda(a.currentTarget,"where"),payloadObj:{resultRank:c,
resultTotal:d.gda(a.currentTarget,"total")}})},searchExternal:function(a){a.preventDefault();var e=parseInt(d.gda(a.currentTarget,"rank"),10)+b.getSearchStart();c.send({from:b.getFrom(),where:d.gda(a.currentTarget,"where"),to:"launch-"+d.gda(a.currentTarget,"to")+"-"+d.gda(a.currentTarget,"id"),payload:"&resultRank="+e+"&resultTotal="+d.gda(a.currentTarget,"total")});d.openInNewWindow(a.currentTarget.href)},searchNoResultsExternal:function(){c.send({from:b.getFrom(),where:c.getContext("noResults"),
to:c.getPlace("launchNoSearchResults")})},bcHelp:function(a){a.preventDefault();var e=a.currentTarget.href,f=d.getTopicIDFromLink(e),j=parseInt(d.gda(a.currentTarget,"rank"),10)+b.getSearchStart();k.displayHelpTopic(f,e,{where:c.getContext("breadcrumb"),payloadObj:{resultRank:j,resultTotal:d.gda(a.currentTarget,"total")}})},bcForum:function(a){a.preventDefault();c.send({from:b.getFrom(),where:c.getContext("breadcrumb"),to:"launch-Forum",payload:"&resultRank="+d.gda(a.currentTarget,"rank")+"&resultTotal="+
d.gda(a.currentTarget,"total")});d.openInNewWindow(a.currentTarget.href)},browse:function(a){a.preventDefault();k.displayBrowseAllHelp()},browseInternal:function(a){a.preventDefault();k.displayHelpTopic(d.gda(a.currentTarget,"id"),d.gda(a.currentTarget,"href"),{where:d.gda(a.currentTarget,"where")})},browseParent:function(a){a.preventDefault();var e=f.$(a.currentTarget).find("a"),a=f.$(a.currentTarget).next(),d="";a.is(":hidden")?(e.addClass("spaui-browse-parent-open"),a.show(),d=c.getPlace("setAhOpen")):
(e.removeClass("spaui-browse-parent-open"),a.hide(),d=c.getPlace("setAhClose"));c.send({from:b.getFrom(),where:c.getContext("content"),to:d+c.sanitizeEventPart(e.attr("id"))})},alertsInternal:function(a,b){a.preventDefault();h.getVisible()||h.summoner({});var e=w.getAlertDetails(w.getAlertFromInnerEvent(a)),f=d.gda(a.currentTarget,"item"),j=d.gda(a.currentTarget,"rank"),g=d.gda(a.currentTarget,"topic"),i=d.gda(a.currentTarget,"total"),l=a.currentTarget.getAttribute("href"),l=l===null?"":l,o=a.currentTarget.innerHTML;
k.displayHelpTopic(g,l,{where:b?c.getContext("pushNotification"):c.getContext("alert"),additionalObj:{item:f,rank:j,total:i,itemUrl:l,itemText:o},payloadObj:{notificationId:e.id,notificationType:e.type,notificationName:e.name}})},alertsExternal:function(a,f){var j=w.getAlertDetails(w.getAlertFromInnerEvent(a)),g=d.gda(a.currentTarget,"item"),h=d.gda(a.currentTarget,"rank"),l=d.gda(a.currentTarget,"total"),o=a.currentTarget.getAttribute("href"),o=o===null?"":o,k=a.currentTarget.innerHTML;a.currentTarget.href.toLowerCase().indexOf("gp/site-metrics/report.html")!==
-1&&i.get("/hz/sellerpartner/alert/REDIRECT_TO_BIZ_REP?ids="+j.id);e.setPinned(!1);c.send({from:b.getFrom(),where:f?c.getContext("pushNotification"):c.getContext("alert"),to:"launch-tool",additionalObj:{item:g,rank:h,total:l,itemUrl:o,itemText:k},payloadObj:{notificationId:j.id,notificationType:j.type,notificationName:j.name}})},toolExternal:function(a){e.setPinned(!1);a=a.currentTarget;a.hasAttribute("data-tool")&&c.send({from:b.getFrom(),where:c.getContext("tools"),to:c.sanitizeEventPart(d.gda(a,
"tool"))})},pushNotificationInternal:function(a){n.alertsInternal(a,!0)},pushNotificationExternal:function(a){n.alertsExternal(a,!0)},caseLog:function(){e.setPinned(!1);c.send({from:b.getFrom(),where:c.getContext("footer"),to:c.getPlace("caseLog")})},forums:function(a){t?(a.preventDefault(),l.displayForums()):c.send({from:b.getFrom(),where:c.getContext("footer"),to:c.getPlace("forums")})},contact:function(a){s.isActive()?(a.preventDefault(),s.displayDeflectionCard(c.getContext("footer"))):m.isContactUsEnabled()?
(e.setPinned(!1),c.send({from:b.getFrom(),where:c.getContext("footer"),to:c.getPlace("contact")})):c.send({from:b.getFrom(),where:c.getContext("footer"),to:c.getPlace("disabledContactUs")})},contactOnHover:function(){m.isContactUsEnabled()||n.presentPopover(y,r.find(".spaui-footer"))},contactOnLeave:function(){r.find(".spaui-popover").remove()},presentPopover:function(a,b){if(!(b.find(".spaui-popover").size()>0)){var c=f.$('<div class="spaui-popover">');c.html(a);b.append(c)}}};return{init:n.init}});
ASPP.when("ASPA","spaui-debug","spaui-util").register("spaui-metrics",function(f,g,d){var a={data:null,TIMEOUT:300,endpoint:{protocol:"https://",host:"fls-na.amazon.com",path:"/1/action-impressions/1/OP/sp-athena/action/athena:",pathHmd:"/1/action-impressions/1/OP/sp-athena/action/help_hmd:",params:"",requestId:0},map:{context:{alert:"alert",alertShinyObject:"alertShinyObject",allAlerts:"allAlerts",async:"async",autoSummonParam:"autoSummonParam",autoSummonHelpParam:"autoSummonHelpParam",breadcrumb:"breadcrumb",
browseForums:"browseForums",content:"content",getSupportCardItem:"getSupportCardItem",directAnswer:"direct-answer",eciNotification:"eciNotification",externalApi:"externalApi",externalTrigger:"externalTrigger",featured:"featured",featuredThreads:"featuredThreads",footer:"footer",globalSearch:"globalSearch",groupedAlert:"groupedAlert",header:"header",interceptTaskList:"interceptTaskList",interceptCardPushNotification:"interceptCardPushNotification",navBack:"navBack",navFeedback:"navFeedback",navHome:"navHome",
navSearch:"navSearch",noHelpResults:"noHelpResults",noResults:"noResults",predictive:"predictive",previewFeedback:"previewFeedback",previewGetAnswers:"previewGetAnswers",previewAnywhere:"previewAnywhere",pushNotification:"pushNotification",results:"results",rating:"rating",rightClick:"rightClick",scFooter:"scFooter",searchSuggestions:"search-suggestions",session:"session",suggestedForums:"suggestedForums",tools:"tools",trigger:"trigger"},place:{alerts:"alerts",async:"async",browse:"browse",caseLog:"caseLog",
contact:"contact",getSupportCard:"getSupportCard",disabledContactUs:"disabledContactUs",globalNav:"globalNav",info:"info",external:"external",feedback:"feedback",forums:"forums",search:"search",searchMore:"searchMore",topic:{id:null,text:"topic"},refresh:"refresh",fileDownload:"fileDownload",mailtoLink:"mailtoLink",retailLink:"retailLink",popPage:"popPage",previewCard:"previewCard",launchGenericPage:"launch-genericPage",launchNoSearchResults:"launch-noSearchResults",loadPushNotification:"loadPushNotification",
dismissPushNotification:"dismissPushNotification",openPushNotification:"openPushNotification",setAlertRead:"setAlertRead",setAlertAbort:"setAlertAbort",setFeaturedContentAndPredictiveHelp:"setFeaturedContentAndPredictiveHelp",setForumsVisible:"setForumsVisible",setForumsVisibleViaConfig:"setForumsVisibleViaConfig",setForumsHidden:"setForumsHidden",setContactUsFooter:"setContactUsFooter",setLaunchContactUs:"setLaunchContactUs",disabledGetSupportClick:"disabledGetSupportClick",setLinkCopyOpen:"setLinkCopyOpen",
setLinkCopyClosed:"setLinkCopyClosed",searchRedirect:"searchRedirect",searchErrorClient:"search-error-client",setAthenaSummoned:"setAthenaSummoned",setAthenaBanished:"setAthenaBanished",setAhOpen:"setAhOpen-",setAhClose:"setAhClose-",setFbRate:"setFbRate",setFbClear:"setFbClear",setFbSend:"setFbSend",setPhAdopt:"setPhAdopt",setPhOpen:"setPhOpen",setPhClose:"setPhClose",setPhDismiss:"setPhDismiss",setPhYes:"setPhYes",setPhNo:"setPhNo",setSizeActive:"",setSizeLarge:"setSizeLarge",setSizeSmall:"setSizeSmall",
alertDiscovered:"alertDiscovered",alertMassDiscovered:"alertMassDiscovered",alertMassRead:"alertMassRead",alertSuppressed:"alertSuppressed",minimized:"minimized",noAlertToShow:"noAlertToShow",groupedAlertInnerDiscover:"groupedAlertInnerDiscover"},action:{unhandledLink:"unhandledLink"}},ADDITIONAL_METADATA:"&additionalMetadata="},c={init:function(b){g.group("metrics.init()");a.endpoint.host=b.host;if(b.hasOwnProperty("path")&&b.path!=="")a.endpoint.path=b.path;a.data=f.state("spaui-state");for(var c in a.data)a.data.hasOwnProperty(c)&&
(a.endpoint.params+="&"+c+"="+a.data[c]);g.log(a);g.groupEnd()},send:function(b,e,d){if(a.data){var e=a.endpoint.protocol+a.endpoint.host+(e===void 0?a.endpoint.path:e),h=a.endpoint.params+"&requestId="+a.data.parentRequestId+"_"+a.endpoint.requestId;c.encodeAdditionalObj(b);c.encodePayloadObj(b);if(b.errorDetails)b.additional=c.appendToAdditional(b.additional,"errorType",b.errorDetails.type),b.additional=c.appendToAdditional(b.additional,"errorJqueryStatus",b.errorDetails.jqueryStatus),b.additional=
c.appendToAdditional(b.additional,"errorHttpStatus",b.errorDetails.httpStatus),b.additional=c.appendToAdditional(b.additional,"errorReadyState",b.errorDetails.readyState);h+=b.additional?b.additional:"";h+=b.payload?b.payload:"";if(b.isError)b.to="error-"+b.to;else if(b.isPlatformError)b.to="error-platform-"+b.to;b=[b.from,b.where,b.to].join("_");f.$.ajax({url:e+b+"?"+h,timeout:a.TIMEOUT}).always(function(){d!==void 0&&f.$.isFunction(d)&&d()})}else g.error("no data for tracking calls");a.endpoint.requestId++},
sendHmd:function(b,e){c.send(b,a.endpoint.pathHmd,e)},encodeAdditionalObj:function(b){if(b.additionalObj){var c=[],d;for(d in b.additionalObj)b.additionalObj.hasOwnProperty(d)&&c.push(d+":"+b.additionalObj[d]);b.additional=a.ADDITIONAL_METADATA+encodeURIComponent(c.join("|"))}},encodePayloadObj:function(a){if(a.payloadObj)a.payload=d.formatObjectAsUrlParams(a.payloadObj,!0)},appendToAdditional:function(b,c,d){c=c+":"+d;b===void 0||b===null||b===""?b=a.ADDITIONAL_METADATA+c:b+="|"+c;return b},validate:function(a){if(a)try{c.validOrThrownForEventPart(a,
"from");c.validOrThrownForEventPart(a,"where");c.validOrThrownForEventPart(a,"to");if(a.additionalObj&&!f.$.isPlainObject(a.additionalObj))throw"METRICS.validate failed, additionalObj must be an object if set";return!0}catch(e){throw e;}else throw"METRICS.validate failed, tracking is empty";},validOrThrownForEventPart:function(a,c){if(a[c]){if(a[c].indexOf("_")!==-1)throw"Failed to validate field '"+c+"' it should not contain underscores (_)";}else throw"Failed to validate field '"+c+"' it was empty";
},sanitizeEventPart:function(a){return a.split("_").join("-")},returnRequestId:function(){return a.endpoint.requestId},returnParentRequestId:function(){return a.data.parentRequestId},returnSession:function(){return a.data.session},returnIsSpoofer:function(){return a.data.isSpoofer},returnRegionId:function(){return a.data.regionId},returnAllData:function(){return a.data},returnAllParams:function(){return a.endpoint.params},returnNextChildRequestId:function(){var b=a.data.parentRequestId+"_"+a.endpoint.requestId;
a.endpoint.requestId++;return b},returnAction:function(b){return a.map.action[b]},returnPlace:function(b){return a.map.place[b]},returnContext:function(b){return a.map.context[b]},setSizeActive:function(b){a.map.place.setSizeActive=b},returnTopic:function(){return a.map.place.topic.text},returnTopicID:function(){return a.map.place.topic.id}};return{init:c.init,send:c.send,sendHmd:c.sendHmd,validate:c.validate,sanitizeEventPart:c.sanitizeEventPart,getSession:c.returnSession,getSpoofer:c.returnIsSpoofer,
getRegionId:c.returnRegionId,getData:c.returnAllData,getParams:c.returnAllParams,getRequestId:c.returnRequestId,getParentRequestId:c.returnParentRequestId,incrementChildRequestId:c.returnNextChildRequestId,getAction:c.returnAction,getPlace:c.returnPlace,getContext:c.returnContext,setSizeActive:c.setSizeActive,getTopic:c.returnTopic,getTopicID:c.returnTopicID}});ASPP.when("ASPA","spaui-ui").register("spaui-overlay",function(f,g){var d={template:f.$('<div id="spaui-fullscreen-overlay" class="spaui-fullscreen-overlay"></div>'),
overlayActive:!1,$window:f.$(window),fadeTime:200},a={createFullscreenOverlay:function(){if(!d.overlayActive)f.$("body").append(d.template.clone()),d.overlayActive=!0,a.bindScroll(),a.recomputeSize(),g.hideClose(),g.contentChanged(),g.makeLarge()},removeOverlay:function(){var c=a.findOverlay();c.fadeOut(d.fadeTime,function(){c.remove();d.overlayActive=!1;a.unbindScroll();g.showClose();g.contentChanged()})},bindScroll:function(){d.$window.bind("scroll resize",a.recomputeSize)},unbindScroll:function(){d.$window.unbind("scroll resize",
a.recomputeSize)},recomputeSize:function(){var c=a.findOverlay(),b=a.calculateTop(),e=a.calculateHeight(b);c.css("top",b);c.css("height",e)},findOverlay:function(){var a="#"+d.template.attr("id");return f.$(a)},calculateTop:function(){var c=f.$("#spooferSpacerDiv").outerHeight()||0,b=a.visibleHeight(f.$("#sc-masthead"),c),e=a.visibleHeight(f.$("#merchant-bar-container"),c);return c+b+e},calculateHeight:function(c){var b=f.$(".sc-footer, #sc_footer").eq(0),e=a.visibleHeight(b),b=a.heightFromBottom(b);
return d.$window.height()-e-c-b},visibleHeight:function(a,b){if(a.size()===0)return 0;var b=b||0,e=a.outerHeight(),f=d.$window.height(),g=a[0].getBoundingClientRect(),j=g.top-b,g=g.bottom;return Math.max(0,j>0?Math.min(e,f-j):g<f?g-b:f)},heightFromBottom:function(a){if(a.size()===0)return 0;var b=d.$window.height(),a=a[0].getBoundingClientRect().bottom;return Math.max(0,b-a)},overrideConfig:function(a){d=f.$.extend(d,a)}};return{createFullscreenOverlay:a.createFullscreenOverlay,removeOverlay:a.removeOverlay,
overrideConfig:a.overrideConfig}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-metrics","spaui-history","spaui-discovery").register("spaui-predictive",function(f,g,d,a,c,b){var e,l=!0,h={init:function(a){g.log("predictive.init()");h.hydrate(a);h.bind()},hydrate:function(a){e=a;b.register("predictive","info",!1,h.adoptionCheck)},bind:function(){e.delegate(".spaui-ph-expand-closed","click",h.show);e.delegate(".spaui-ph-expand-open","click",h.hide);e.delegate(".spaui-ph-dismiss","click",h.dismiss);
e.delegate(".spaui-ph-item-feedback-yes","click",h.yes);e.delegate(".spaui-ph-item-feedback-no","click",h.no);e.delegate("#spaui-ph-dismiss-legal","mouseenter mouseleave",h.legal);e.delegate("#spaui-ph-view-legal","mouseenter mouseleave",h.legal)},getDetails:function(a){a=f.$(a.currentTarget).closest(".spaui-ph-item");return{qid:a.data("question"),pid:f.$("#spaui-ph-header").data("prediction"),rank:a.data("rank"),total:a.data("total")}},show:function(b){b.preventDefault();var c=h.getDetails(b),b=
f.$(b.currentTarget);f.$("#spaui-ph-item-"+c.qid+"-closed").hide();f.$("#spaui-ph-item-"+c.qid+"-open").show();b.attr("data-logged")!=="true"&&(b.attr("data-logged","true"),f.$.post("/hz/recommended-help/api/send-user-action?"+h.getIdParams(c)));h.instrument(c,a.getPlace("setPhOpen"))},hide:function(b){b.preventDefault();b=h.getDetails(b);f.$("#spaui-ph-item-"+b.qid+"-open").hide();f.$("#spaui-ph-item-"+b.qid+"-closed").show();h.instrument(b,a.getPlace("setPhClose"))},dismiss:function(b){b.preventDefault();
b=h.getDetails(b);f.$.post("/hz/recommended-help/api/send-feedback-text?feedbackText=dismissed&"+h.getIdParams(b));h.instrument(b,a.getPlace("setPhDismiss"));f.$("#spaui-ph-item-"+b.qid).remove()},yes:function(b){b.preventDefault();b=h.getDetails(b);f.$.post("/hz/recommended-help/api/send-feedback?feedback=true&"+h.getIdParams(b));f.$("#spaui-ph-item-"+b.qid+"-feedback").hide();f.$("#spaui-ph-item-"+b.qid+"-feedback-ui-yes").show();h.instrument(b,a.getPlace("setPhYes"))},no:function(b){b.preventDefault();
b=h.getDetails(b);f.$.post("/hz/recommended-help/api/send-feedback?feedback=false&"+h.getIdParams(b));f.$("#spaui-ph-item-"+b.qid+"-feedback").hide();f.$("#spaui-ph-item-"+b.qid+"-feedback-ui-yes").show();h.instrument(b,a.getPlace("setPhNo"))},getIdParams:function(a){return"id="+a.qid+"&prediction="+a.pid},instrument:function(b,e){a.send({from:c.getFrom(),to:e,where:a.getContext("predictive"),payloadObj:{resultRank:b.rank,resultTotal:b.total},additionalObj:{questionId:b.qid,topicId:b.pid}})},legal:function(a){a.type===
"mouseenter"&&(e.find("#spaui-ph-dismiss-legal-icon").addClass("on"),e.find("#spaui-ph-view-legal").addClass("on"));a.type==="mouseleave"&&(e.find("#spaui-ph-dismiss-legal-icon").removeClass("on"),e.find("#spaui-ph-view-legal").removeClass("on"))},adoptionCheck:function(){if(l){var a=d.gebi("spaui-ph-header");if(a=a?d.gda(a,"prediction"):null)f.$.post("/hz/recommended-help/api/send-adoption?predictionId="+a),l=!1}}};return{init:h.init}});ASPP.when("ASPA","spaui-debug").register("spaui-progress",function(f,
g){var d={complete:0,current:0,fadeIn:200,fadeOut:100,parentSelector:null,steps:3,ie9:!1,ie8:!1,safari:!1,ie9prefix:"",safariPrefix:""},a,c={init:function(a){if(!a.cfg.parentSelector)throw"parentSelector is required.";c.extend(a.cfg);c.hydrate(a.spaui);c.userAgentSniff();c.updateTransitionEvent();d.ie8?c.ie8():(c.bind(),c.delayUpdate())},extend:function(a){if(a)for(var c in a)a.hasOwnProperty(c)&&(d[c]=a[c])},hydrate:function(b){a=b;a.find(d.parentSelector).prepend('<div id="spaui-intercept-progress-radial" class="spaui-intercept-progress-radial"><div id="spaui-intercept-progress-current" class="spaui-intercept-progress-current">0<span>%</span></div><div id="spaui-intercept-progress-circle" class="spaui-intercept-progress-circle"><div id="spaui-intercept-progress-mask-full" class="spaui-intercept-progress-mask spaui-intercept-progress-full"><div id="spaui-intercept-progress-fill-full" class="spaui-intercept-progress-fill"></div></div><div id="spaui-intercept-progress-mask-half" class="spaui-intercept-progress-mask spaui-intercept-progress-half"><div id="spaui-intercept-progress-fill-half" class="spaui-intercept-progress-fill"></div><div id="spaui-intercept-progress-fix" class="spaui-intercept-progress-fill spaui-intercept-progress-fix"></div></div></div><div class="spaui-intercept-progress-inset"></div><div class="spaui-intercept-progress-circle-back"></div></div>')},
userAgentSniff:function(){d.ie9=f.$("html").hasClass("a-ie9");d.ie8=f.$("html").hasClass("a-ie8");d.safari=navigator.userAgent.indexOf("Safari")!==-1&&navigator.userAgent.indexOf("Chrome")===-1},bind:function(){a.delegate("#spaui-intercept-progress-fix","transitionend",c.revealCompleted)},delayUpdate:function(){setTimeout(function(){c.updateComplete()},10)},updateTotal:function(a){g.log("progress.updateTotal()");if(a+d.current<=d.steps&&a+d.current>0)d.current=a+d.current,c.updateComplete();else throw"That would be larger than steps, or less than zero. Please try again.";
},updateComplete:function(){d.complete=d.current/d.steps;c.updateUI()},updateUI:function(){a.find("#spaui-intercept-progress-current").fadeOut(d.fadeOut,c.updateIndicator)},updateIndicator:function(){var b=d.complete*180,e=b*2;a.find("#spaui-intercept-progress-mask-full").css(d.safariPrefix+d.ie9prefix+"transform","rotate("+b+"deg)");a.find("#spaui-intercept-progress-fill-full").css(d.safariPrefix+d.ie9prefix+"transform","rotate("+b+"deg)");a.find("#spaui-intercept-progress-fill-half").css(d.safariPrefix+
d.ie9prefix+"transform","rotate("+b+"deg)");a.find("#spaui-intercept-progress-fix").css(d.safariPrefix+d.ie9prefix+"transform","rotate("+e+"deg)");(d.ie9||d.ie8)&&c.revealCompleted()},revealCompleted:function(){g.log("progress.revealCompleted()");a.find("#spaui-intercept-progress-current").html(parseInt(d.complete*100,10)+"<span>%</span>");a.find("#spaui-intercept-progress-current").fadeIn(d.fadeIn)},updateTransitionEvent:function(){d.ie9&&c.ie9();d.safari&&c.safari()},ie9:function(){d.ie9prefix=
"-ms-"},safari:function(){d.safariPrefix="-webkit-"},ie8:function(){d.complete=d.current/d.steps;c.revealCompleted()}};return{init:c.init,update:c.updateTotal}});ASPP.when("ASPA","spaui-events","spaui-util").register("spaui-push-notification",function(f,g,d){var a,c,b,e,l=!1,h={width:400,duration:{show:400,hide:300,minimize:300},severities:{HIGH:"urgent",MEDIUM:"alert",OPPURTUNITY:"oppurtunity",INFORMATION:"info"},showDismissClass:"spaui-pn-show-dismiss",showMinimizeClass:"spaui-pn-show-minimize"},
j={init:function(a){j.hydrate(a);j.bind()},hydrate:function(){a=f.$("#spaui-templates");c=a.find("#spaui-push-notification");b=f.$("#sc-quicklink-help").find(".sc-ql-a").find(".sc-quick-txt");e=f.$("#sc-quicklinks-top")},bind:function(){window.addEventListener("resize",function(){l&&j.adjust()})},create:function(a,b,d,f){if(!l)return c.find("#spaui-pn-title").text(a),c.find("#spaui-pn-content").append(b),c.find(".spaui-alert-dismiss").remove(),c.addClass(j.getClassName(d)),f?c.addClass(h.showMinimizeClass):
c.addClass(h.showDismissClass),j.bindExpand(),e.prepend(c),j.adjust(),l=!0,c},bindExpand:function(){c.click(j.expandPushNotification);c.removeClass("expanded")},bindDismissOrMinimize:function(){c.hasClass(h.showMinimizeClass)?c.find("#spaui-pn-title-bar").click(j.collapsePushNotification):c.hasClass(h.showDismissClass)&&c.find("#spaui-pn-close-icon").click(j.hidePushNotification)},hide:function(){c.fadeOut({duration:h.duration.hide,complete:j.afterHideNotification})},isActive:function(){return l},
expandPushNotification:function(){g.publish(g.getName("pushNotificationOpened"));c.unbind("click",j.expandPushNotification);c.addClass("expanded");var a=c.find("#spaui-pn-content");a.css("top",-1*a.height());a.animate({top:0},{duration:h.duration.show,complete:j.bindDismissOrMinimize})},collapsePushNotification:function(){g.publish(g.getName("pushNotificationMinimize"));c.find("#spaui-pn-title-bar").unbind("click",j.collapsePushNotification);var a=c.find("#spaui-pn-content");a.animate({top:-1*a.height()},
{duration:h.duration.minimize,complete:j.bindExpand})},hidePushNotification:function(){g.publish(g.getName("pushNotificationClosed"));j.hide()},afterHideNotification:function(){l=!1;c.removeClass("expanded");a.append(c)},adjust:function(){c.css("top",e.height());c.css("right",-d.getElementRightOffset(e));var a=c.find("#spaui-pn-arrow"),f=b.offset().left-c.offset().left;f+=b.width()/2;f-=10;f=parseInt(f,10);a.css("left",f)},isValidSeverity:function(a){switch(a){case h.severities.HIGH:case h.severities.MEDIUM:case h.severities.OPPURTUNITY:case h.severities.INFORMATION:return!0}return!1},
getClassName:function(a){if(a)return"spaui-pn-"+a.toLowerCase();else throw"severity is not set!";}};return{init:j.init,create:j.create,hide:j.hide,isActive:j.isActive,HIGH:h.severities.HIGH,MEDIUM:h.severities.MEDIUM,OPPURTUNITY:h.severities.OPPURTUNITY,INFORMATION:h.severities.INFORMATION,overrideConfig:function(a){h=f.$.extend(h,a)}}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-util").register("spaui-rightclick",function(f,g,d,a){var c=null,b=null,e=null,l={init:function(a){l.populate(a);
l.enhance();l.bind()},populate:function(a){c=a;b=f.$("#sc-quicklink-help");e=f.$('.sc-footer a[href*="contact-amazon-form.html"], #sc_footer a[href*="contact-amazon-form.html"]')},enhance:function(){b.attr("data-feature-name","scHelpLink");e.attr("data-feature-name","scGetSupportLink")},bind:function(){var a=function(a){a=f.$(a.target);l.handleRightClick(a)};c.bind("contextmenu",a);b.delegate("a","contextmenu",a);e.bind("contextmenu",a);f.$(window).delegate("#spaui-push-notification","contextmenu",
a)},handleRightClick:function(b){var c=b.closest("[data-feature-name]").data("feature-name"),b=b.closest("a").attr("href"),b=b!==void 0?a.getTopicIDFromLink(b):void 0,c={from:d.getFrom(),where:g.getContext("rightClick"),to:c};if(b!==void 0)c.additionalObj={helpTopicId:b};g.send(c)}};return{init:l.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-history","spaui-session","spaui-metrics","spaui-content","spaui-search-suggestions","spaui-help","spaui-global-nav-search","spaui-events").register("spaui-search",
function(f,g,d,a,c,b,e,l,h,j,m){var i,k,o,s,w,r,y=!1,t="Search",n={init:function(a,b,c){g.log("spaui-search init()");n.hydrate(a);n.bind();n.subscribe();t=i.attr("placeholder");(y=c)&&j.init(n.externalSubmitSearch,n.externalSynchronizeSearchBoxValue);l.init(b,t)},hydrate:function(a){g.log("spaui-search hydrate()");k=f.$(document);o=a;i=a.find("#spaui-search-box");s=a.find(".spaui-head-controls-search");w=a.find("#spaui-search-icon");a.find(".spaui-search-filter-wrapper");r=a.find(".spaui-search-filter")},
bind:function(){w.click(n.clickSearch);i.focus(n.focusSearch);i.blur(n.blurSearch);k.keydown(n.keyDown);i.keyup(n.synchronizeGlobalNavSearch);o.delegate("#spaui-toggle-forums","click",n.toggleForumResults);o.delegate(".spaui-search-trigger","click",n.handleSearchTriggerClick)},subscribe:function(){m.subscribe(m.getName("newPage"),n.handleNewPage)},toggleForumResults:function(c){c.preventDefault();var c=f.$(c.currentTarget),e="";o.find(".spaui-search-results").hasClass("showForums")?(c.removeClass("asp-button-selected"),
e=c.find("input").data("include-label"),o.find(".spaui-search-results").removeClass("showForums"),a.setSearchShowForums(!1),b.send({from:a.getFrom(),to:b.getPlace("setForumsHidden"),where:b.getContext("navSearch")})):(c.addClass("asp-button-selected"),e=c.find("input").data("exclude-label"),o.find(".spaui-search-results").addClass("showForums"),a.setSearchShowForums(!0),b.send({from:a.getFrom(),to:b.getPlace("setForumsVisible"),where:b.getContext("navSearch")}));c.find("input").val(e);c.find(".asp-button-text").html(e)},
clickSearch:function(a){a.preventDefault();i.trigger("focus");n.keyDown({keyCode:13})},focusSearch:function(){a.setSearchFocused(!0);s.addClass("on");w.addClass("on");l.newBind(i,n.suggestionsSearch,void 0,s.width())},blurSearch:function(){a.setSearchFocused(!1);s.removeClass("on");w.removeClass("on")},synchronizeGlobalNavSearch:function(){if(y){var a=i.val();j.setSearchBoxValue(a)}},keyDown:function(b){a.getSearchFocused()&&f.$.trim(i.val())!==""&&(b.keyCode||b.which)===13&&n.submitSearch()},suggestionsSearch:function(a){n.submitSearch(null,
a)},submitSearch:function(d,g,j){j===void 0&&(j=function(){});var l=i.val();c.storeSearchQuery(l);d===void 0&&(d={});d=f.$.extend({from:a.getFrom(),where:b.getContext("navSearch")},d,{to:b.getPlace("search")});g?(j("help"),h.displayHelpTopic(g,null,d)):(g=r.val()||"any",a.setSearchQuery(l),a.setSearchStart(0),a.setSearchFilter(g),a.pushPop(""),e.placeSearch(l,g,f.$.proxy(n.searchCompleted,null,j,d)))},searchCompleted:function(c,e,g){if(g.isError)e.isError=!0,e.errorDetails=g.errorDetails,b.send(e);
else if(g.isPlatformError)e.isPlatformError=!0,b.send(e),f.$("#spaui-error-search-retry").bind("click",function(){d.gebi("spaui-search-icon").click()});else{if(g.isRedirect)b.send({from:e.from,where:b.getContext("results"),to:b.getPlace("searchRedirect"),additionalObj:{searchRedirect:g.redirectType,query:a.getSearchQuery()}},void 0,g.callback);else{n.rebindScroll();var h="content="+a.getSearchFilter()+"|start="+a.getSearchStart()+"|size="+a.getSearchSize()+"|query="+a.getSearchQuery();e.payloadObj=
{queryString:h,resultTotal:a.getSearchTotal()};h=d.truncateString(a.getSearchQuery(),100,"...");e.additionalObj=f.$.extend(e.additionalObj,{query:h});b.send(e)}c(g.searchType);setTimeout(function(){n.searchScroll()},100)}},handleSearchTriggerClick:function(a){a.preventDefault();var b=d.gda(a.currentTarget,"search"),a=d.gda(a.currentTarget,"filter");a!==void 0&&r.val(a);b!==void 0&&(i.val(b),n.submitSearch())},externalSubmitSearch:function(a,b,c,e){i.val(a);n.submitSearch(b,c,e)},externalSynchronizeSearchBoxValue:function(a){i.val(a)},
setSearchBoxValue:function(a){if(a===void 0||a===null)a="";a=decodeURIComponent(a);i.val(a);n.synchronizeGlobalNavSearch()},searchScroll:function(){e.placeNextSearchPage(function(c,e){var d="content="+a.getSearchFilter(),f="|start="+a.getSearchStart(),g="|size="+a.getSearchSize(),h="|query="+a.getSearchQuery(),d=d+f+g+h;b.send({isError:!c,errorDetails:e,from:a.getFrom(),where:b.getContext("results"),to:b.getPlace("searchMore"),additionalObj:{query:a.getSearchQuery()},payloadObj:{queryString:d,resultTotal:a.getSearchTotal()}})})},
handleNewPage:function(a){a.type==="search"&&n.rebindScroll()},rebindScroll:function(){o.find("#spaui-content").bind("scroll",n.searchScroll)}};return{setSearchBoxValue:n.setSearchBoxValue,externalSubmitSearch:n.externalSubmitSearch,externalKeyDown:n.externalKeyDown,bindGlobalNav:n.bindGlobalNav,blurSearch:n.blurSearch,init:n.init}});ASPP.when("ASPA","spaui-util","spaui-metrics","spaui-history","spaui-session","spaui-ajax","spaui-shim").register("spaui-search-suggestions",function(f,g,d,a,c,b){var e=
{name:"spaui-search-suggestions",serviceUrl:"/hz/sellerpartner/suggest-search/",lastRequestId:0,someResults:!1,selectedResult:null,lastSearchQuery:null,searchIconMargin:27,dontHideOnNextBlur:!1,weblabActive:!1,enabled:!0,invokeSearchFunc:null,externalPlace:null,defaultWidth:300,enabledSearchSuggestions:!1,searchPlaceholder:null,requestTypingDelay:300},l,h,j,m,i,k={init:function(a,b){if(g.gebi("spaui-search-suggestions"))e.weblabActive=!0;e.enabledSearchSuggestions=a;e.searchPlaceholder=b;k.hydrate()},
hydrate:function(){l=f.$("#spaui-template-search-suggestions");h=f.$("#spaui-search-suggestions");j=f.$("#spaui-search-suggestions-list");m=f.$('<span class="spaui-loading-gif-medium spaui-suggestions-loading">')},newBind:function(a,b,c,d){if(!k.isDisabled()){if(d===void 0)d=e.defaultWidth;k.resize(d);k.unbind(i);k.bind(a);a.after(h);h.css("top",a.outerHeight()-1);e.invokeSearchFunc=b;e.externalPlace=c;k.show()}},unbind:function(a){if(a)l.append(h),a.unbind("focus",k.show),a.unbind("blur",k.onBlur),
a.unbind("keydown",k.onKeyDown),a.unbind("input",k.onChange),e.invokeSearchFunc=null,e.currentPlace=null},bind:function(a){i=a;i.attr("autocomplete","off");i.focus(k.show);i.blur(k.onBlur);i.keydown(k.onKeyDown);i.bind("input",null,k.onChange)},onBlur:function(){e.dontHideOnNextBlur||k.hide();e.dontHideOnNextBlur=!1},onKeyDown:function(a){if(!k.isDisabled()&&(a.keyCode===40||a.keyCode===38||a.keyCode===13)){var b=!0;switch(a.keyCode){case 40:k.moveSelectionDown();break;case 38:k.moveSelectionUp();
break;case 13:k.hide();var b=!1,c=k.getSelectedSuggestion();c&&(b=k.handleSpecialSuggestionSelection(c,a))}return b?(a.preventDefault(),a.stopImmediatePropagation(),!1):!0}},onChange:function(){k.resetSelection(!1);g.delayFunc(function(){var a=i.val();k.search(a)},e.requestTypingDelay)},resize:function(a){k.isDisabled()||h.width(a-e.searchIconMargin)},show:function(){var a=i.val();a===""||a===e.searchPlaceholder?k.loadPreviousSearchSuggestions():e.someResults?h.addClass("shown"):(a=i.val(),k.search(a))},
hide:function(){h.removeClass("shown")},showLoading:function(){h.addClass("shown");j.empty();h.append(m)},hideLoading:function(){m.remove()},enable:function(){e.enabled=!0},disable:function(){e.enabled=!1},isDisabled:function(){return!e.enabled||!e.weblabActive},search:function(a){if(!k.isDisabled()&&e.enabledSearchSuggestions&&(a=a.trim(),a!==e.lastQuery&&a!==e.searchPlaceholder)){var c=++e.lastRequestId;a===""?k.showSearchResults(c,!1,[],a):(k.showLoading(),k.instrumentRequest(),b.get(e.serviceUrl+
encodeURIComponent(a)+"/",{dataType:"json"},f.$.proxy(function(a,b,c){k.showSearchResults(a,!0,b,c.data)},null,c,a),function(){k.hide();k.instrumentFailure()}))}},showSearchResults:function(a,b,c,d){if(!k.isDisabled()&&a===e.lastRequestId)k.hideLoading(),e.lastQuery=c,k.displayResults(d,b)},displayResults:function(a,b){if(!k.isDisabled())if(b&&k.instrumentResponse(a.length),a.length===0)j.empty(),h.removeClass("shown"),e.someResults=!1;else{var c={tools:{resultKind:"SellerCentralTool",kind:"tool",
title:h.data("tools-title"),number:3,lineBreak:!0},history:{resultKind:"History",kind:"history",title:h.data("history-title"),number:3,lineBreak:!0},help:{resultKind:"PredictiveHelp",kind:"help",title:h.data("help-title"),number:3},previousSearch:{resultKind:"previous",kind:"previous-search",title:h.data("previous-title"),number:3}};e.someResults=!0;var d=i.val();if(a&&a.length){j.empty();h.addClass("shown");var l=1,m;for(m in c)if(c.hasOwnProperty(m)){var n=c[m],A=null;a.forEach(function(a){if(a.kind===
n.resultKind&&n.number>0){var b=k.getTopicIDFromResult(a),c=k.generateLinkText(n,a,b);c!==null&&(n.title&&A===null&&j.append('<span class="suggestion-group-title">'+n.title+('<span class="spaui-sprite spaui-suggestion-icon spaui-suggestion-icon-'+n.kind+'"></span>')+"</span>"),n.number--,A=k.generateSearchSuggestionItem(d,a,n,c,b,l),j.append(A),l++)}});n.lineBreak&&A!==null&&j.append('<div class="suggestion-group-separator">')}e.lastSearchQuery=d;e.lastNumResults=l-1;k.resetSelection();j.find(".result-link").each(function(){f.$(this).attr("data-total",
l-1)});j.find("a").mousedown(function(){e.dontHideOnNextBlur=!0});j.find("a").click(function(a){k.instrumentClick(this);var b=f.$(this);if(b.hasClass("spaui-suggestion-history")||b.hasClass("spaui-suggestion-previous-search"))return i.val(g.gda(b,"name")),e.invokeSearchFunc(),k.hide(),a.stopImmediatePropagation(),!1;else k.handleSpecialSuggestionSelection(b,a)})}}},getTopicIDFromResult:function(a){try{var b=null,c=JSON.parse(a.data);if(f.$.isArray(c))b=c[0].HELP_TOPIC_ID;return b}catch(e){return null}},
generateLinkText:function(a,b,c){var e="/hz/help/search?query="+b.text;if(a.resultKind==="SellerCentralTool")try{e=JSON.parse(b.data).ToolPath}catch(d){return null}else if(a.resultKind==="PredictiveHelp")if(c)e="/gp/help/"+c;else return null;return e},generateSearchSuggestionItem:function(a,b,c,e,d,g){a=k.getHighlightedContent(a,b.text);e=f.$('<a class="spaui-suggestion-'+c.kind+'" href="'+e+'">'+a+"</a>");e.addClass("result-link");e.attr("data-name",b.text);e.attr("data-kind",c.kind);e.attr("data-rank",
g);d!==null&&c.resultKind==="PredictiveHelp"&&e.attr("data-topic-id",d);return e},handleSpecialSuggestionSelection:function(a,b){var d=!1;a.hasClass("spaui-suggestion-tool")?(g.redirect(a.attr("href")),c.setPinned(!1),b.preventDefault(),d=!0):a.hasClass("spaui-suggestion-help")&&(d=g.gda(a,"topic-id"),e.invokeSearchFunc(d),k.hide(),b.preventDefault(),d=!0);return d},getHighlightedContent:function(a,b){var a=a.replace(/\W+/g," "),a=a.replace(/\s+/g," "),c=a.split(" "),e={},d;for(d in c)if(c.hasOwnProperty(d)){var f=
c[d];e.hasOwnProperty(f)||f===""||(e[f]=!0)}c=Object.keys(e).join("|");return b.replace(RegExp("("+c+")","gi"),'<span class="highlight_text">$1</span>')},instrumentClick:function(a){a&&k.instrumentSend("result-selected",{query:i.val(),name:g.gda(a,"name"),kind:g.gda(a,"kind"),rank:g.gda(a,"rank"),total:g.gda(a,"total")})},instrumentRequest:function(){k.instrumentSend("request",{query:i.val()})},instrumentResponse:function(a){k.instrumentSend("response",{query:i.val(),total:a})},instrumentFailure:function(){k.instrumentSend("request-error",
{query:i.val()})},instrumentSend:function(b,c){d.send({from:e.externalPlace?e.externalPlace:a.getFrom(),to:b,where:d.getContext("searchSuggestions"),additionalObj:c})},resetSelection:function(a){e.selectedResult=null;k.changeSelection(a)},moveSelectionDown:function(){if(e.selectedResult===null)e.selectedResult=0;else if(e.selectedResult++,e.selectedResult>=e.lastNumResults)e.selectedResult=null;k.changeSelection()},moveSelectionUp:function(){if(e.selectedResult===null)e.selectedResult=e.lastNumResults-
1;else if(e.selectedResult--,e.selectedResult<0)e.selectedResult=null;k.changeSelection()},changeSelection:function(a){a=a===void 0?!0:a;j.find("a").removeClass("selected-result");var b=i.val(),c=e.lastSearchQuery;e.selectedResult!==null&&e.selectedResult>=0&&e.selectedResult<e.lastNumResults&&(c=k.getSelectedSuggestion(),c.addClass("selected-result"),c=g.gda(c,"name"));a&&b!==c&&i.val(c)},getSelectedSuggestion:function(){return e.selectedResult===null?null:j.find("a").eq(e.selectedResult)},loadPreviousSearchSuggestions:function(){var a=
[];c.getLastSearches().forEach(function(b){a.push({kind:"previous",text:b})});k.displayResults(a,!1)},overrideConfig:function(a){e=f.$.extend({},e,a)}};return{overrideConfig:k.overrideConfig,hide:k.hide,showLoading:k.showLoading,hideLoading:k.hideLoading,enable:k.enable,disable:k.disable,newBind:k.newBind,resize:k.resize,init:k.init}});ASPP.when("ASPA","spaui-debug","spaui-metrics","spaui-history","spaui-util","spaui-events").register("spaui-session",function(f,g,d,a,c){var b={id:null,data:{article:{topicID:null,
link:null},closeAffordance:{show:!0},pinned:{is:!1},preview:{show:!0},size:{large:!1},lastSearches:[],dismissed:!1,timeSellerViewingArticle:null,deflectionVisitId:null,contactUsLinkClicked:!1}},e={init:function(){g.log("spaui-session init()");if(d.getSession())g.info("setting "+d.getSession()+" as session key."),b.id=d.getSession();if(typeof JSON==="undefined"||typeof localStorage==="undefined")g.error("No localStorage on init."),d.send({from:a.getFrom(),to:"localStorage",where:"info",additional:"&additionalMetadata=no-session-storage-support"});
else{try{var c=JSON.parse(localStorage.getItem("spaui"));g.info("storage:");g.dir(c);e.updateCfgData(c)}catch(f){}g.info("cfg.session:");g.dir(b)}},updateCfgData:function(a){a.id&&a.id===b.id?(g.info("EXISTING SESSION: use session data from non-expired key: "+b.id),b.data=f.$.extend(!0,{},b.data,a.data)):(g.info("session is expired or nonexistent. use new key: "+b.id),localStorage.removeItem("spaui"))},returnTopicID:function(){return b.data.article.topicID},returnTopicURL:function(){return b.data.article.link},
returnSize:function(){return b.data.size.large},returnPinned:function(){return b.data.pinned.is},returnPreview:function(){return b.data.preview.show},setPreview:function(a){b.data.preview.show=a;e.update()},setPinned:function(a){b.data.pinned.is=a;e.update()},setTopicID:function(a){b.data.article.topicID=a;e.update()},setTopicURL:function(a){b.data.article.link=a;e.update()},returnCloseAffordance:function(){return b.data.closeAffordance.show},setCloseAffordance:function(a){b.data.closeAffordance.show=
a;e.update()},setSize:function(a){b.data.size.large=a;e.update()},setTopic:function(a){e.setTopicID(a);e.setTopicURL(a)},update:function(){typeof localStorage==="undefined"?g.error("No localStorage. Instrument?"):typeof JSON==="undefined"?g.error("No JSON. Instrument?"):localStorage.setItem("spaui",JSON.stringify(b))},getLastSearches:function(){return b.data.lastSearches},getWasDismissed:function(){return b.data.dismissed},setWasDismissed:function(a){b.data.dismissed=a;e.update()},getTimeSellerViewingArticle:function(){return b.data.timeSellerViewingArticle},
setTimeSellerViewingArticle:function(a){b.data.timeSellerViewingArticle=a;e.update()},revertSellerToInfoCard:function(){e.setTopic(null)},storeSearchQuery:function(a){b.data.lastSearches.unshift(a);b.data.lastSearches=c.getUniqueArray(b.data.lastSearches);b.data.lastSearches.splice(3,b.data.lastSearches.length);e.update()},setDeflectionCardVisitId:function(a){b.data.deflectionVisitId=a;e.update()},getDeflectionCardVisitId:function(){return b.data.deflectionVisitId},setContactUsLinkClicked:function(a){b.data.contactUsLinkClicked=
a;e.update()},getContactUsLinkClicked:function(){return b.data.contactUsLinkClicked}};return{setTopic:e.setTopic,setCloseAffordance:e.setCloseAffordance,getCloseAffordance:e.returnCloseAffordance,setTopicID:e.setTopicID,setSize:e.setSize,setTopicURL:e.setTopicURL,setPinned:e.setPinned,setPreview:e.setPreview,getPreview:e.returnPreview,getPinned:e.returnPinned,getSize:e.returnSize,getTopicID:e.returnTopicID,getTopicURL:e.returnTopicURL,getLastSearches:e.getLastSearches,getWasDismissed:e.getWasDismissed,
setWasDismissed:e.setWasDismissed,getTimeSellerViewingArticle:e.getTimeSellerViewingArticle,setTimeSellerViewingArticle:e.setTimeSellerViewingArticle,revertSellerToInfoCard:e.revertSellerToInfoCard,storeSearchQuery:e.storeSearchQuery,updateCfgData:e.updateCfgData,init:e.init,setDeflectionCardVisitId:e.setDeflectionCardVisitId,getDeflectionCardVisitId:e.getDeflectionCardVisitId,setContactUsLinkClicked:e.setContactUsLinkClicked,getContactUsLinkClicked:e.getContactUsLinkClicked}});ASPP.register("spaui-shim",
function(){var f={init:function(){f.objectKeys();f.trim();f.endsWith();f.arrayIndexOf();f.foreach();f.filter();f.include()},objectKeys:function(){if(!Object.keys)Object.keys=function(f){var d=[],a;for(a in f)f.hasOwnProperty(a)&&d.push(a);return d}},trim:function(){typeof String.prototype.trim!=="function"&&Object.defineProperty(String.prototype,"trim",{value:function(){return this.replace(/^\s+|\s+$/g,"")}})},endsWith:function(){String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",
{value:function(f,d){var a=this.toString();if(typeof d!=="number"||!isFinite(d)||Math.floor(d)!==d||d>a.length)d=a.length;d-=f.length;a=a.indexOf(f,d);return a!==-1&&a===d}})},arrayIndexOf:function(){Array.prototype.indexOf||Object.defineProperty(Array.prototype,"indexOf",{value:function(f,d){var a;if(this===null||this===void 0)throw new TypeError('"this" is null or not defined');var c=Object(this),b=Math.abs(c.length);if(b===0)return-1;a=+d||0;Math.abs(a)===Infinity&&(a=0);if(a>=b)return-1;for(a=
Math.max(a>=0?a:b-Math.abs(a),0);a<b;){if(a in c&&c[a]===f)return a;a++}return-1}})},foreach:function(){Array.prototype.forEach||Object.defineProperty(Array.prototype,"forEach",{value:function(f,d){var a,c;if(this===null)throw new TypeError(" this is null or not defined");var b=Object(this),e=b.length>>>0;if(typeof f!=="function")throw new TypeError(f+" is not a function");arguments.length>1&&(a=d);for(c=0;c<e;){var l;c in b&&(l=b[c],f.call(a,l,c,b));c++}}})},filter:function(){Array.prototype.filter||
Object.defineProperty(Array.prototype,"filter",{value:function(f){if(this===void 0||this===null)throw new TypeError;var d=Object(this),a=d.length>>>0;if(typeof f!=="function")throw new TypeError;for(var c=[],b=arguments.length>=2?arguments[1]:void 0,e=0;e<a;e++)if(e in d){var l=d[e];f.call(b,l,e,d)&&c.push(l)}return c}})},include:function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(f,d){var a=Object(this),c=parseInt(a.length,10)||0;if(c===0)return!1;
var b=parseInt(d,10)||0;b>=0||(b=c+b,b<0&&(b=0));for(var e;b<c;){e=a[b];if(f===e||f!==f&&e!==e)return!0;b++}return!1}})}};return{init:f.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-theming").register("spaui-state",function(f,g,d,a){var c,b,e,l,h,j,m,i={showBrowseAllHelpOnLoad:!0},k={autoSummonParam:"spaui-auto-summon",helpSummonParam:"spaui-help-topic"},o={init:function(a){g.log("spaui-state init()");o.initCfg(a);o.override()},initCfg:function(a){c=a.location.search.split(/[\?&]+/);
b=encodeURIComponent(document.getElementsByTagName("title")[0].innerHTML);e=a.location.pathname.split(/\/ref=/)[0];l=encodeURIComponent(a.location.hash);h="";j={title:"spaui",url:"spaui-url",spauiDebug:"spauiDebug",auiDebug:"1",stringDebug:"true",auiReset:"1",athenaNotificationMockType:void 0};m=a.location.search},override:function(){var a=c.length,f,g={};for(f=0;f<a;f++){var i=c[f].split(/\=/);i[0]===j.title&&(b=i[1]);i[0]===j.url&&(e=i[1]);i[0]===j.spauiDebug?(g.spauiDebug="1",g.auiDebug="1",g.auiReset=
"1"):i[0]in j&&(g[i[0]]=j[i[0]]||i[1])}h=d.formatObjectAsUrlParams(g,!0)},getState:function(a){return i[a]},setState:function(a,b){i[a]=b},isParamPresent:function(a){return m.indexOf(a)!==-1},isOnUrl:function(a){return a instanceof RegExp?a.test(e):e.indexOf(a)!==-1},isAnySummoningParamPresent:function(){for(var a=Object.keys(k),b=0;b<a.length;b++)if(o.isParamPresent(k[a[b]]))return!0;return!1},getParamValue:function(a){var b=m,c=b.indexOf(a);if(!(c<0))return a=b.indexOf("=",c),c=b.indexOf("&",c),
a<0||a>c&&c>-1?void 0:c<0?b.substring(a+1):b.substring(a+1,c)},enhanceUrl:function(c){c=c.split("#");c[0]+=c[0].indexOf("?")!==-1?c[0].endsWith("&")?"":"&":"?";c[0]=c[0]+"pageTitle="+b+"&pageUrl="+e+"&pageHash="+l+h+"&theme="+a.getTheme();return c.join("#")}};return{init:o.init,showBrowseAllHelpOnLoad:f.$.proxy(o.getState,null,"showBrowseAllHelpOnLoad"),setShowBrowseAllHelpOnLoad:f.$.proxy(o.setState,null,"showBrowseAllHelpOnLoad"),isParamPresent:o.isParamPresent,isAnySummoningParamPresent:o.isAnySummoningParamPresent,
getParamValue:o.getParamValue,summoningParams:k,enhanceUrl:o.enhanceUrl,isOnUrl:o.isOnUrl}});ASPP.when("ASPA").register("spaui-theming",function(f){var g="",d=!1,a=!1,c=999,b={NEW_SELLER_THEME:"new-seller-theme",TWELVE_MONTH_THEME:"twelve-month-theme"};return{init:function(){var b=f.state("spaui-theming-state");g=b.theme;d=b.hideFeedbackOnInfoCard==="true";a=b.hideAllAlerts==="true";c=parseInt(b.hideAlertLevel,10)},getTheme:function(){return g},isFeedbackDisabledOnInfoCard:function(){return d},shouldHideAlerts:function(b){return a||
b>c},showPushNotification:function(){return g===b.NEW_SELLER_THEME},showShinyObject:function(){return g===b.TWELVE_MONTH_THEME},THEMES:b}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-state","spaui-history","spaui-metrics","spaui-ui","spaui-content","spaui-events","spaui-features","spaui-search","spaui-help","spaui-alerts","spaui-contact-deflection").register("spaui-triggers",function(f,g,d,a,c,b,e,l,h,j,m,i,k,o){var s=null,w=null,r={},y={init:function(a){g.log("triggers.init()");r.athenaHome=
a.athenaHome;y.checkForAutoSummonParam();y.checkForPinRequest(d.gebi("spaui-pin-request"));y.checkForTabbedContent(d.gebi("spaui-hash"));f.$("body ").delegate(".spaui-trigger","click",y.handleClick);window.ATHENA_DISABLE_EXTERNAL_LINK_ONCLICK=!0;a.footerContactUs&&y.bindContactUsLinks()},bindContactUsLinks:function(){var a=f.$(".sc-footer").find('a[href*="contact-amazon-form.html"]');a.length===0&&(a=f.$("#sc_footer").find('a[href*="contact-amazon-form.html"]'));a.length===1&&(a.addClass("spaui-trigger"),
a.attr("data-spaui",'{"type":"contact-us","data":{"page":"sx-athena","context":"contactusfooter"}}'),a.attr("data-href",a.attr("href")),a.removeAttr("href"))},checkForAutoSummonParam:function(){if(a.isParamPresent(a.summoningParams.autoSummonParam))e.summoner({where:b.getContext("autoSummonParam")});else if(a.isParamPresent(a.summoningParams.helpSummonParam)){var c=a.getParamValue(a.summoningParams.helpSummonParam);i.displayHelpTopic(c,null,{where:b.getContext("autoSummonHelpParam")});e.summoner({where:b.getContext("autoSummonHelpParam"),
additionalObj:{topicID:c}})}},checkForPinRequest:function(a){a&&(g.warn("FOUND PIN"),e.summoner({external:!0}));g.log("triggers.checkForPinRequest()")},checkForTabbedContent:function(a){g.log("triggers.checkForTabbedContent()");if(a&&(g.warn("FOUND HASH"),s=a,w=d.gda(s,"regex"),"onhashchange"in window))window.onhashchange=y.hashChange},hashChange:function(){var a=window.location.hash;a.match(w)&&l.placeFeaturedAndPredictive(function(e,d){b.send({isError:!e,errorDetails:d,from:c.getFrom(),where:b.getContext("externalTrigger"),
to:b.getPlace("setFeaturedContentAndPredictiveHelp"),additionalObj:{action:"tabSwitch",hash:a}})})},handleClick:function(a){if(typeof JSON!=="undefined")try{var b=JSON.parse(d.gda(a.currentTarget,"spaui"));b.data.href=a.currentTarget.href;b.type==="topic"&&(a.preventDefault(),y.placeTopic(b.data));b.type==="page"&&(a.preventDefault(),y.placePage(b.data));b.type==="search"&&(a.preventDefault(),y.placeSearch(b.data));if(b.type==="forum")return g.error("no forums yet."),{error:"forums are not yet supported."};
b.type==="contact-us"&&y.handleContactUs(a,b.data);e.getVisible()||e.summoner({external:!0})}catch(c){}},handleContactUs:function(a){a.preventDefault();var d=e.getVisible(),f=o.isActive();!d&&!f?(r.athenaHome({preventDefault:function(){}}),a=b.getPlace("setContactUsFooter")):a=b.getPlace("disabledGetSupportClick");d||e.summoner({external:!1});f?o.displayDeflectionCard(b.getContext("scFooter"),!d):b.send({from:c.getFrom(),to:a,where:b.getContext("trigger")})},placeTopic:function(a){i.displayHelpTopic(a.id,
a.href,{where:b.getContext("externalTrigger"),additionalObj:{client:a.page,context:a.context}},a.bookmark)},placePage:function(a){var c=a.id.toLowerCase();if(c==="home")if(e.isSummoned())h.publish(h.getName("goHome"));else{var d=function(){h.publish(h.getName("goHome"));h.unsubscribe("summon",d)};h.subscribe("summon",d)}else a={where:b.getContext("externalTrigger"),additionalObj:{page:a.page,context:a.context}},c==="browse"&&i.displayBrowseAllHelp(a),c==="alerts"&&k.displayAllAlerts(a)},placeSearch:function(a){m.externalSubmitSearch(decodeURIComponent(a.query),
{where:b.getContext("externalTrigger"),additionalObj:{client:a.page,context:a.context}})}};return{init:y.init}});ASPP.when("ASPA","spaui-debug","spaui-util","spaui-session","spaui-history","spaui-metrics","spaui-predictive","spaui-search-suggestions","spaui-featured-content","spaui-events","spaui-theming").register("spaui-ui",function(f,g,d,a,c,b,e,l,h,j,m){var i,k,o,s,w,r,y,t,n,A,u,z,q=!1,C=null,D=0,p=!1,E=!1,x={init:function(a){g.log("spaui-ui init()");x.hydrate(a);x.bind();x.handleSpooferBar()},
hydrate:function(a){i=f.$(window);k=a;o=a.find(".spaui-head-controls-search");s=a.find(".spaui-head-controls-search #spaui-search-icon");w=a.find(".spaui-head-controls-pop");a.find("#spaui-head-controls");r=a.find("#spaui-close");y=a.find("#spaui-head-controls-close-affordance");t=f.$("#sc-quicklink-help").find("a");n=f.$("#helpMenuID").find("a");A=a.find("#spaui-resize");u=f.$("#athena-controlled-width-area");z=f.$("#globalActionBar");u.length!==0&&(p=!0);C=410},bind:function(){t.click(x.summon);
n.click(x.summon);r.click(x.banish);y.hover(x.closeAffordHover);t.hover(x.triggerHover);A.click(x.resize);z.length!==0&&i.scroll(x.windowScroll)},initialState:function(){a.getSize()?x.makeLarge():x.makeSmall()},summon:function(a){a.preventDefault();j.publish(j.getName("triggerSummon"));x.summoner({})},summoner:function(a){x.isSummoned()||(q=!0,k.css("display","block"),x.setSize(C),p&&u.animate({width:C},200),k.animate({marginRight:0},200,function(){x.summoned(a)}))},summoned:function(d){g.group("summoned()");
a.setPinned(!0);a.setPreview(!1);var e="";d.where?e=d.where:(e=d.session?b.getContext("session"):b.getContext("trigger"),d.external&&(e=b.getContext("externalTrigger")));var h={theme:m.getTheme()};d.additionalObj&&f.$.extend(h,d.additionalObj);b.send({from:c.getFrom(),to:b.getPlace("setAthenaSummoned"),where:e,additionalObj:h});E=!0;q=!1;x.closeAffordance();j.publish(j.getName("summon"));g.groupEnd()},banish:function(b){b.preventDefault();a.setWasDismissed(!0);x.banisher()},banisher:function(a){j.publish(j.getName("dismissed"));
q||(q=!0,p&&u.animate({width:0},300),k.animate({marginRight:"-="+C},300,function(){x.banished(a)}))},banished:function(d){g.group("banished()");k.css("display","none");a.setPinned(!1);d=f.$.extend({from:c.getFrom(),where:b.getContext("header"),to:b.getPlace("setAthenaBanished")},d);b.send(d);q=E=!1;g.groupEnd()},isSummoned:function(){return q||E},resize:function(a){a.preventDefault();x.resizer(a)},resizer:function(){a.getSize()?x.makeSmall(!0):x.makeLarge(!0)},makeSmall:function(c){c&&a.getSize()&&
b.setSizeActive(b.getPlace("setSizeSmall"));a.setSize(!1);A.removeClass("spaui-resize-large");x.setSize(410)},makeLarge:function(c){c&&!a.getSize()&&b.setSizeActive(b.getPlace("setSizeLarge"));a.setSize(!0);A.addClass("spaui-resize-large");x.setSize(x.calculateLargeWidth())},setSize:function(a,b){C=a;var c=x.getSearchSize(C);E?(p&&u.animate({width:C},250),b||k.animate({width:C},250,x.resized),o.animate({width:c},250).css("overflow","visible")):(k.css("margin-right","-"+C+"px"),k.width(C),o.width(c));
l.resize(c+s.width()-1)},resized:function(){var a="<style>";a+="#spaui {width:"+C+"px;}";a+="#spaui-next {right:-"+C+"px;}";a+="#spaui-prev {right:"+C+"px;}";a+="</style>";d.gebi("spaui-css-override").innerHTML=a;a=b.getPlace("setSizeActive");a!==""&&b.send({from:c.getFrom(),to:a,where:b.getContext("header")})},getSearchSize:function(a){a-=30;w.css("display")!=="none"&&(a-=26);a-=26;a-=x.getCloseIconSize();a-=8;return a},closeAffordance:function(){a.getCloseAffordance()&&(a.setCloseAffordance(!1),
y.show(),setTimeout(x.closeAffordStartFade,1E3))},closeAffordStartFade:function(){y.addClass("spaui-fade");setTimeout(x.closeAffordAfterFade,1250)},closeAffordAfterFade:function(){y.remove()},closeAffordHover:function(){y.remove()},triggerHover:function(a){if(a.type==="mouseenter")a.currentTarget.style.color="#e47911",a.currentTarget.style.cursor="pointer";if(a.type==="mouseleave")a.currentTarget.style.color="",a.currentTarget.style.cursor="auto"},calculateLargeWidth:function(){var a=Math.min(parseInt((i.width()-
410)*0.4+410,10),575);a<=410&&(a=411);return a},returnVisible:function(){return E},handleSpooferBar:function(){d.gebi("spooferDiv")&&setTimeout(function(){D=f.$("#spooferDiv").outerHeight();k.css("top",D)},300)},windowScroll:function(){var a=0,a=z.length!==0&&z.css("position")==="fixed"?z.outerHeight():D;k.css("top",a)},scrollToHash:function(a){var b;a.toLowerCase()==="top"?f.$("#spaui-content").scrollTop(0):(b=f.$("#spaui"),d.gebi(a)&&f.$("#spaui-content").find('a[name="'+a+'"]').length>0?(g.info("links.helpContent(): We have an ID & an Name attribute, use ID."),
d.updateScrollTop(b.find("#"+a),55)):(d.gebi(a)&&(g.info("links.helpContent(): We have just an ID."),d.updateScrollTop(b.find("#"+a),55)),f.$("#spaui-content").find('a[name="'+a+'"]').length>0&&(g.info("links.helpContent(): We have just a name attribute."),d.updateScrollTop(b.find('a[name="'+a+'"]'),70))))},contentChanged:function(){var a=x.getSearchSize(C);o.animate({width:a},void 0).css("overflow","visible")},hideClose:function(){r.css("display","none");o.css("right","auto")},showClose:function(){r.css("display",
"");o.css("right","")},getCloseIconSize:function(){return r.css("display")!=="none"?44:13}};return{scrollToHash:x.scrollToHash,summon:x.summon,summoner:x.summoner,banish:x.banish,banisher:x.banisher,resize:x.resize,getVisible:x.returnVisible,getLargeWidth:x.calculateLargeWidth,makeSmall:x.makeSmall,makeLarge:x.makeLarge,isSummoned:x.isSummoned,initialState:x.initialState,contentChanged:x.contentChanged,hideClose:x.hideClose,showClose:x.showClose,init:x.init}});ASPP.when("ASPA").register("spaui-util",
function(f){var g=null,d={init:function(a){g=a},textareaFocusPlaceholderFix:function(a){a.attr("placeholder")===a.val()&&a.val("")},returnTopicIDFromLocation:function(){return d.returnTopicIDFromLink(g.location.href)},returnTopicIDFromLink:function(a){var c,b=/\/help\/([\d]+)/;a.match(b)&&a.match(b)[1]&&(c=a.match(b)[1]);for(var b=a.split(/[\?&]+/),d=b.length,a=0;a<d;a++){var f=b[a].split("=");f[0]==="itemID"&&(f=f[1].match(/^([0-9]+).*/),f!==null&&(c=f[1]))}return c},updateScrollTop:function(a,c){f.$("#spaui").find("#spaui-content").scrollTop(a.offset().top-
c)},isOnArticle:function(){var a=!1,c=g.location.href,b=/\/help\/([\d]+)/;c.match(b)&&c.match(b)[1]&&(a=!0);for(var b=c.split(/[\?&]+/),d=b.length,c=0;c<d;c++)b[c].split("=")[0]==="itemID"&&(a=!0);return a},exposejQuery:function(){if(typeof g.$!=="function")g.$=f.$},gda:function(a,c){return a.attr?a.attr("data-"+c):a.data?a.data(c):a.dataset?a.dataset[c]:a.getAttribute("data-"+c)},gebi:function(a){return document.getElementById(a)},delayInit:function(){var a=0;return function(c,b){clearTimeout(a);
a=setTimeout(c,b)}},startsWith:function(a,c){var b=!1;a.substr(0,c.length)===c&&(b=!0);return b},contains:function(a,c){if(typeof a==="string")if(c instanceof RegExp)return c.test(a);else if(a.indexOf(c)!==-1)return!0;return!1},handleSigninRedirect:function(a){return f.$(a).find("#signin-box").length>0&&f.$(a).find("#sign-in-button").length>0?(g.location.reload(),!0):!1},openInNewWindow:function(a){g.open(a,"_blank").focus()},redirect:function(a){g.location=a},getUniqueArray:function(a){for(var c=
{},b=[],d=0,f=a.length;d<f;++d)c.hasOwnProperty(a[d])||(b.push(a[d]),c[a[d]]=1);return b},isString:function(a){return typeof a==="string"||a instanceof String},isNumber:function(a){return!isNaN(a-0)&&a!==null&&a!==""&&a!==!1},isNull:function(a){return a===null||a===void 0},formatObjectAsUrlParams:function(a,c){if(f.$.isPlainObject(a)){var b=[],d;for(d in a)if(a.hasOwnProperty(d)){var g=a[d];g===!0?g="true":g===!1&&(g="false");c&&(g=encodeURIComponent(g));b.push(d+"="+g)}return b.length>0?"&"+b.join("&"):
""}return null},getErrorDetailsFromAjaxResponse:function(a,c){var b="none";c==="error"?b=a.status===0&&a.readyState===0?"abort":a.status===500?"server-error":"unknown-error":c==="abort"&&(b="abort");return{type:b,jqueryStatus:c,httpStatus:a.status,readyState:a.readyState}},getUid:function(){function a(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},truncateString:function(a,c,b){b===void 0&&(b="");if(a===void 0||!d.isString(a)||
!d.isString(b)||!d.isNumber(c))return"";c===void 0&&(c=100);return a.length>c?a.substr(0,c-b.length)+b:a},isParamPresent:function(a){return g.location.search.indexOf(a)!==-1},forEachObjectValue:function(a,c){for(var b in a)a.hasOwnProperty(b)&&c(a[b])},getElementRightOffset:function(a){var c=a.offset();return c===null?0:document.body.clientWidth-c.left-a.width()},ensureId:function(a){if(a.length!==0&&a instanceof f.$){var c=a.attr("id");(c===""||c===void 0)&&a.attr("id",d.getUid())}},resetJqueryAnimation:function(a){a.length!==
0&&a instanceof f.$&&(a.css("height",""),a.css("margin-top",""),a.css("margin-bottom",""),a.css("padding-top",""),a.css("padding-bottom",""),a.css("overflow",""))},isHashOnCurrentPage:function(a){var c=d.removeHashFromUrl(d.escape(g.location.href));return RegExp(c+"#.*$").test(a)},escape:function(a){return a.replace(/[-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")},removeHashFromUrl:function(a){return a.split("#")[0]},isHtmlElement:function(a){return typeof HTMLElement==="object"?a instanceof HTMLElement:!1},isSellerULink:function(a){return a===
"201047930"},executeIf:function(a,c){return function(b){(f.$.isFunction(a)&&a(b)||!f.$.isFunction(a)&&a)&&c(b)}}};return{init:d.init,startsWith:d.startsWith,contains:d.contains,delayFunc:d.delayInit(),exposejQuery:d.exposejQuery,gda:d.gda,gebi:d.gebi,getTopicIDFromLink:d.returnTopicIDFromLink,getTopicIDFromLocation:d.returnTopicIDFromLocation,handleSigninRedirect:d.handleSigninRedirect,isOnArticle:d.isOnArticle,openInNewWindow:d.openInNewWindow,textareaFocusPlaceholderFix:d.textareaFocusPlaceholderFix,
updateScrollTop:d.updateScrollTop,getUniqueArray:d.getUniqueArray,isString:d.isString,isNumber:d.isNumber,isNull:d.isNull,formatObjectAsUrlParams:d.formatObjectAsUrlParams,truncateString:d.truncateString,isParamPresent:d.isParamPresent,getErrorDetailsFromAjaxResponse:d.getErrorDetailsFromAjaxResponse,getUid:d.getUid,forEachObjectValue:d.forEachObjectValue,getElementRightOffset:d.getElementRightOffset,ensureId:d.ensureId,resetJqueryAnimation:d.resetJqueryAnimation,redirect:d.redirect,isHashOnCurrentPage:d.isHashOnCurrentPage,
isHtmlElement:d.isHtmlElement,isSellerULink:d.isSellerULink,executeIf:d.executeIf}});ASPP.when("ASPA","spaui-debug").register("spaui-weblabs",function(f,g){var d={newSeller:"C",contactDeflection:"C"},a={init:function(a){f.$.extend(d,a);for(var b in d)d.hasOwnProperty(b)&&(d[b]=d[b].toUpperCase())},doesTreatmentEqual:function(c,b){return d.hasOwnProperty(c)?d[c]===b.toUpperCase():(a.logMissingWeblabError(c),!1)},getTreatment:function(c){return d.hasOwnProperty(c)?d[c]:(a.logMissingWeblabError(c),"C")},
isControl:function(c){return a.doesTreatmentEqual(c,"C")},isAnyTreatment:function(c){return d.hasOwnProperty(c)?d[c].match(/^T[0-9]+$/):(a.logMissingWeblabError(),!1)},logMissingWeblabError:function(a){g.error('WEBLABS.doesTreatmentEqual failed, weblab "'+a+'" is not supported, please add it or correct it')}};return{init:a.init,doesTreatmentEqual:a.doesTreatmentEqual,getTreatment:a.getTreatment,isControl:a.isControl,isAnyTreatment:a.isAnyTreatment,NEW_SELLER:"newSeller",CONTACT_DEFLECTION:"contactDeflection"}});
ASPP.when("ASPA","spaui-ajax","spaui-events","spaui-shim").register("spaui-workflows",function(f,g,d){var a={},c={ID_REGEX:/workflow-id_(\S*)($|\s)/,WORKFLOW_URL:"/hz/sellerpartner/workflow?",WORKFLOW_ID:"workflowId=",CLIENT_ID:"&clientId=",TRANSITION_TIME:400,AUGUR_POPULATE_DELAY:25},b={init:function(){b.bind();b.initializeClientMapping()},bind:function(){d.subscribe(d.getName("newPage"),b.handleNewPage)},initializeClientMapping:function(){a["#_modules .workflow-placeholder"]="FullPageHelpArticle";
a[".spaui-help .workflow-placeholder"]="AthenaHelpArticle"},handleNewPage:function(){var a=b.scanForWorkflows();a.length>0&&a.forEach(b.replace)},scanForWorkflows:function(){var c=[],d=function(a){return function(d,g){var i=f.$(g),i=b.stripReplacementElement(i,a);i!==null&&c.push(i)}};f.$("#_modules .workflow-placeholder").each(d(a["#_modules .workflow-placeholder"]));f.$(".spaui-help .workflow-placeholder").each(d(a[".spaui-help .workflow-placeholder"]));return c},stripReplacementElement:function(a,
c){var d=b.getIdFromPossibleReplacement(a);return d!==null?{id:d,element:a,client:c}:null},getIdFromPossibleReplacement:function(a){a=a.attr("class");a=c.ID_REGEX.exec(a);return a===null?null:a[1]},replace:function(a){g.get(c.WORKFLOW_URL+c.WORKFLOW_ID+a.id+c.CLIENT_ID+a.client,{dataType:"html"},function(c){b.flush(a.element,c.data,!0)},function(c){b.flush(a.element,c.data,!1)})},flush:function(a,b,d){var g=f.$(b);d&&g.children().size()>0?a.is(":visible")&&(g.hide(),a.replaceWith(g),setTimeout(function(){g.slideDown(c.TRANSITION_TIME)},
c.AUGUR_POPULATE_DELAY)):a.remove()},overrideConfig:function(a){f.$.extend(c,a)}};return{init:b.init,overrideConfig:b.overrideConfig}})});